[
  {
    "url": "https://docs.growthbook.io/lib/php",
    "markdown": "# PHP SDK | GrowthBook Docs\n\nThe GrowthBook PHP SDK requires PHP version 7.1 or greater.\n\n## Installation[​](#installation \"Direct link to Installation\")\n\nGrowthBook is available on Composer:\n\n```\ncomposer require growthbook/growthbook\n```\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\n```\n// Create a GrowthBook instance$growthbook = Growthbook\\Growthbook::create()  ->withAttributes([    // Targeting attributes    'id' => $userId,    'someCustomAttribute' => true  ]);// Load feature flags from the GrowthBook API// Make sure to use caching in production! (see 'Loading Features' below)$growthbook->loadFeatures(\"sdk-abc123\", \"https://cdn.growthbook.io\");// Feature gatingif ($growthbook->isOn(\"my-feature\")) {  echo \"It's on!\";} else {  echo \"It's off :(\";}// Remote configuration with fallback$color = $growthbook->getValue(\"button-color\", \"blue\");echo \"<button style='color:${color}'>Click Me!</button>\";\n```\n\nSome of the feature flags you evaluate might be running an A/B test behind the scenes which you'll want to track in your analytics system.\n\nAt the end of the request, you can loop through all experiments and track them however you want to:\n\n```\n$impressions = $growthbook->getViewedExperiments();foreach($impressions as $impression) {  // Whatever you use for event tracking  Segment::track([    \"userId\" => $userId,    \"event\" => \"Experiment Viewed\",    \"properties\" => [      \"experimentId\" => $impression->experiment->key,      \"variationId\" => $impression->result->key    ]  ]);}\n```\n\n### Loading Features[​](#loading-features \"Direct link to Loading Features\")\n\nThere are 2 ways to load features into the SDK. You can use `loadFeatures` with a Client Key and API Host. Or, you can manually fetch and cache feature flags and pass them in with the `withFeatures` method.\n\n#### loadFeatures method[​](#loadfeatures-method \"Direct link to loadFeatures method\")\n\nThe `loadFeatures` method can fetch features from the GrowthBook API for you.\n\nBy default, there is no caching enabled. You can enable it by passing any PSR16-compatible instance into the `withCache` method.\n\n**Caching is required for production usage**\n\n```\n// Any psr-16 library will workuse Cache\\Adapter\\Apcu\\ApcuCachePool;$cache = new ApcuCachePool();$growthbook = Growthbook\\Growthbook::create()  ->withCache($cache);// You can optionally pass in a TTL (default 60s)$growthbook = Growthbook\\Growthbook::create()  ->withCache($cache, 120); // Cache for 120s instead\n```\n\nTo load features, we require a PSR-17 (HttpClient) and PSR-18 (RequestFactoryInterface) compatible library like Guzzle to be installed.\n\nWe will auto-discover most HTTP libraries without any configuration required, but if you prefer to specify it explicitly, you can use the `withHttpClient` method. Note - you'll need to specify both an `HttpClient` and a `RequestFactoryInterface` implementation.\n\nThe `loadFeatures` method takes 3 arguments:\n\n*   `$clientKey` (required) - Get this from your SDK Connection in GrowthBook.\n*   `$apiHost` (optional) - Defaults to `https://cdn.growthbook.io`. If self-hosting GrowthBook, set this to your API host.\n*   `$decryptionKey` (optional) - Only required if you've enabled encryption for your SDK Connection.\n\n#### withFeatures method[​](#withfeatures-method \"Direct link to withFeatures method\")\n\nIf you prefer to have full control over the fetching/caching behavior, you can use the `withFeatures` method instead to pass an associative array of features into the SDK.\n\n```\n// From the GrowthBook API, a custom cache layer, or somewhere else$featuresJSON = '{\"my-feature\":{\"defaultValue\":true}}';// Decode into an associative array$features = json_decode($featuresJSON, true);// Pass into the Growthbook instance$growthbook = Growthbook\\Growthbook::create()  ->withFeatures($features);\n```\n\n## The Growthbook Class[​](#the-growthbook-class \"Direct link to The Growthbook Class\")\n\nThe `Growthbook` class has a number of properties. These can be set using a Fluent interface or can be passed into a constructor using an associative array. Every property also has a getter method if needed. Here's an example:\n\n```\n// Using the fluent interface$growthbook = Growthbook\\Growthbook::create()  ->withFeatures($features)  ->withAttributes($attributes);// Using the constructor$growthbook = new Growthbook\\Growthbook([  'features' => $features,  'attributes' => $attributes]);// Getter methodsprint_r($growthbook->getFeatures());print_r($growthbook->getAttributes());\n```\n\nNote: you can also use the fluent methods (e.g. `withFeatures`) at any point to update properties.\n\n### Attributes[​](#attributes \"Direct link to Attributes\")\n\nYou can specify attributes about the current user and request. These are used for two things:\n\n1.  Feature targeting (e.g. paid users get one value, free users get another)\n2.  Assigning persistent variations in A/B tests (e.g. user id \"123\" always gets variation B)\n\nAttributes can be any JSON data type - boolean, integer, float, string, or array.\n\n```\n$attributes = [  'id' => \"123\",  'loggedIn' => true,  'deviceId' => \"abc123def456\",  'age' => 21,  'tags' => [\"tag1\", \"tag2\"],  'account' => [    'age' => 90  ]];\n```\n\nIf you want to update attributes later, please note that the `withAttributes` method completely overwrites the attributes object. You can use `array_merge` if you only want to update a subset of fields:\n\n```\n// Only update the url attribute$growthbook->withAttributes(array_merge(  $growthbook->getAttributes(),  [    'url' => '/checkout'  ]));\n```\n\n### Tracking Experiments[​](#tracking-experiments \"Direct link to Tracking Experiments\")\n\nAny time an experiment is run to determine the value of a feature, you want to track that event in your analytics system.\n\nYou can either do this via a callback function:\n\n```\n$trackingCallback = function (  Growthbook\\InlineExperiment $experiment,  Growthbook\\ExperimentResult $result) {  // Segment.io example  Segment::track([    \"userId\" => $userId,    \"event\" => \"Experiment Viewed\",    \"properties\" => [      \"experimentId\" => $experiment->key,      \"variationId\" => $result->key    ]  ]);};// Fluent interface$growthbook = Growthbook\\Growthbook::create()  ->withTrackingCallback($callback);// Using the constructor$growthbook = new Growthbook([  'trackingCallback' => $trackingCallback]);// Getter method$trackingCallback = $growthbook->getTrackingCallback();\n```\n\nOr track all events at the end of the request by looping through an array:\n\n```\n$impressions = $growthbook->getViewedExperiments();foreach($impressions as $impression) {  // Segment.io example  Segment::track([    \"userId\" => $userId,    \"event\" => \"Experiment Viewed\",    \"properties\" => [      \"experimentId\" => $impression->experiment->key,      \"variationId\" => $impression->result->key    ]  ]);}\n```\n\nOr, you can pass the impressions onto your front-end and fire analytics events from there. To do this, simply add a block to your template (shown here in plain PHP, but similar idea for Twig, Blade, etc.).\n\n```\n<script><?php foreach($growthbook->getViewedExperiments() as $impression): ?>  // tracking code goes here<?php endforeach; ?></script>\n```\n\nBelow are examples for a few popular front-end tracking libraries:\n\n#### Google Analytics[​](#google-analytics \"Direct link to Google Analytics\")\n\n```\nga('send', 'event', 'experiment',  \"<?= $impression->experiment->key ?>\",  \"<?= $impression->result->variationId ?>\",  {    // Custom dimension for easier analysis    'dimension1': \"<?=      $impression->experiment->key.':'.$impression->result->key    ?>\"  });\n```\n\n#### Segment[​](#segment \"Direct link to Segment\")\n\n```\nanalytics.track(\"Experiment Viewed\", <?=json_encode([  \"experimentId\" => $impression->experiment->key,  \"variationId\" => $impression->result->key])?>);\n```\n\n#### Mixpanel[​](#mixpanel \"Direct link to Mixpanel\")\n\n```\nmixpanel.track(\"Experiment Viewed\", <?=json_encode([  'Experiment name' => $impression->experiment->key,  'Variant name' => $impression->result->key])?>);\n```\n\n### Logging[​](#logging \"Direct link to Logging\")\n\nGrowthBook can output log messages to help you debug your feature flags and experiments.\n\nWe support any PSR-3 comaptible logger. We implement a fluent interface (`withLogger`) as well as the standard LoggerAware interface (`setLogger`).\n\n```\n// Fluent interface$growthbook  ->withLogger($logger)  ->with...;// Setter$growthbook->setLogger($logger);\n```\n\n## Using Features[​](#using-features \"Direct link to Using Features\")\n\nThere are 3 main methods for interacting with features.\n\n*   `$growthbook->isOn(\"feature-key\")` returns true if the feature is on\n*   `$growthbook->isOff(\"feature-key\")` returns false if the feature is on\n*   `$growthbook->getValue(\"feature-key\", \"default\")` returns the value of the feature with a fallback\n\nIn addition, you can use `$growthbook->getFeature(\"feature-key\")` to get back a `FeatureResult` object with the following properties:\n\n*   **value** - The JSON-decoded value of the feature (or `null` if not defined)\n*   **on** and **off** - The JSON-decoded value cast to booleans\n*   **source** - Why the value was assigned to the user. One of `unknownFeature`, `defaultValue`, `force`, or `experiment`\n*   **experiment** - Information about the experiment (if any) which was used to assign the value to the user\n*   **experimentResult** - The result of the experiment (if any) which was used to assign the value to the user\n\n## Inline Experiments[​](#inline-experiments \"Direct link to Inline Experiments\")\n\nInstead of declaring all features up-front and referencing them by ids in your code, you can also just run an experiment directly. This is done with the `$growthbook->runInlineExperiment` method:\n\n```\n$exp = Growthbook\\InlineExperiment::create(  \"my-experiment\",  [\"red\", \"blue\", \"green\"]);// Either \"red\", \"blue\", or \"green\"echo $growthbook->runInlineExperiment($exp)->value;\n```\n\nAs you can see, there are 2 required parameters for experiments, a string key, and an array of variations. Variations can be any data type, not just strings.\n\nThere are a number of additional settings to control the experiment behavior. The methods are all chainable. Here's an example that shows all of the possible settings:\n\n```\n$exp = Growthbook\\InlineExperiment::create(\"my-experiment\", [\"red\",\"blue\"])  // Run a 40/60 experiment instead of the default even split (50/50)  ->withWeights([0.4, 0.6])  // Only include 20% of users in the experiment  ->withCoverage(0.2)  // Targeting conditions using a MongoDB-like syntax  ->withCondition([    'country' => 'US',    'browser' => [      '$in' => ['chrome', 'firefox']    ]  ])  // Use an alternate attribute for assigning variations (default is 'id')  ->withHashAttribute(\"sessionId\")  // Namespaces are used to run mutually exclusive experiments  // Another experiment in the \"pricing\" namespace with a non-overlapping range  //   will be mutually exclusive (e.g. [0.5, 1])  ->withNamespace(\"pricing\", 0, 0.5);\n```\n\n### Inline Experiment Return Value[​](#inline-experiment-return-value \"Direct link to Inline Experiment Return Value\")\n\nA call to `runInlineExperiment` returns an `ExperimentResult` object with a few useful properties:\n\n```\n$result = $growthbook->runInlineExperiment($exp);// If user is part of the experimentecho($result->inExperiment); // true or false// The index of the assigned variationecho($result->variationId); // e.g. 0 or 1// The key used to identify this variation when tracking the eventecho($result->key); // e.g. \"control\"// The value of the assigned variationecho($result->value); // e.g. \"A\" or \"B\"// If the variations was randomly assigned based on a hashecho($result->hashUsed); // true or false// The user attribute that was hashedecho($result->hashAttribute); // \"id\"// The value of that attributeecho($result->hashValue); // e.g. \"123\"\n```\n\nThe `inExperiment` flag will be false if the user was excluded from being part of the experiment for any reason (e.g. failed targeting conditions).\n\nThe `hashUsed` flag will only be true if the user was randomly assigned a variation. If the user was forced into a specific variation instead, this flag will be false.",
    "title": "PHP SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for PHP",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/python",
    "markdown": "# Python SDK | GrowthBook Docs\n\n_Requires **Python 3.6** or above_\n\n## Installation[​](#installation \"Direct link to Installation\")\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\n```\nfrom growthbook import GrowthBook# User attributes for targeting and experimentationattributes = {  \"id\": \"123\",  \"customUserAttribute\": \"foo\"}def on_experiment_viewed(experiment, result):  # Use whatever event tracking system you want  analytics.track(attributes[\"id\"], \"Experiment Viewed\", {    'experimentId': experiment.key,    'variationId': result.key  })# Create a GrowthBook instancegb = GrowthBook(  attributes = attributes,  on_experiment_viewed = on_experiment_viewed,  api_host = \"https://cdn.growthbook.io\",  client_key = \"sdk-abc123\")# Load features from the GrowthBook API with cachinggb.load_features()# Simple on/off feature gatingif gb.is_on(\"my-feature\"):  print(\"My feature is on!\")# Get the value of a feature with a fallbackcolor = gb.get_feature_value(\"button-color-feature\", \"blue\")\n```\n\n### Web Frameworks (Django, Flask, etc.)[​](#web-frameworks-django-flask-etc \"Direct link to Web Frameworks (Django, Flask, etc.)\")\n\nFor web frameworks, you should create a new `GrowthBook` instance for every incoming request and call `destroy()` at the end of the request to clean up resources.\n\nIn Django, for example, this is best done with a simple middleware:\n\n```\nfrom growthbook import GrowthBookdef growthbook_middleware(get_response):    def middleware(request):        request.gb = GrowthBook(          # ...        )        request.gb.load_features()        response = get_response(request)        request.gb.destroy() # Cleanup        return response    return middleware\n```\n\nThen, you can easily use GrowthBook in any of your views:\n\n```\ndef index(request):    feature_enabled = request.gb.is_on(\"my-feature\")    # ...\n```\n\n## Loading Features[​](#loading-features \"Direct link to Loading Features\")\n\nThere are two ways to load feature flags into the GrowthBook SDK. You can either use the built-in fetching/caching logic or implement your own custom solution.\n\n### Built-in Fetching and Caching[​](#built-in-fetching-and-caching \"Direct link to Built-in Fetching and Caching\")\n\nTo use the built-in fetching and caching logic, in the `GrowthBook` constructor, pass in your GrowthBook `api_host` and `client_key`. If you have encryption enabled for your GrowthBook endpoint, you also need to pass the `decryption_key` into the constructor.\n\nThen, call the `load_features()` method to initiate the HTTP request with a cache layer.\n\nHere's a full example:\n\n```\ngb = GrowthBook(  api_host = \"https://cdn.growthbook.io\",  client_key = \"sdk-abc123\",  # How long to cache features in seconds (Optional, default 60s)  cache_ttl = 60,)gb.load_features()\n```\n\n#### Caching[​](#caching \"Direct link to Caching\")\n\nGrowthBook comes with a custom in-memory cache. If you run Python in a multi-process mode, the different processes cannot share memory, so you likely want to switch to a distributed cache system like Redis instead.\n\nHere is an example of using Redis:\n\n```\nfrom redis import Redisimport jsonfrom growthbook import GrowthBook, AbstractFeatureCache, feature_repoclass RedisFeatureCache(AbstractFeatureCache):  def __init__(self):    self.r = Redis(host='localhost', port=6379)    self.prefix = \"gb:\"  def get(self, key: str):    data = self.r.get(self.prefix + key)    # Data stored as a JSON string, parse into dict before returning    return None if data is None else json.loads(data)  def set(self, key: str, value: dict, ttl: int) -> None:    self.r.set(self.prefix + key, json.dumps(value))    self.r.expire(self.prefix + key, ttl)# Configure GrowthBook to use your custom cache classfeature_repo.set_cache(RedisFeatureCache())\n```\n\n### Custom Implementation[​](#custom-implementation \"Direct link to Custom Implementation\")\n\nIf you prefer to handle the entire fetching/caching logic yourself, you can just pass in a `dict` of features from the GrowthBook API directly into the constructor:\n\n```\n# From the GrowthBook APIfeatures = {'my-feature':{'defaultValue':False}}gb = GrowthBook(  features = features)\n```\n\nNote: When doing this, you do not need to specify your `api_host` or `client_key` and you don't need to call `gb.load_features()`.\n\n## GrowthBook class[​](#growthbook-class \"Direct link to GrowthBook class\")\n\nThe GrowthBook constructor has the following parameters:\n\n*   **enabled** (`bool`) - Flag to globally disable all experiments. Default true.\n*   **attributes** (`dict`) - Dictionary of user attributes that are used for targeting and to assign variations\n*   **url** (`str`) - The URL of the current request (if applicable)\n*   **qa\\_mode** (`boolean`) - If true, random assignment is disabled and only explicitly forced variations are used.\n*   **on\\_experiment\\_viewed** (`callable`) - A function that takes `experiment` and `result` as arguments.\n*   **api\\_host** (`str`) - The GrowthBook API host to fetch feature flags from. Defaults to `https://cdn.growthbook.io`\n*   **client\\_key** (`str`) - The client key that will be passed to the API Host to fetch feature flags\n*   **decryption\\_key** (`str`) - If the GrowthBook API endpoint has encryption enabled, specify the decryption key here\n*   **cache\\_ttl** (`int`) - How long to cache features in-memory from the GrowthBook API (seconds, default `60`)\n*   **features** (`dict`) - Feature definitions from the GrowthBook API (only required if `client_key` is not specified)\n*   **forced\\_variations** (`dict`) - Dictionary of forced experiment variations (used for QA)\n\nThere are also getter and setter methods for features and attributes if you need to update them later in the request:\n\n```\ngb.set_features(gb.get_features())gb.set_attributes(gb.get_attributes())\n```\n\n### Attributes[​](#attributes \"Direct link to Attributes\")\n\nYou can specify attributes about the current user and request. These are used for two things:\n\n1.  Feature targeting (e.g. paid users get one value, free users get another)\n2.  Assigning persistent variations in A/B tests (e.g. user id \"123\" always gets variation B)\n\nAttributes can be any JSON data type - boolean, integer, float, string, list, or dict.\n\n```\nattributes = {  'id': \"123\",  'loggedIn': True,  'age': 21.5,  'tags': [\"tag1\", \"tag2\"],  'account': {    'age': 90  }}# Pass into constructorgb = GrowthBook(attributes = attributes)# Or set latergb.set_attributes(attributes)\n```\n\n### Tracking Experiments[​](#tracking-experiments \"Direct link to Tracking Experiments\")\n\nAny time an experiment is run to determine the value of a feature, you want to track that event in your analytics system.\n\nYou can use the `on_experiment_viewed` option to do this:\n\n```\nfrom growthbook import GrowthBook, Experiment, Resultdef on_experiment_viewed(experiment: Experiment, result: Result):  # Use whatever event tracking system you want  analytics.track(attributes[\"id\"], \"Experiment Viewed\", {    'experimentId': experiment.key,    'variationId': result.key  })# Pass into constructorgb = GrowthBook(  on_experiment_viewed = on_experiment_viewed)\n```\n\n## Using Features[​](#using-features \"Direct link to Using Features\")\n\nThere are 3 main methods for interacting with features.\n\n*   `gb.is_on(\"feature-key\")` returns true if the feature is on\n*   `gb.is_off(\"feature-key\")` returns false if the feature is on\n*   `gb.get_feature_value(\"feature-key\", \"default\")` returns the value of the feature with a fallback\n\nIn addition, you can use `gb.evalFeature(\"feature-key\")` to get back a `FeatureResult` object with the following properties:\n\n*   **value** - The JSON-decoded value of the feature (or `None` if not defined)\n*   **on** and **off** - The JSON-decoded value cast to booleans\n*   **source** - Why the value was assigned to the user. One of `unknownFeature`, `defaultValue`, `force`, or `experiment`\n*   **experiment** - Information about the experiment (if any) which was used to assign the value to the user\n*   **experimentResult** - The result of the experiment (if any) which was used to assign the value to the user\n\n## Sticky Bucketing[​](#sticky-bucketing \"Direct link to Sticky Bucketing\")\n\n**Available starting in version 1.1.0**\n\nBy default GrowthBook does not persist assigned experiment variations for a user. We rely on deterministic hashing to ensure that the same user attributes always map to the same experiment variation. However, there are cases where this isn't good enough. For example, if you change targeting conditions in the middle of an experiment, users may stop being shown a variation even if they were previously bucketed into it.\n\nSticky Bucketing is a solution to these issues. You can provide a Sticky Bucket Service to the GrowthBook instance to persist previously seen variations and ensure that the user experience remains consistent for your users.\n\nA sample `InMemoryStickyBucketService` implementation is provided for reference, but in production you will definitely want to implement your own version using a database, cookies, or similar for persistence.\n\nSticky Bucket documents contain three fields\n\n*   `attributeName` - The name of the attribute used to identify the user (e.g. `id`, `cookie_id`, etc.)\n*   `attributeValue` - The value of the attribute (e.g. `123`)\n*   `assignments` - A dictionary of persisted experiment assignments. For example: `{\"exp1__0\":\"control\"}`\n\nThe attributeName/attributeValue combo is the primary key.\n\nHere's an example implementation using a theoretical `db` object:\n\n```\nfrom growthbook import AbstractStickyBucketService, GrowthBookclass MyStickyBucketService(AbstractStickyBucketService):    # Lookup a sticky bucket document    def get_assignments(self, attributeName: str, attributeValue: str) -> Optional[Dict]:        return db.find({          \"attributeName\": attributeName,          \"attributeValue\": attributeValue        })    def save_assignments(self, doc: Dict) -> None:        # Insert new record if not exists, otherwise update        db.upsert({            \"attributeName\": doc[\"attributeName\"],            \"attributeValue\": doc[\"attributeValue\"]        }, {          \"$set\": {            \"assignments\": doc[\"assignments\"]          }        })# Pass in an instance of this service to your GrowthBook constructorgb = GrowthBook(  sticky_bucket_service = MyStickyBucketService())\n```\n\n## Inline Experiments[​](#inline-experiments \"Direct link to Inline Experiments\")\n\nInstead of declaring all features up-front and referencing them by ids in your code, you can also just run an experiment directly. This is done with the `run` method:\n\n```\nfrom growthbook import Experimentexp = Experiment(  key = \"my-experiment\",  variations = [\"red\", \"blue\", \"green\"])# Either \"red\", \"blue\", or \"green\"print(gb.run(exp).value)\n```\n\nAs you can see, there are 2 required parameters for experiments, a string key, and an array of variations. Variations can be any data type, not just strings.\n\nThere are a number of additional settings to control the experiment behavior:\n\n*   **key** (`str`) - The globally unique tracking key for the experiment\n*   **variations** (`any[]`) - The different variations to choose between\n*   **seed** (`str`) - Added to the user id when hashing to determine a variation. Defaults to the experiment `key`\n*   **weights** (`float[]`) - How to weight traffic between variations. Must add to 1.\n*   **coverage** (`float`) - What percent of users should be included in the experiment (between 0 and 1, inclusive)\n*   **condition** (`dict`) - Targeting conditions\n*   **force** (`int`) - All users included in the experiment will be forced into the specified variation index\n*   **hashAttribute** (`string`) - What user attribute should be used to assign variations (defaults to \"id\")\n*   **hashVersion** (`int`) - What version of our hashing algorithm to use. We recommend using the latest version `2`.\n*   **namespace** (`tuple[str,float,float]`) - Used to run mutually exclusive experiments.\n\nHere's an example that uses all of them:\n\n```\nexp = Experiment(  key=\"my-test\",  # Variations can be a list of any data type  variations=[0, 1],  # If this changes, it will re-randomize all users in the experiment  seed=\"abcdef123456\",  # Run a 40/60 experiment instead of the default even split (50/50)  weights=[0.4, 0.6],  # Only include 20% of users in the experiment  coverage=0.2,  # Targeting condition using a MongoDB-like syntax  condition={    'country': 'US',    'browser': {      '$in': ['chrome', 'firefox']    }  },  # Use an alternate attribute for assigning variations (default is 'id')  hashAttribute=\"sessionId\",  # Use the latest hashing algorithm  hashVersion=2,  # Includes the first 50% of users in the \"pricing\" namespace  # Another experiment with a non-overlapping range will be mutually exclusive (e.g. [0.5, 1])  namespace=(\"pricing\", 0, 0.5),)\n```\n\n### Inline Experiment Return Value[​](#inline-experiment-return-value \"Direct link to Inline Experiment Return Value\")\n\nA call to `run` returns a `Result` object with a few useful properties:\n\n```\nresult = gb.run(exp)# If user is part of the experimentprint(result.inExperiment) # True or False# The string key of the assigned variationprint(result.key) # e.g. \"0\" or \"1\"# The value of the assigned variationprint(result.value) # e.g. \"A\" or \"B\"# If the variation was randomly assigned by hashing user attributesprint(result.hashUsed) # True or False# The user attribute used to assign a variationprint(result.hashAttribute) # \"id\"# The value of that attributeprint(result.hashValue) # e.g. \"123\"\n```\n\nThe `inExperiment` flag will be false if the user was excluded from being part of the experiment for any reason (e.g. failed targeting conditions).\n\nThe `hashUsed` flag will only be true if the user was randomly assigned a variation. If the user was forced into a specific variation instead, this flag will be false.\n\n### Example Experiments[​](#example-experiments \"Direct link to Example Experiments\")\n\n3-way experiment with uneven variation weights:\n\n```\ngb.run(Experiment(  key = \"3-way-uneven\",  variations = [\"A\",\"B\",\"C\"],  weights = [0.5, 0.25, 0.25]))\n```\n\nSlow rollout (10% of users who match the targeting condition):\n\n```\n# User is marked as being in \"qa\" and \"beta\"gb = GrowthBook(  attributes = {    \"id\": \"123\",    \"beta\": True,    \"qa\": True,  },)gb.run(Experiment(  key = \"slow-rollout\",  variations = [\"A\", \"B\"],  coverage = 0.1,  condition = {    'beta': True  }))\n```\n\nComplex variations\n\n```\nresult = gb.run(Experiment(  key = \"complex-variations\",  variations = [    (\"blue\", \"large\"),    (\"green\", \"small\")  ],))# Either \"blue,large\" OR \"green,small\"print(result.value[0] + \",\" + result.value[1])\n```\n\nAssign variations based on something other than user id\n\n```\ngb = GrowthBook(  attributes = {    \"id\": \"123\",    \"company\": \"growthbook\"  })# Users in the same company will always get the same variationgb.run(Experiment(  key = \"by-company-id\",  variations = [\"A\", \"B\"],  hashAttribute = \"company\"))\n```\n\n## Logging[​](#logging \"Direct link to Logging\")\n\nThe GrowthBook SDK uses a Python logger with the name `growthbook` and includes helpful info for debugging as well as warnings/errors if something is misconfigured.\n\nHere's an example of logging to the console\n\n```\nimport logginglogger = logging.getLogger('growthbook')logger.setLevel(logging.DEBUG)handler = logging.StreamHandler()formatter = logging.Formatter('%(asctime)s %(name)s %(levelname)s %(message)s')handler.setFormatter(formatter)logger.addHandler(handler)\n```",
    "title": "Python SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Python",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/ruby",
    "markdown": "# Ruby SDK | GrowthBook Docs\n\nView the full source code at [https://github.com/growthbook/growthbook-ruby](https://github.com/growthbook/growthbook-ruby).\n\n## Requirements[​](#requirements \"Direct link to Requirements\")\n\nThe Ruby SDK requires Ruby version 2.5.0 or higher.\n\n## Installation[​](#installation \"Direct link to Installation\")\n\nInstall the gem:\n\n## Quick start[​](#quick-start \"Direct link to Quick start\")\n\n```\nrequire 'growthbook'# Fetch features from a GrowthBook instance# You should cache this in Redis or similar in productionfeatures_repository = Growthbook::FeatureRepository.new(  endpoint: 'https://cdn.growthbook.io/api/features/MY_API_KEY',  decryption_key: nil)features = features_repository.fetch# Create a context for the current user/requestgb = Growthbook::Context.new(  features: features,  # User attributes for targeting / variation assignment  attributes: {    id: '123',    country: 'US'  })# Use a boolean feature flagif gb.on? :my_feature_key  puts 'My feature is on!'end# Get the value of a multivariate feature with a fallbackbtn_color = gb.feature_value(:signup_btn_color, 'pink')\n```\n\n## Tracking[​](#tracking \"Direct link to Tracking\")\n\n### Track experiment impressions[​](#track-experiment-impressions \"Direct link to Track experiment impressions\")\n\nWhen a feature's value is determined by an experiment (A/B test), you typically want to track that assignment event for later analysis.\n\nThere are two ways to do this. First is by accessing all impressions at the end of a request:\n\n```\ngb.impressions.each do |key, result|  puts \"Assigned variation #{result.variation_id} in experiment #{key}\"end\n```\n\nSecond is by using a listener to get alerted in realtime as users are put into experiments:\n\n```\nclass MyImpressionListener  def on_experiment_viewed(experiment, result)    puts \"Assigned variation #{result.variation_id} in experiment #{experiment.key}\"  endendgb.listener = MyImpressionListener.new\n```\n\n### Track feature usage[​](#track-feature-usage \"Direct link to Track feature usage\")\n\nGrowthBook can fire a callback whenever a feature is evaluated for a user. This can be useful to update 3rd party tools like NewRelic or DataDog.\n\nProvide a receiver that can receive `def on_feature_usage: (String _feature_key, FeatureResult _result) -> void`. There's a convenience class `FeatureUsageCallback` with a method you can override but you can provide your own.\n\n```\nclass MyFeatureUsageCallback < FeatureUsageCallback  def on_feature_usage(feature_key, feature_result)    puts \"on_feature_usage_called with key: #{feature_key} and result #{feature_result}\"  endendon_feature_usage = MyFeatureUsageCallback.new# you can pass it into the contextgb = Growthbook::Context.new({  attributes: {    id: 'user-abc123'  },  features: feature_repository.fetch || {},  on_feature_usage: on_feature_usage,})# or assign it afterwardsgb.on_feature_usage = on_feature_usage\n```\n\n## Using with Rails[​](#using-with-rails \"Direct link to Using with Rails\")\n\nYou can use the provided `Growthbook::FeatureRepository` class along with the Rails cache to fetch features periodically within your usage limits. Here is a controller concern you can use:\n\n```\nrequire 'growthbook'module GrowthbookSdk  def growthbook    @growthbook ||= Growthbook::Context.new(      features: growthbook_features_json,      attributes: {},    )  end  # use this as a before_action on your controller  def init_feature_flags    return if current_user.nil?    # TODO: Change this to get your user attributes as a hash in a way that works for your app    growthbook.attributes = current_user.as_json  end  private  def growthbook_features_json    Rails.cache.fetch(\"growthbook_features\", expires_in: 1.hour) do      puts \"🌎 Fetching GrowthBook features from the network\"      repo = Growthbook::FeatureRepository.new(        endpoint: 'https://cdn.growthbook.io/api/features/java_NsrWldWd5bxQJZftGsWKl7R2yD2LtAK8C8EUYh9L8',        decryption_key: nil,      )      repo.fetch || {}    end  endend\n```\n\nAnd in your `ApplicationController`:\n\n```\nclass ApplicationController < ActionController::API  include Authentication # your own auth strategy  include GrowthbookSdk # the controller concern code above  before_action :authenticate!  before_action :init_feature_flags # call this once you have a user from which to get attributesend\n```\n\nThe above code exposes the following methods on your application controller:\n\n*   `growthbook`: an instance of the GrowthBook SDK for the request\n*   `init_feature_flags`: a method intended to be used as a `before_action` hook, e.g. `before_action :init_feature_flags`\n\nIt assumes you have a method `current_user` that returns the currently-authenticated user, and that it responds to `as_json` to return a hash of the targeting attributes.\n\nHow this works:\n\n1.  With each request, the `init_feature_flags` method is called. This creates a new instance of `Growthbook::Context`\n2.  When creating the context for the first time, features are fetched and cached in the Rails cache. Subsequent calls use the cached version until the cache expires.\n3.  Developers can call methods on `growthbook` in their controllers to use the GrowthBook SDK, e.g. `growthbook.on?(:dark_mode)`.\n\nYou can see the Rails example linked in the [Code examples below](#code-examples).\n\n## Dev and QA helpers[​](#dev-and-qa-helpers \"Direct link to Dev and QA helpers\")\n\nFor dev/QA it's often useful to force specific feature values.\n\n```\n# These take precedence over everything else when determining a feature's valuegb.forced_features = {  my_feature: true,  other_feature: \"new value\"}# Will always be truegb.is_on?(:my_feature)# Will always be \"new value\"gb.feature_value(:other_feature)\n```\n\nFor more predictability during QA, you can also globally disable all random assignment in experiments from running:\n\n## Sticky Bucketing[​](#sticky-bucketing \"Direct link to Sticky Bucketing\")\n\n**Available starting in version 1.3.0**\n\nBy default GrowthBook does not persist assigned experiment variations for a user. We rely on deterministic hashing to ensure that the same user attributes always map to the same experiment variation. However, there are cases where this isn't good enough. For example, if you change targeting conditions in the middle of an experiment, users may stop being shown a variation even if they were previously bucketed into it.\n\nSticky Bucketing is a solution to these issues. You can provide a Sticky Bucket Service to the GrowthBook instance to persist previously seen variations and ensure that the user experience remains consistent for your users.\n\nA sample `InMemoryStickyBucketService` implementation is provided for reference, but in production you will definitely want to implement your own version using a database, cookies, or similar for persistence.\n\nSticky Bucket documents contain three fields\n\n*   `attributeName` - The name of the attribute used to identify the user (e.g. `id`, `cookie_id`, etc.)\n*   `attributeValue` - The value of the attribute (e.g. `123`)\n*   `assignments` - A hash of persisted experiment assignments. For example: `{\"exp1__0\":\"control\"}`\n\nThe attributeName/attributeValue combo is the primary key.\n\nHere's an example implementation using a theoretical `db` object:\n\n```\nrequire 'growthbook'class MyStickyBucketService < Growthbook::StickyBucketService  def get_assignments(attribute_name, attribute_value)    db.find({      attributeName: attribute_name,      attributeValue: attribute_value    })  end  def save_assignments(doc)    # Insert new record if not exists, otherwise update    db.upsert({        attributeName: doc[\"attributeName\"],        attributeValue: doc[\"attributeValue\"]    }, {      \"$set\": {        assignments: doc[\"assignments\"]      }    })  endend# Pass in an instance of this service to your GrowthBook constructorgb = Growthbook::Context.new(  sticky_bucket_service: MyStickyBucketService.new)\n```\n\n## Inline experiments[​](#inline-experiments \"Direct link to Inline experiments\")\n\nIt's also possible to directly run an experiment directly in code without going through a feature flag.\n\n```\n# Simple 50/50 experimentresult = gb.run(Growthbook::InlineExperiment.new(  key: \"my-experiment-key\",  variations: [\"red\", \"green\"]))# Whether or not the user was included in the experiment (either true or false)puts(result.in_experiment ? 'included' : 'excluded')# The value of the assigned variation (either \"red\" or \"green\")puts(result.value)# The variation index (either 0 or 1)puts(result.variation_id)\n```\n\nThere are lots of additional options when running inline experiments:\n\n```\ngb.run(Growthbook::InlineExperiment.new(  key: \"my-experiment-key\",  variations: [\"red\", \"green\"],  # Filter by context attributes  condition: {    country: {      \"$in\": [\"US\", \"CA\"]    }  },  # Adjust variation weights from the default 50/50 split  weights: [0.8, 0.2],  # Run for a subset of traffic (0 to 1, default = 1)  coverage: 0.5,  # Use a different context attribute for assigning a variation (default = \"id\")  hash_attribute: \"device_id\",  # Use a namespace to run mutually exclusive experiments  namespace: [\"pricing-page\", 0, 0.25]))\n```\n\n## Working with Encrypted features[​](#working-with-encrypted-features \"Direct link to Working with Encrypted features\")\n\nYou can learn more about [SDK Connection Endpoint Encryption](https://docs.growthbook.io/app/api#encryption).\n\nCreate a `GrowthBook::Context` with an encrypted payload and a decryption key:\n\n```\n# TODO: Replace these values with your own:Growthbook::Context.new(  encrypted_features: 'm5ylFM6ndyOJA2OPadubkw==.Uu7ViqgKEt/dWvCyhI46q088PkAEJbnXKf3KPZjf9IEQQ+A8fojNoxw4wIbPX3aj',  decryption_key: 'Zvwv/+uhpFDznZ6SX28Yjg==',  attributes: {    id: '456',    country: 'CA'  })\n```\n\nWhen fetching features from the GrowthBook SDK endpoint, the encrypted features are available on a property `encryptedFeatures` instead of plain text on the property `features`. Here's an example with networking:\n\n```\nuri = URI('https://cdn.growthbook.io/api/features/MY_API_KEY')res = Net::HTTP.get_response(uri)encrypted_features = res.is_a?(Net::HTTPSuccess) ? JSON.parse(res.body)['encryptedFeatures'] : nilGrowthbook::Context.new(  encrypted_features: encrypted_features,  decryption_key: '<key-for-decrypting>',  attributes: {    id: '456',    country: 'CA'  })\n```\n\n## Code Examples[​](#code-examples \"Direct link to Code Examples\")\n\n*   [Ruby on Rails example](https://github.com/growthbook/examples/tree/main/acme_donuts_rails)\n\n## Further Reading[​](#further-reading \"Direct link to Further Reading\")\n\n*   [Generated class docs](https://growthbook.github.io/growthbook-ruby/)",
    "title": "Ruby SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Ruby",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/vue",
    "markdown": "# Vue.js | GrowthBook Docs\n\nThis page includes example implementations for Vue 3 (composition API) and Vue 2 (options API).\n\nThe Vue.js implementations are a light wrapper around the [JavaScript library](https://docs.growthbook.io/lib/js), so you may want to view those docs first to familiarize yourself with the basic classes and methods.\n\n## Installation[​](#installation \"Direct link to Installation\")\n\nAdd the `@growthbook/growthbook` package to your project.\n\nWith Yarn:\n\n```\nyarn add @growthbook/growthbook\n```\n\nWith NPM:\n\n```\nnpm i --save @growthbook/growthbook\n```\n\nWith unpkg:\n\n```\n<script type=\"module\">  import { GrowthBook } from \"https://unpkg.com/@growthbook/growthbook/dist/bundles/esm.min.js\";  //...</script>\n```\n\n## Vue 3 → Composition API[​](#vue-3--composition-api \"Direct link to Vue 3 → Composition API\")\n\n### Create a provider[​](#create-a-provider \"Direct link to Create a provider\")\n\nFirst, we're going to create a provider that can be injected in your app.\n\nCreate a file `./src/utils/growthbook/growthbook.ts` and add the following code:\n\n./src/utils/growthbook/growthbook.ts\n\n```\nimport type { App, InjectionKey } from \"vue\";import { GrowthBook } from \"@growthbook/growthbook\";/** * Configuration for the options passed to the app.use() call */export type GrowthBookVuePluginConfig = {  /**   * The endpoint that your features are hosted on. Get this from the Environments → SDK Endpoints section   */  featuresEndpoint: string;  /**   * Allows you to use the Chrome DevTools Extension to test/debug.   * Learn more: https://docs.growthbook.io/tools/chrome-extension   */  enableDevMode: boolean;};/** * The provided GrowthBook would be null in the event that the API call to the features endpoint fails. */type GrowthBookProvider = {  init: () => Promise<GrowthBook | null>;};export const growthBookKey = Symbol() as InjectionKey<GrowthBookProvider>;const getFeaturesJson = async (  featuresEndpoint: string): Promise<Record<string, any>> => {  const response = await fetch(featuresEndpoint);  return await response.json();};export const growthBookPlugin = {  install(    app: App,    { featuresEndpoint, enableDevMode = false }: GrowthBookVuePluginConfig  ) {    let growthBook: GrowthBook | null = null;    const init = async (): Promise<GrowthBook | null> => {      if (growthBook) {        return growthBook;      }      try {        const json = await getFeaturesJson(featuresEndpoint);        growthBook = new GrowthBook({          enableDevMode,        });        growthBook.setFeatures(json.features);        return growthBook;      } catch (e) {        console.error(\"GrowthBook Vue plugin error\", e);        return null;      }    };    app.provide<GrowthBookProvider>(growthBookKey, {      init,    });  },};\n```\n\n### Add the provider to your app[​](#add-the-provider-to-your-app \"Direct link to Add the provider to your app\")\n\nNext, in the `./src/main.ts` file of your app, use this new plugin we just created:\n\n./src/main.ts\n\n```\nimport { growthBookPlugin } from \"@/utils/growthbook/growthbook\";const app = createApp(App);app.use(router);// Use the new GrowthBook plugin like other pluginsapp.use(growthBookPlugin, {  featuresEndpoint: \"https://cdn.growthbook.io/api/features/:env_key\",  enableDevMode: true,});app.mount(\"#app\");\n```\n\nYou can find your features endpoint on the [Environments → SDK Endpoints page](https://app.growthbook.io/environments) .\n\n### Use GrowthBook in your components[​](#use-growthbook-in-your-components \"Direct link to Use GrowthBook in your components\")\n\nNext, to use the GrowthBook SDK in our components, we will need to inject it, initialize the SDK with user attributes, and then check features.\n\n<script setup lang='ts'>\n\n```\nimport { inject, onMounted, ref } from \"vue\";import { growthBookKey } from \"@/utils/growthbook/growthbook\";const growthBookInjectable = inject(growthBookKey);const bannerText = ref<string>(\"\");onMounted(() => {  growthBookInjectable?.init().then((growthBook) => {    if (!growthBook) {      console.error(\"GrowthBook failed to initialize\");      return;    }    growthBook.setAttributes({      loggedIn: true,      country: \"canada\",      employee: true,      id: \"user-employee-123456789\",    });    const evaluatedBannerText = growthBook.getFeatureValue(\"banner_text\", \"\");    if (typeof evaluatedBannerText !== \"undefined\") {      bannerText.value = evaluatedBannerText;    }  });});\n```\n\nThe above code will allow you to use the dynamic `{{bannerText}}` value in your template.\n\n## Vue 2 → Options API[​](#vue-2--options-api \"Direct link to Vue 2 → Options API\")\n\n### Create a provider[​](#create-a-provider-1 \"Direct link to Create a provider\")\n\nFirst, we're going to create a provider that can be injected in your app.\n\nCreate a file `./src/utils/growthbook/growthbook.js` and add the following code:\n\n./src/utils/growthbook/growthbook.ts\n\n```\nimport { GrowthBook } from \"@growthbook/growthbook\";const getFeaturesJson = (featuresEndpoint) => {  return fetch(featuresEndpoint)    .then((response) => {      return response.json()    })}export const GrowthBookVuePlugin = {  install: function (Vue, { featuresEndpoint, enableDevMode = false }) {    let growthBook = null;    Vue.prototype.initGrowthBook = function initGrowthBook() {      if (growthBook) {        return Promise.resolve(growthBook);      }      return getFeaturesJson(featuresEndpoint)        .then((json) => {          growthBook = new GrowthBook({            enableDevMode,          });          growthBook.setFeatures(json.features);          return growthBook;        })        .catch((error) => {          console.error(\"GrowthBook Vue plugin initialization error\", error);          return null;        })    }  }}\n```\n\n### Add the provider to your app[​](#add-the-provider-to-your-app-1 \"Direct link to Add the provider to your app\")\n\nNext, in the `./src/main.js` file of your app, use this new plugin we just created:\n\n./src/main.js\n\n```\nimport Vue from 'vue'import App from './App.vue'import { GrowthBookVuePlugin } from './utils/growthbook/growthbook'Vue.config.productionTip = falseVue.use(GrowthBookVuePlugin, {  featuresEndpoint: \"https://cdn.growthbook.io/api/features/:feature_key\",  enableDevMode: true,})new Vue({  render: h => h(App),}).$mount('#app')\n```\n\nYou can find your features endpoint on the [Environments → SDK Endpoints page](https://app.growthbook.io/environments) .\n\n### Use GrowthBook in your components[​](#use-growthbook-in-your-components-1 \"Direct link to Use GrowthBook in your components\")\n\nNext, to use the GrowthBook SDK in our components, we will need to inject it, initialize the SDK with user attributes, and then check features.\n\n<script>\n\n```\nexport default {  name: 'PublicPage',  props: {},  mounted() {    this      .initGrowthBook()      .then((growthBook) => {        if (!growthBook) {          console.warn('GrowthBook failed to initialize. Feature flags and experiments not active.')          return        }        growthBook.setAttributes({          loggedIn: true,          country: \"france\",          employee: false,          id: \"user-abc123\",        });        const evaluatedBannerText = growthBook.getFeatureValue(\"banner_text\", \"\");        if (typeof evaluatedBannerText !== \"undefined\") {          this.bannerText = evaluatedBannerText;        }      })      .catch((error) => {        console.error('Unknown Error', error)      })      .finally(() => {        this.loading = false      })  },  data() {    return {      bannerText: '',    }  }}\n```\n\nThe above code will allow you to use the dynamic `{{bannerText}}` value in your template.\n\n## Examples[​](#examples \"Direct link to Examples\")\n\n*   [Vue 3 composition API example](https://github.com/growthbook/examples/tree/main/javascript-vue-composition)\n*   [Vue 2 options API example](https://github.com/growthbook/examples/tree/main/javascript-vue-options)",
    "title": "Vue.js | GrowthBook Docs",
    "description": "GrowthBook SDK for Vue.js",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/go",
    "markdown": "# Go SDK | GrowthBook Docs\n\n## Installation[​](#installation \"Direct link to Installation\")\n\n```\ngo get github.com/growthbook/growthbook-golang\n```\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\nThe main public API for the SDK is provided through the `Context` and `GrowthBook` types. The `Context` type provides a means to pass settings to the main `GrowthBook` type, while the `GrowthBook` type provides a `Feature` method for accessing feature values, and a `Run` method for running inline experiments.\n\n```\n// GBFeaturesResponse// GrowthBook features responsetype GBFeaturesResponse struct {\tStatus            int             `json:\"status\"`\tFeatures          json.RawMessage `json:\"features\"`\tEncryptedFeatures string          `json:\"encryptedFeatures,omitempty\"` // Not yet supported in the Go SDK\tDateUpdated       time.Time       `json:\"dateUpdated\"`}// Get JSON from GrowthBook and deserialize it into GBFeaturesResponse structres, err := http.Get(\"https://cdn.growthbook.io/api/features/<environment_key>\")if err != nil {\tfmt.Printf(\"Error fetching features from GrowthBook: %s \\n\", err)\tos.Exit(1)}var featuresResponse GBFeaturesResponseerr = json.NewDecoder(res.Body).Decode(&featuresResponse)if err != nil {\tfmt.Printf(\"Error decoding JSON: %s \\n\", err)\tos.Exit(1)}features := growthbook.ParseFeatureMap(featuresResponse.Features)// Optional tracking callback// This will get called when the font_colour experiment below is evaluated// See \"Tracking and subscriptions\" section belowtrackingCallback := func(experiment *growthbook.Experiment, result *growthbook.ExperimentResult) {\tfmt.Printf(\"Experiment Viewed: %s - Variation index: %d - Value: %s \\n\", experiment.Key, result.VariationID, result.Value)}// Set up user attributes - See Attributes below for more infouserAttributes := growthbook.Attributes{\t\"id\": \"user-abc123\",\t\"country\": \"canada\",}// Create a growthbook.Context instance with the features and attributescontext := growthbook.NewContext().\tWithFeatures(features).\tWithAttributes(userAttributes).\tWithTrackingCallback(trackingCallback)// Create a growthbook.GrowthBook instancegb := growthbook.New(context)// Get a string valuebannerText := gb.Feature(\"banner_text\").GetValueWithDefault(\"(unknown banner text)\")// Perform feature test.if gb.Feature(\"dark_mode\").On {\t// ...}// Evaluate an inline experiment and cast the result to a string (or the known type)experiment := growthbook.\tNewExperiment(\"font_colour\").\tWithVariations(\"red\", \"orange\", \"yellow\", \"green\", \"blue\", \"purple\")result := gb.Run(experiment)var fontColour = result.Value.(string)fmt.Println(fontColour)experiment2 :=  growthbook.NewExperiment(\"complex-experiment\").    WithVariations(      map[string]string{\"color\": \"blue\", \"size\": \"small\"},      map[string]string{\"color\": \"green\", \"size\": \"large\"},    ).    WithWeights(0.8, 0.2).    WithCoverage(0.5)result2 := gb.Run(experiment2)fmt.Println(result2.Value.(map[string]string)[\"color\"],  result2.Value.(map[string]string)[\"size\"])\n```\n\n## The GrowthBook Context[​](#the-growthbook-context \"Direct link to The GrowthBook Context\")\n\nA new `Context` is created using the `NewContext` function and its fields can be set using the `WithEnabled`, `WithAttributes`, `WithURL`, `WithFeatures`, `WithForcedVariations`, `WithQAMode` and `WithTrackingCallback` methods. These `With...` methods return a `Context` pointer to enable call chaining. Context details can alternatively be parsed from JSON data (see [JSON data representations](#json-data-representations)). The fields in a `Context` include information about the user for whom feature results will be evaluated (the `Attributes`), the features that are defined, plus some additional values to control forcing of feature results under some circumstances.\n\nGiven a `Context` value, a new `GrowthBook` value can be created using the `New` function. The `GrowthBook` type has some getter and setter methods (setters are methods with names of the form `With...`) for fields of the associated `Context`. As well as providing access to the underlying Context and exposing the main `Feature` and `Run` methods, the `GrowthBook` type also keeps track of the results of experiments that are performed, in order to implement tracking and experiment subscription callbacks.\n\nFor example, assuming that the `growthbook` package is imported with name \"`growthbook`\", the following code will create a `Context` and `GrowthBook` value using features parsed from JSON data and some fixed attributes:\n\n```\n// Parse feature map from JSON.features := growthbook.ParseFeatureMap(featureJSON)// Create context and main GrowthBook object.context := growthbook.NewContext().  WithFeatures(features).  WithAttributes(growthbook.Attributes{    \"country\": \"US\",    \"browser\": \"firefox\",  })gb := growthbook.New(context)\n```\n\n### Features[​](#features \"Direct link to Features\")\n\nThe `WithFeatures` method of `Context` takes a `FeatureMap` value, which is defined as `map[string]*Feature`, and which can be created from JSON data using the `ParseFeatureMap` function (see [JSON data representations](#json-data-representations)). You can pass a feature map generated this way to the `WithFeatures` method of `Context` or `GrowthBook`:\n\n```\nfeatureMap := ParseFeatureMap([]byte(  `{ \"feature-1\": {...},     \"feature-2\": {...},     \"another-feature\": {...}   }`))gb := NewContext().WithFeatures(featureMap)\n```\n\nIf you need to load feature definitions from a remote source like an API or database, you can update the context at any time with `WithFeatures`.\n\nIf you use the GrowthBook App to manage your features, you don't need to build this JSON file yourself -- it will auto-generate one for you and make it available via an API endpoint.\n\nIf you prefer to build this file by hand or you want to know how it works under the hood, check out the detailed [Feature Definitions](#feature-definitions) section below.\n\n### Attributes[​](#attributes \"Direct link to Attributes\")\n\nYou can specify attributes about the current user and request. These are used for two things:\n\n*   Feature targeting (e.g. paid users get one value, free users get another);\n*   Assigning persistent variations in A/B tests (e.g. user id \"123\" always gets variation B).\n\nAttributes can be any JSON data type -- boolean, integer, string, array, or object and are represented by the `Attributes` type, which is an alias for the generic `map[string]interface{}` type that Go uses for JSON objects. If you know them up front, you can pass them into `Context` or `GrowthBook` using `WithAttributes`:\n\n```\ngb := growthbook.New(context).  WithAttributes(Attributes{    \"id\":       \"123\",    \"loggedIn\": true,    \"deviceId\": \"abc123def456\",    \"company\":  \"acme\",    \"paid\":     false,    \"url\":      \"/pricing\",    \"browser\":  \"chrome\",    \"mobile\":   false,    \"country\":  \"US\",  })\n```\n\nYou can also set or update attributes asynchronously at any time with the `WithAttributes` method. This will completely overwrite the attributes object with whatever you pass in. If you want to merge attributes instead, you can get the existing ones with `Attributes`:\n\n```\nattrs := gb.Attributes()attrs[\"url\"] = \"/checkout\"gb.WithAttributes(attrs)\n```\n\nBe aware that changing attributes may change the assigned feature values. This can be disorienting to users if not handled carefully. A common approach is to only refresh attributes on navigation, when the window is focused, and/or after a user performs a major action like logging in.\n\n### Tracking Callback[​](#tracking-callback \"Direct link to Tracking Callback\")\n\nAny time an experiment is run to determine the value of a feature, we can run a callback function so you can record the assigned value in your event tracking or analytics system of choice.\n\n```\ncontext.WithTrackingCallback(func(experiment *growthbook.Experiment,  result *growthbook.ExperimentResult) {    // Example using Segment.io    client.Enqueue(analytics.Track{      UserId: context.Attributes()[\"id\"],      Event: \"Experiment Viewed\",      Properties: analytics.NewProperties().        Set(\"experimentId\", experiment.Key).        Set(\"variationId\", result.VariationID)    })  })\n```\n\n## Error handling[​](#error-handling \"Direct link to Error handling\")\n\nThe GrowthBook public API does not return errors under any normal circumstances. The intention is for developers to be able to use the SDK in both development and production smoothly. To this end, error reporting is provided by a configurable logging interface.\n\nFor development use, the `DevLogger` type provides a suitable implementation of the logging interface: it prints all logged messages to standard output, and exits on errors.\n\nFor production use, a logger that directs log messages to a suitable centralised logging facility and ignores all errors would be suitable. The logger can of course also signal error and warning conditions to other parts of the program in which it is used.\n\nTo be specific about this:\n\n*   None of the functions that create or update `Context`, `GrowthBook` or `Experiment` values return errors.\n    \n*   The main `GrowthBook.Feature` and `GrowthBook.Run` methods never return errors.\n    \n*   None of the functions that create values from JSON data return errors.\n    \n\nFor most common use cases, this means that the GrowthBook SDK can be used transparently, without needing to care about error handling. Your server code will never crash because of problems in the GrowthBook SDK. The only effect of error conditions in the inputs to the SDK may be that feature values and results of experiments are not what you expect.\n\n## Using Features[​](#using-features \"Direct link to Using Features\")\n\nThe main method, `GrowthBook.Feature(key)`, takes a feature key and uses the stored feature definitions and attributes to evaluate the feature value. It returns a `FeatureResult` value with the following fields:\n\n*   `Value`: the JSON value of the feature (or null if not defined), as a `FeatureValue` value (which is just an alias for `interface{}`, using Go's default behavior for handling JSON values);\n*   `On` and `Off`: the JSON value cast to booleans (to make your code easier to read);\n*   `Source`: a value of type `FeatureResultSource`, telling why the value was assigned to the user. One of `UnknownFeatureResultSource`, `DefaultValueResultSource`, `ForceResultSource`, or `ExperimentResultSource`.\n*   `Experiment`: information about the experiment (if any) which was used to assign the value to the user.\n*   `ExperimentResult`: the result of the experiment (if any) which was used to assign the value to the user.\n\nHere's an example that uses all of them:\n\n```\nresult := gb.Feature(\"my-feature\")// The JSON value (might be null, string, boolean, number, array, or// object).fmt.Println(result.Value)if result.On {  // Feature value is truthy (in a Javascript sense)}if result.Off {  // Feature value is falsy}// If the feature value was assigned as part of an experimentif result.Source == growthbook.ExperimentResultSource {  // Get all the possible variations that could have been assigned  fmt.Println(result.Experiment.Variations)}\n```\n\nDefaulting of the values of feature results is assisted by the `GetValueWithDefault` method on the `FeatureResult` type. For example, this code evaluates the result of a feature and returns the feature value, defaulting to \"blue\" if the feature has no value:\n\n```\ncolor := gb.Feature(\"signup-button-color\").GetValueWithDefault(\"blue\")\n```\n\n## Feature Definitions[​](#feature-definitions \"Direct link to Feature Definitions\")\n\nFor details of the JSON format used for feature definitions, consult the documentation for the [GrowthBook Javascript SDK](https://docs.growthbook.io/lib/js). The Go SDK uses exactly the same logic for processing features, and can ingest the same JSON feature definitions as are used by the Javascript SDK (see [JSON data representations](#json-data-representations)).\n\nIt is possible to create `Feature` values in the Go SDK by hand, simply by creating Go values of the appropriate types (`Feature`, `FeatureValue`, `FeatureRule`), but the most common use case is likely to be ingesting feature definitions from JSON data using the `ParseFeatureMap` function.\n\n## Inline Experiments[​](#inline-experiments \"Direct link to Inline Experiments\")\n\nExperiments can be defined and run using the `Experiment` type and the `Run` method of the `GrowthBook` type. Experiment definitions can be created directly as values of the `Experiment` type, or parsed from JSON definitions using the `ParseExperiment` function. Passing an `Experiment` value to the `Run` method of the `GrowthBook` type will run the experiment, returing an `ExperimentResult` value that contains the resulting feature value. This allows users to run arbitrary experiments without providing feature definitions up-front.\n\n```\nexperiment :=  growthbook.NewExperiment(\"my-experiment\").    WithVariations(\"red\", \"blue\", \"green\")result := gb.Run(experiment)\n```\n\nAll other experiment settings (weights, hash attribute, coverage, namespace, condition) are supported when using inline experiments: the `Experiment` type has `With...` methods that allow these fields to be set easily (i.e. `WithWeights`, `WithHashAttribute`, `WithCoverage`, `WithNamespace`, `WithCondition`).\n\nIn addition, there are a few other settings that only really make sense for inline experiments:\n\n*   `Force` can be set to one of the variation array indexes. Everyone will be immediately assigned the specified value.\n*   `Active` can be set to `false` to disable the experiment and return the control for everyone.\n\n### Inline Experiment Return Value[​](#inline-experiment-return-value \"Direct link to Inline Experiment Return Value\")\n\nA call to `GrowthBook.Run(experiment)` returns a value of type `*ExperimentResult`:\n\n```\nexperiment := growthbook.NewExperiment(\"my-experiment\").  WithVariations(\"A\", \"B\")result := gb.Run(experiment)// If user is part of the experimentfmt.Println(result.InExperiment) // true or false// The index of the assigned variationfmt.Println(result.VariationID) // 0 or 1// The value of the assigned variationfmt.Println(result.Value) // \"A\" or \"B\"// The user attribute used to assign a variationfmt.Println(result.HashAttribute) // \"id\"// The value of that attributefmt.Println(result.HashValue) // e.g. \"123\"\n```\n\nThe `InExperiment` flag is only set to true if the user was randomly assigned a variation. If the user failed any targeting rules or was forced into a specific variation, this flag will be false.\n\n## JSON data representations[​](#json-data-representations \"Direct link to JSON data representations\")\n\nFor interoperability of the GrowthBook Go SDK with versions of the SDK in other languages, the core \"input\" values of the SDK (in particular, `Context` and `Experiment` values and maps of feature definitions) can be created by parsing JSON data.\n\nA common use case is to download the feature definition from the GrowthBook SDK endpoints, and parse them into a feature map that can be passed into the GrowthBook `Context`.\n\nThe shape of the GrowthBook response can use the following struct:\n\n```\n// GBFeaturesResponse// GrowthBook features responsetype GBFeaturesResponse struct {\tStatus            int             `json:\"status\"`\tFeatures          json.RawMessage `json:\"features\"`\tEncryptedFeatures string          `json:\"encryptedFeatures,omitempty\"` // Not yet supported in the Go SDK\tDateUpdated       time.Time       `json:\"dateUpdated\"`}\n```\n\nNext, get JSON from GrowthBook and deserialize it into GBFeaturesResponse struct.\n\n```\nres, err := http.Get(\"https://cdn.growthbook.io/api/features/<environment_key>\")if err != nil {\tfmt.Printf(\"Error fetching features from GrowthBook: %s \\n\", err)\tos.Exit(1)}var featuresResponse GBFeaturesResponseerr = json.NewDecoder(res.Body).Decode(&featuresResponse)if err != nil {\tfmt.Printf(\"Error decoding JSON: %s \\n\", err)\tos.Exit(1)}features := growthbook.ParseFeatureMap(featuresResponse.Features)// Create a growthbook.Context instance with the features and attributescontext := growthbook.NewContext().\tWithFeatures(features).\tWithAttributes(userAttributes)// Create a growthbook.GrowthBook instancegb := growthbook.New(context)\n```\n\nThe functions that implement this JSON processing functionality have names like `ParseContext`, `BuildContext`, and so on. Each `Parse...` function process raw JSON data (as a `[]byte` value), while the `Build...` functions process JSON objects unmarshalled to Go values of type `map[string]interface{}`. This provides flexibility in ingestion of JSON data.\n\n## Tracking and subscriptions[​](#tracking-and-subscriptions \"Direct link to Tracking and subscriptions\")\n\nThe `Context` value supports a \"tracking callback\", which is a function that is called any time an experiment is run to determine the value of a feature, so that users can record the assigned value in an external event tracking or analytics system.\n\nIn addition to the tracking callback, the `GrowthBook` type also supports more general \"subscriptions\", which are callback functions that are called any time `Run` is called, irrespective of whether or not a user is included in an experiment. The subscription system ensures that subscription callbacks are only called when the result of an experiment changes, or a new experiment is run.\n\n## Code Examples[​](#code-examples \"Direct link to Code Examples\")\n\n*   [Go server example that fetches from the GrowthBook API](https://github.com/growthbook/examples/tree/main/go-example)\n*   [Go CLI app that ingests features from file](https://github.com/ian-ross/growthbook-golang-example)\n\n## Further Reading[​](#further-reading \"Direct link to Further Reading\")\n\n*   [godoc](https://growthbook.github.io/growthbook-golang)",
    "title": "Go SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Golang",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/csharp",
    "markdown": "# C# SDK | GrowthBook Docs\n\nView the full documentation on [GitHub](https://github.com/growthbook/growthbook-c-sharp).\n\n[![nuget badge for growthbook](https://img.shields.io/nuget/v/growthbook-c-sharp?style=flat-square)](https://www.nuget.org/packages/growthbook-c-sharp)\n\n## Installation[​](#installation \"Direct link to Installation\")\n\n```\n    dotnet add package growthbook-c-sharp\n```\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\nThis library is based on the [GrowthBook SDK specs](https://docs.growthbook.io/lib/build-your-own) and should be compatible with the usage examples in the [GrowthBook docs](https://docs.growthbook.io/).\n\nDown below you'll find two basic examples on how the package works.\n\n### Basic[​](#basic \"Direct link to Basic\")\n\n1.  Declare features\n    \n    ```\n    var staticFeatures = new Dictionary<string, Feature>{    {\"firstFeature\", new Feature{ DefaultValue = true}},    {\"secondFeature\", new Feature{ DefaultValue = false}}};\n    ```\n    \n2.  Create a context and add the features\n    \n    ```\n    var context = new Context{    Enabled = true,    Url = \"\",    Features = staticFeatures};\n    ```\n    \n3.  Create the `GrowthBook` object with the context\n    \n    ```\n    using GrowthBook;//...var GrowthBook = new GrowthBook.GrowthBook(context);\n    ```\n    \n4.  Check whether a feature is enabled\n    \n    ```\n    GrowthBook.IsOn(\"firstFeature\") // trueGrowthBook.IsOn(\"secondFeature\") // false\n    ```\n    \n\n### Loading feature definitions from an API[​](#loading-feature-definitions-from-an-api \"Direct link to Loading feature definitions from an API\")\n\nBecause feature definitions are typically loaded from API calls or cache, [Json.NET](https://www.nuget.org/packages/Newtonsoft.Json/13.0.2-beta1) objects are used to represent arbitrary document types such as Attributes, Conditions, and Feature values.\n\nTo load your features from the GrowthBook API use the following example:\n\n1.  Create a result model for the API response\n    \n    ```\n    public class FeaturesResult{    public HttpStatusCode Status { get; set; }    public IDictionary<string, Feature>? Features { get; set; }    public DateTimeOffset? DateUpdated { get; set; }}\n    ```\n    \n2.  call the endpoint and deserialize result\n    \n    ```\n    var url = \"YOUR_GROWTHBOOK_URL/api/features/YOUR_API_KEY\";var response = await client.GetAsync(url);if (response.IsSuccessStatusCode){    var content = await response.Content.ReadAsStringAsync();    var featuresResult = JsonConvert.DeserializeObject<FeaturesResult>(content);}\n    ```\n    \n3.  Construct a context and initialize GrowthBook\n    \n    ```\n    var GrowthBook = new GrowthBook.GrowthBook(    new Context {        Enabled = true,        Url = \"\",        Features = featuresResult.Features,    });\n    ```\n    \n\n#### Generic getters[​](#generic-getters \"Direct link to Generic getters\")\n\nTo make it easier to deal with Feature values, generic getter functions are provided for the following:\n\n*   Experiment:\n    *   `GetVariations<T>()`\n*   ExperimentResult:\n    *   `GetValue<T>()`\n*   Feature:\n    *   `GetDefaultValue<T>()`\n*   FeatureResult:\n    *   `GetValue<T>()`\n*   Feature Rule:\n    *   `GetVariations<T>()`\n*   GrowthBook:\n    *   `GetFeatureValue<T>(string key, T fallback)`",
    "title": "C# SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for C#",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/elixir",
    "markdown": "# Elixir SDK | GrowthBook Docs\n\nThis SDK follows the guidelines set out in [GrowthBook's documentation](https://docs.growthbook.io/lib/build-your-own), and the API is tested on conformance with the test cases from the JS SDK.\n\nTo ensure an Elixir-friendly API, the implementation deviates from the official SDK in the following ways:\n\n```\n# Create a context, which can be reused for multiple usersfeatures_config = Jason.decode!(\"\"\"{  \"features\": {    \"send-reminder\": {      \"defaultValue\": false,      \"rules\": [{ \"condition\": { \"browser\": \"chrome\" }, \"force\": true }]    },    \"add-to-cart-btn-color\": {      \"rules\": [{ \"variations\": [{ \"color\": \"red\" }, { \"color\": \"green\" }] }]    }  }}\"\"\")features = GrowthBook.Config.features_from_config(features_config)context = %GrowthBook.Context{  enabled?: true,  features: features,  attributes: %{    \"id\" => \"12345\",    \"country_code\" => \"NL\",    \"browser\" => \"chrome\"  }}# Use a feature toggleif GrowthBook.feature(context, \"send-reminder\").on? do  Logger.info(\"Sending reminder\")end# Use a feature's valuecolor = GrowthBook.feature(context, \"add-to-cart-btn-color\").value[\"color\"]Logger.info(\"Color: \" <> color)# Run an inline experimentif GrowthBook.run(context, %GrowthBook.Experiment{  key: \"checkout-v2\",  active?: true,  coverage: 1,  variations: [1, 2]}).in_experiment? do  Logger.info(\"In experiment\")end\n```",
    "title": "Elixir SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Elixir",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/java",
    "markdown": "# Java SDK | GrowthBook Docs\n\nThis supports Java applications using Java version 1.8 and higher.\n\nNew\n\nThe GrowthBook Java SDK is a brand new feature. If you experience any issues, let us know either on [Slack](https://slack.growthbook.io/) or [create an issue](https://github.com/growthbook/growthbook-sdk-java/issues).\n\n## Installation[​](#installation \"Direct link to Installation\")\n\n[![](https://jitpack.io/v/growthbook/growthbook-sdk-java.svg)](https://jitpack.io/#growthbook/growthbook-sdk-java)\n\n### Gradle[​](#gradle \"Direct link to Gradle\")\n\nTo install in a Gradle project, add Jitpack to your repositories, and then add the dependency with the latest version to your project's dependencies.\n\n*   Groovy\n*   Kotlin\n\nbuild.gradle\n\n```\nallprojects {    repositories {        maven { url 'https://jitpack.io' }    }}dependencies {    implementation 'com.github.growthbook:growthbook-sdk-java:0.5.0'}\n```\n\n### Maven[​](#maven \"Direct link to Maven\")\n\nTo install in a Maven project, add Jitpack to your repositories:\n\n```\n<repositories>    <repository>        <id>jitpack.io</id>        <url>https://jitpack.io</url>    </repository></repositories>\n```\n\nNext, add the dependency with the latest version to your project's dependencies:\n\n```\n<dependency>    <groupId>com.github.growthbook</groupId>    <artifactId>growthbook-sdk-java</artifactId>    <version>0.5.0</version></dependency>\n```\n\n## Usage[​](#usage \"Direct link to Usage\")\n\nThere are 2 steps to initializing the GrowthBook SDK:\n\n1.  Create a GrowthBook context `GBContext` with the features JSON and the user attributes\n2.  Create the `GrowthBook` SDK class with the context\n\n### GrowthBook context[​](#growthbook-context \"Direct link to GrowthBook context\")\n\nThe GrowthBook context `GBContext` can be created either by implementing the builder class, available at `GBContext.builder()`, or by using the `GBContext` constructor.\n\n| Field name | Type | Description |\n| --- | --- | --- |\n| `attributesJson` | `String` | The user attributes JSON. See [Attributes](#attributes). |\n| `featuresJson` | `String` | The features JSON served by the GrowthBook API (or equivalent). See [Features](#features). |\n| `enabled` | `Boolean` | Whether to enable the functionality of the SDK (default: `true`) |\n| `isQaMode` | `Boolean` | Whether the SDK is in QA mode. Not for production use. If true, random assignment is disabled and only explicitly forced variations are used (default: `false`) |\n| `url` | `String` | The URL of the current page. Useful when evaluating features and experiments based on the page URL. |\n| `forcedVariationsMap` | `Map<String, Integer>` | Force specific experiments to always assign a specific variation (used for QA) |\n| `trackingCallback` | `TrackingCallback` | A callback that will be invoked with every experiment evaluation where the user **is** included in the experiment. See [TrackingCallback](#tracking-callback). To subscribe to all evaluated events regardless of whether the user is in the experiment, see [Subscribing to experiment runs](#subscribing-to-experiment-runs-with-the-experimentruncallback). |\n| `featureUsageCallback` | `FeatureUsageCallback` | A callback that will be invoked every time a feature is viewed. See [FeatureUsageCallback](#feature-usage-callback) |\n\n#### Using the GBContext builder[​](#using-the-gbcontext-builder \"Direct link to Using the GBContext builder\")\n\nThe builder is the easiest to use way to construct a `GBContext`, allowing you to provide as many or few arguments as you'd like. All fields mentioned above are available via the builder.\n\n*   Java\n*   Kotlin\n\n```\n// Fetch feature definitions from the GrowthBook API// We recommend adding a caching layer in production// Get your endpoint in the Environments tab -> SDK Endpoints: https://app.growthbook.io/environmentsURI featuresEndpoint = new URI(\"https://cdn.growthbook.io/api/features/<environment_key>\");HttpRequest request = HttpRequest.newBuilder().uri(featuresEndpoint).GET().build();HttpResponse<String> response = HttpClient.newBuilder().build()    .send(request, HttpResponse.BodyHandlers.ofString());String featuresJson = new JSONObject(response.body()).get(\"features\").toString();// JSON serializable user attributesString userAttributesJson = user.toJson();// Initialize the GrowthBook SDK with the GBContextGBContext context = GBContext    .builder()    .featuresJson(featuresJson)    .attributesJson(userAttributesJson)    .build();GrowthBook growthBook = new GrowthBook(context);\n```\n\nNote\n\nThe above example uses `java.net.http.HttpClient` which, depending on your web framework, may not be the best option, in which case it is recommended to use a networking library more suitable for your implementation.\n\n#### Using the GBContext constructor[​](#using-the-gbcontext-constructor \"Direct link to Using the GBContext constructor\")\n\nYou can also use `GBContext` constructor if you prefer, which will require you to pass all arguments explicitly.\n\n*   Java\n*   Kotlin\n\n```\n// Fetch feature definitions from the GrowthBook API// We recommend adding a caching layer in production// Get your endpoint in the Environments tab -> SDK Endpoints: https://app.growthbook.io/environmentsURI featuresEndpoint = new URI(\"https://cdn.growthbook.io/api/features/<environment_key>\");HttpRequest request = HttpRequest.newBuilder().uri(featuresEndpoint).GET().build();HttpResponse<String> response = HttpClient.newBuilder().build()    .send(request, HttpResponse.BodyHandlers.ofString());String featuresJson = new JSONObject(response.body()).get(\"features\").toString();// JSON serializable user attributesString userAttributesJson = user.toJson();boolean isEnabled = true;boolean isQaMode = false;String url = null;Map<String, Integer> forcedVariations = new HashMap<>();TrackingCallback trackingCallback = new TrackingCallback() {    @Override    public <ValueType> void onTrack(Experiment<ValueType> experiment, ExperimentResult<ValueType> experimentResult) {        // TODO: Something after it's been tracked    }};// Initialize the GrowthBook SDK with the GBContextGBContext context = new GBContext(    userAttributesJson,    featuresJson,    isEnabled,    isQaMode,    url,    forcedVariations,    trackingCallback);GrowthBook growthBook = new GrowthBook(context);\n```\n\nFor complete examples, see the [Examples](#code-examples) section below.\n\n#### Features[​](#features \"Direct link to Features\")\n\nThe features JSON is equivalent to the `features` property that is returned from the SDK Connection endpoint.\n\n*   You can read more [about features here](https://docs.growthbook.io/app/features)\n*   You can see an [example features JSON here](https://docs.growthbook.io/app/api#sdk-connection-endpoints)\n\n#### Attributes[​](#attributes \"Direct link to Attributes\")\n\nAttributes are a JSON string. You can specify attributes about the current user and request. Here's an example:\n\n*   Java\n*   Kotlin\n\n```\nString userAttributes = \"{\\\"country\\\": \\\"canada\\\", \\\"id\\\": \\\"user-abc123\\\"}\";\n```\n\nIf you need to set or update attributes asynchronously, you can do so with `Context#attributesJson` or `GrowthBook#setAttributes`. This will completely overwrite the attributes object with whatever you pass in. Also, be aware that changing attributes may change the assigned feature values. This can be disorienting to users if not handled carefully.\n\n#### Tracking Callback[​](#tracking-callback \"Direct link to Tracking Callback\")\n\nAny time an experiment is run to determine the value of a feature, we may call this callback so you can record the assigned value in your event tracking or analytics system of choice.\n\n**The tracking callback is only called when the user is in the experiment**. If they are not in the experiment, this will not be called. If you'd like to subscribe to all evaluations, regardless of experiment result, see [Subscribing to experiment runs](#subscribing-to-experiment-runs-with-the-experimentruncallback).\n\n*   Java\n*   Kotlin\n\n```\nTrackingCallback trackingCallback = new TrackingCallback() {    @Override    public <ValueType> void onTrack(        Experiment<ValueType> experiment,        ExperimentResult<ValueType> experimentResult    ) {        // TODO: Something after it's been tracked    }};GBContext context = GBContext    .builder()    .featuresJson(featuresJson)    .attributesJson(userAttributesJson)    .trackingCallback(trackingCallback)    .build();\n```\n\n#### Feature usage callback[​](#feature-usage-callback \"Direct link to Feature usage callback\")\n\nAny time a feature is viewed, this callback is called with the feature key and result.\n\n*   Java\n*   Kotlin\n\n```\nString featuresJson = featuresRepository.getFeaturesJson();String userAttributesJson = user.toJson();FeatureUsageCallback featureUsageCallback = new FeatureUsageCallback() {    @Override    public <ValueType> void onFeatureUsage(String featureKey, FeatureResult<ValueType> result) {        // TODO: Something with the feature result    }};GBContext context = GBContext    .builder()    .featuresJson(featuresJson)    .featureUsageCallback(featureUsageCallback)    .attributesJson(userAttributesJson)    .build();GrowthBook growthBook = new GrowthBook(context);\n```\n\n### Using Features[​](#using-features \"Direct link to Using Features\")\n\nEvery feature has a \"value\" which is assigned to a user. This value can be any JSON data type. If a feature doesn't exist, the value will be `null`.\n\nThere are 4 main methods for evaluating features.\n\n| Method | Return type | Description |\n| --- | --- | --- |\n| **`isOn(String)`** | `Boolean` | Returns true if the value is a truthy value |\n| **`isOff(String)`** | `Boolean` | Returns true if the value is a falsy value |\n| **`getFeatureValue(String)`** | generic `T` (nullable) | Returns the value cast to the generic type. Type is inferred based on the `defaultValue` argument provided. |\n| **`evalFeature(String)`** | `FeatureResult<T>` | Returns a feature result with a value of generic type `T`. The value type needs to be specified in the generic parameter. |\n\n*   Java\n*   Kotlin\n\n```\nif (growthBook.isOn(\"dark_mode\")) {    // value is truthy}if (growthBook.isOff(\"dark_mode\")) {    // value is falsy}Float featureValue = growthBook.getFeatureValue(\"donut_price\", 5.0f);FeatureResult<Float> featureResult = growthBook.<Float>evalFeature(\"donut_price\");\n```\n\n#### isOn() / isOff()[​](#ison--isoff \"Direct link to isOn() / isOff()\")\n\nThese methods return a boolean for truthy and falsy values.\n\nOnly the following values are considered to be \"falsy\":\n\n*   `null`\n*   `false`\n*   `\"\"`\n*   `0`\n\nEverything else is considered \"truthy\", including empty arrays and objects.\n\nIf the value is \"truthy\", then `isOn()` will return true and `isOff()` will return false. If the value is \"falsy\", then the opposite values will be returned.\n\n#### getFeatureValue(featureKey, defaultValue)[​](#getfeaturevaluefeaturekey-defaultvalue \"Direct link to getFeatureValue(featureKey, defaultValue)\")\n\nThis method has a variety of overloads to help with casting values to primitive and complex types.\n\nIn short, the type of the `defaultValue` argument will determine the return type of the function.\n\n| Return type | Method | Additional Info |\n| --- | --- | --- |\n| `Boolean` | **`getFeatureValue(String featureKey, Boolean defaultValue)`** |     |\n| `Double` | **`getFeatureValue(String featureKey, Double defaultValue)`** |     |\n| `Float` | **`getFeatureValue(String featureKey, Float defaultValue)`** |     |\n| `Integer` | **`getFeatureValue(String featureKey, Integer defaultValue)`** |     |\n| `String` | **`getFeatureValue(String featureKey, String defaultValue)`** |     |\n| `<ValueType> ValueType` | **`getFeatureValue(String featureKey, ValueType defaultValue, Class<ValueType> gsonDeserializableClass)`** | Internally, the SDK uses Gson. You can pass any class that does not require a custom deserializer. |\n| `Object` | **`getFeatureValue(String featureKey, Object defaultValue)`** | Use this method if you need to cast a complex object that uses a custom deserializer, or if you use a different JSON serialization library than Gson, and cast the type yourself. |\n\n[See the Java Docs](https://growthbook.github.io/growthbook-sdk-java/growthbook/sdk/java/GrowthBook.html) for more information.\n\n[See the unit tests](https://github.com/growthbook/growthbook-sdk-java/blob/main/lib/src/test/java/growthbook/sdk/java/GrowthBookTest.java#L220) for example implementations including type casting for all above-mentioned methods.\n\n#### evalFeature(String)[​](#evalfeaturestring \"Direct link to evalFeature(String)\")\n\nThe `evalFeature` method returns a `FeatureResult<T>` object with more info about why the feature was assigned to the user. The `T` type corresponds to the value type of the feature. In the above example, `T` is `Float`.\n\n`FeatureResult<T>` It has the following getters.\n\n| Method | Return type | Description |\n| --- | --- | --- |\n| **`getValue()`** | generic `T` (nullable) | The evaluated value of the feature |\n| **`getSource()`** | `enum FeatureResultSource` (nullable) | The reason/source for the evaluated feature value. |\n| **`getRuleId()`** | `String` (nullable) | ID of the rule that was used to assign the value to the user. |\n| **`getExperiment()`** | `Experiment<T>` (nullable) | The experiment details, available only if the feature evaluates due to an experiment. |\n| **`getExperimentResult()`** | `ExperimentResult<T>` (nullable) | The experiment result details, available only if the feature evaluates due to an experiment. |\n\nAs expected in Kotlin, you can access these getters using property accessors.\n\n### Inline Experiments[​](#inline-experiments \"Direct link to Inline Experiments\")\n\nInstead of declaring all features up-front in the context and referencing them by IDs in your code, you can also just run an experiment directly. This is done with the `growthbook.run(Experiment<T>)` method.\n\n*   Java\n*   Kotlin\n\n```\nExperiment<Float> donutPriceExperiment = Experiment    .<Float>builder()    .conditionJson(\"{\\\"employee\\\": true}\")    .build();ExperimentResult<Float> donutPriceExperimentResult = growthBook.run(donutPriceExperiment);Float donutPrice = donutPriceExperimentResult.getValue();\n```\n\n#### Inline experiment return value ExperimentResult[​](#inline-experiment-return-value-experimentresult \"Direct link to Inline experiment return value ExperimentResult\")\n\nAn `ExperimentResult<T>` is returned where `T` is the generic value type for the experiment.\n\nThere's also a number of methods available.\n\n| Method | Return type | Description |\n| --- | --- | --- |\n| **`getValue()`** | generic `T` (nullable) | The evaluated value of the feature |\n| **`getVariationId()`** | `Integer` (nullable) | Index of the variation used, if applicable |\n| **`getInExperiment()`** | `Boolean` | If the user was in the experiment. This will be false if the user was excluded from being part of the experiment for any reason (e.g. failed targeting conditions). |\n| **`getHashAttribute()`** | `String` | User attribute used for hashing, defaulting to `id` if not set. |\n| **`getHashValue()`** | `String` (nullable) | The hash value used for evaluating the experiment, if applicable. |\n| **`getFeatureId()`** | `String` | The feature key/ID |\n| **`getHashUsed()`** | `Boolean` | If a hash was used to evaluate the experiment. This flag will only be true if the user was randomly assigned a variation. If the user was forced into a specific variation instead, this flag will be false. |\n\nAs expected in Kotlin, you can access these getters using property accessors.\n\n### Tracking feature usage and experiment impressions[​](#tracking-feature-usage-and-experiment-impressions \"Direct link to Tracking feature usage and experiment impressions\")\n\n#### Subscribing to experiment runs with the ExperimentRunCallback[​](#subscribing-to-experiment-runs-with-the-experimentruncallback \"Direct link to Subscribing to experiment runs with the ExperimentRunCallback\")\n\nYou can subscribe to experiment run evaluations using the `ExperimentRunCallback`.\n\n*   Java\n*   Kotlin\n\n```\nString featuresJson = featuresRepository.getFeaturesJson();String userAttributesJson = user.toJson();ExperimentRunCallback experimentRunCallback = new ExperimentRunCallback() {    @Override    public void onRun(ExperimentResult experimentResult) {        // TODO: something with the experiment result    }};GBContext context = GBContext    .builder()    .featuresJson(featuresJson)    .attributesJson(userAttributesJson)    .build();GrowthBook growthBook = new GrowthBook(context);growthBook.subscribe(experimentRunCallback);\n```\n\nEvery time an experiment is evaluated when calling `growthBook.run(Experiment)`, the callbacks will be called.\n\nYou can subscribe with as many callbacks as you like:\n\n*   Java\n*   Kotlin\n\n```\nGrowthBook growthBook = new GrowthBook(context);growthBook.subscribe(experimentRunCallback1);growthBook.subscribe(experimentRunCallback2);growthBook.subscribe(experimentRunCallback3);\n```\n\n**The experiment run callback is called for every experiment run, regardless of experiment result**. If you would like to subscribe only to evaluations where the user falls into an experiment, see [TrackingCallback](#tracking-callback).\n\n#### Subscribing to feature usage events with the FeatureUsageCallback[​](#subscribing-to-feature-usage-events-with-the-featureusagecallback \"Direct link to Subscribing to feature usage events with the FeatureUsageCallback\")\n\nYou can subscribe to feature usage events by providing an implementation of the `FeatureUsageCallback` interface to the `GBContext`.\n\n*   Java\n*   Kotlin\n\n```\nString featuresJson = featuresRepository.getFeaturesJson();String userAttributesJson = user.toJson();FeatureUsageCallback featureUsageCallback = new FeatureUsageCallback() {    @Override    public <ValueType> void onFeatureUsage(String featureKey, FeatureResult<ValueType> result) {        // TODO: Something with the feature result    }};GBContext context = GBContext    .builder()    .featuresJson(featuresJson)    .featureUsageCallback(featureUsageCallback)    .attributesJson(userAttributesJson)    .build();GrowthBook growthBook = new GrowthBook(context);\n```\n\n### Working with Encrypted features[​](#working-with-encrypted-features \"Direct link to Working with Encrypted features\")\n\nAs of version 0.3.0, the Java SDK supports decrypting encrypted features. You can learn more about [SDK Connection Endpoint Encryption](https://docs.growthbook.io/app/api#encryption).\n\nThe main difference is you create a `GBContext` by passing an encryption key (`.encryptionKey()` when using the builder) and using the encrypted payload as the features JSON (`.featuresJson()` for the builder).\n\n*   Java\n*   Kotlin\n\n```\n// Fetch feature definitions from the GrowthBook API// We recommend adding a caching layer in production// Get your endpoint in the Environments tab -> SDK Endpoints: https://app.growthbook.io/environmentsURI featuresEndpoint = new URI(\"https://cdn.growthbook.io/api/features/<environment_key>\");HttpRequest request = HttpRequest.newBuilder().uri(featuresEndpoint).GET().build();HttpResponse<String> response = HttpClient.newBuilder().build()    .send(request, HttpResponse.BodyHandlers.ofString());String encryptedFeaturesJson = new JSONObject(response.body()).get(\"encryptedFeatures\").toString();// JSON serializable user attributesString userAttributesJson = user.toJson();// You can store your encryption key as an environment variable rather than hardcoding in plain text in your codebaseString encryptionKey = \"<key-for-decrypting>\";// Initialize the GrowthBook SDK with the GBContext and the encryption keyGBContext context = GBContext    .builder()    .featuresJson(encryptedFeaturesJson)    .encryptionKey(encryptionKey)    .attributesJson(userAttributesJson)    .build();GrowthBook growthBook = new GrowthBook(context);\n```\n\n### Fetching, Cacheing, and Refreshing features with GBFeaturesRepository[​](#fetching-cacheing-and-refreshing-features-with-gbfeaturesrepository \"Direct link to Fetching, Cacheing, and Refreshing features with GBFeaturesRepository\")\n\nAs of version 0.4.0, the Java SDK provides an optional `GBFeaturesRepository` class which will manage networking for you in the following ways:\n\n*   Fetching features from the SDK endpoint when `initialize()` is called\n*   Decrypting encrypted features when provided with the client key, e.g. `.builder().encryptionKey(clientKey)`\n*   Cacheing features (in-memory)\n*   Refreshing features\n\nIf you wish to manage fetching, refreshing, and cacheing features on your own, you can choose to not implement this class.\n\nRecommendation\n\nThis class should be implemented as a singleton class as it includes caching and refreshing functionality.\n\nIf you have more than one SDK endpoint you'd like to implement, you can extend the `GBFeaturesRepository` class with your own class to make it easier to work with dependency injection frameworks. Each of these instances should be singletons.\n\n#### Fetching the features[​](#fetching-the-features \"Direct link to Fetching the features\")\n\nYou will need to create a singleton instance of the `GBFeaturesRepository` class either by implementing its `.builder()` or by using its constructor.\n\nThen, you would call `myGbFeaturesRepositoryInstance.initialize()` in order to make the initial (blocking) request to fetch the features. Then, you would call `myGbFeaturesRepositoryInstance.getFeaturesJson()` and provided that to the `GBContext` initialization.\n\n*   Java\n*   Kotlin\n\n```\nGBFeaturesRepository featuresRepository = GBFeaturesRepository    .builder()    .apiHost(\"https://cdn.growthbook.io\")    .clientKey(\"<environment_key>\") // replace with your client key    .encryptionKey(\"<client-key-for-decrypting>\") // optional, nullable    .refreshStrategy(FeatureRefreshStrategy.SERVER_SENT_EVENTS) // optional; options: STALE_WHILE_REVALIDATE, SERVER_SENT_EVENTS (default: STALE_WHILE_REVALIDATE)    .build();// Optional callback for getting updates when features are refreshedfeaturesRepository.onFeaturesRefresh(new FeatureRefreshCallback() {    @Override    public void onRefresh(String featuresJson) {        System.out.println(\"Features have been refreshed\");        System.out.println(featuresJson);    }});try {    featuresRepository.initialize();} catch (FeatureFetchException e) {    // TODO: handle the exception    e.printStackTrace();}// Initialize the GrowthBook SDK with the GBContext and featuresGBContext context = GBContext    .builder()    .featuresJson(featuresRepository.getFeaturesJson())    .attributesJson(userAttributesJson)    .build();GrowthBook growthBook = new GrowthBook(context);\n```\n\nFor more references, see the [Examples](#code-examples) below.\n\n#### Cacheing and refreshing behaviour[​](#cacheing-and-refreshing-behaviour \"Direct link to Cacheing and refreshing behaviour\")\n\nAs of version 0.9.0, there are 2 refresh strategies available.\n\n##### Stale While Revalidate[​](#stale-while-revalidate \"Direct link to Stale While Revalidate\")\n\nThis is the default strategy but can be explicitly stated by passing `FeatureRefreshStrategy.STALE_WHILE_REVALIDATE` as the refresh strategy option to the `GBFeaturesRepository` builder or constructor.\n\nThe `GBFeaturesRepository` will automatically refresh the features when the features become stale. Features are considered stale every 60 seconds. This amount is configurable with the `ttlSeconds` option.\n\nWhen you fetch features and they are considered stale, the stale features are returned from the `getFeaturesJson()` method and a network call to refresh the features is enqueued asynchronously. When that request succeeds, the features are updated with the newest features, and the next call to `getFeaturesJson()` will return the refreshed features.\n\n##### Server-Sent Events[​](#server-sent-events \"Direct link to Server-Sent Events\")\n\nThis is a new strategy that can be enabled by passing `FeatureRefreshStrategy.SERVER_SENT_EVENTS` as the refresh strategy option to the `GBFeaturesRepository` builder or constructor.\n\nIf you're using [GrowthBook Cloud](https://app.growthbook.io/) , this is ready for you to use. If you are self-hosting, you will need to set up the [GrowthBook Proxy](https://docs.growthbook.io/self-host/proxy) to enable it.\n\n## Overriding Feature Values[​](#overriding-feature-values \"Direct link to Overriding Feature Values\")\n\nThe Java SDK allows you to override feature values and experiments using the URL.\n\n### Force Experiment Variations[​](#force-experiment-variations \"Direct link to Force Experiment Variations\")\n\nYou can force an experiment variation by passing the experiment key and variation index as query parameters in the URL you set on the `GBContext`. For example, if you add `?my-experiment-id=2` to the URL, users will be forced into the variation at index 2 in the variations list when evaluating the experiment with key `my-experiment-id`.\n\n### Force Feature Values via the URL[​](#force-feature-values-via-the-url \"Direct link to Force Feature Values via the URL\")\n\nYou can force a value for a feature by passing the key, prefixed by `gb~`, and the URI-encoded value in the URL's query parameters. You must also set `allowUrlOverrides` to true when building your `GBContext` in order to enable this feature as it is not enabled by default.\n\n```\nGBContext context = GBContext    .builder()    .url(\"http://localhost:8080/url-feature-force?gb~dark_mode=true&gb~donut_price=3.33&gb~banner_text=Hello%2C%20everyone!%20I%20hope%20you%20are%20all%20doing%20well!\")    .allowUrlOverrides(true)    .build();\n```\n\nThe above code sample sets the following:\n\n*   `dark_mode`: `true`\n*   `banner_text`: `\"Hello, everyone! I hope you are all doing well!\"`\n*   `donut_price`: `3.33`\n\n#### Supported types[​](#supported-types \"Direct link to Supported types\")\n\n| Type | Value |\n| --- | --- |\n| `String` | A URI-encoded string value |\n| `Float` | A float value, e.g. `3.33` |\n| `Double` | A double value, e.g. `3.33` |\n| `Integer` | An integer value, e.g. `1337` |\n| `Boolean` | A boolean value, e.g. `true` or `false`. You can also represent boolean values with on/off state as `on` or `off` or binary values `1` or `0`. |\n| JSON as `Gson`\\-deserializable | A class that can be deserialized using Gson and that does not have any dependencies on custom type adapters. |\n| JSON as `String` | A URI-encoded string value that should be a valid JSON string that you can deserialize with your own JSON deserialization implementation. |\n\nThe value passed in the URL is cast at runtime based on the generic type argument passed in when evaluating the feature. This means that when you call `<ValueType>getFeatureValue()`, what you pass into the URL must successfully cast as `ValueType` otherwise the value in the URL will be ignored.\n\nAll keys must be prefixed with `gb~`.\n\n## Using with Proguard and R8[​](#using-with-proguard-and-r8 \"Direct link to Using with Proguard and R8\")\n\nMany Android projects use code-shrinking and obfuscation tools like Proguard and R8 in production.\n\nIf you are experiencing unexpected feature evaluation results with your release Android builds that do not occur in your debug builds, it's most likely related to this.\n\nYou will need to add the following to your `proguard-rules.pro` file to ensure that all of the GrowthBook SDK classes are kept so that your features are evaluated properly in projects that use Proguard and R8:\n\n```\n# Growthbook Java SDK classes-keep class growthbook.sdk.java.** { *; }\n```\n\n## Code Examples[​](#code-examples \"Direct link to Code Examples\")\n\n*   [JVM with Spring Web example](https://github.com/growthbook/examples/tree/main/jvm-spring-web)\n*   [JVM example in Kotlin with Ktor](https://github.com/growthbook/examples/tree/main/jvm-kotlin-ktor-example)\n*   [Android Java example](https://github.com/growthbook/examples/tree/main/android-example)\n\n## Further Reading[​](#further-reading \"Direct link to Further Reading\")\n\n*   [JavaDoc class documentation](https://growthbook.github.io/growthbook-sdk-java/)",
    "title": "Java SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Java",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/swift",
    "markdown": "# Swift SDK | GrowthBook Docs\n\n## Swift (iOS)\n\nThis SDK supports the following platforms and versions:\n\n*   iOS 12 and above\n*   Apple TvOS 12 and above\n*   Apple WatchOS 5.0 and above\n\n## Installation[​](#installation \"Direct link to Installation\")\n\n### CocoaPods[​](#cocoapods \"Direct link to CocoaPods\")\n\nAdd the following to your podfile:\n\n```\nsource 'https://github.com/CocoaPods/Specs.git'target 'MyApp' do  pod 'GrowthBook-IOS'end\n```\n\nThen, install:\n\n### Swift Package Manager (SPM)[​](#swift-package-manager-spm \"Direct link to Swift Package Manager (SPM)\")\n\nAdd GrowthBook to your `Package.swift` file:\n\n```\ndependencies: [  .package(url: \"https://github.com/growthbook/growthbook-swift.git\")]\n```\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\n```\n// First, create a GrowthBook instance using your unique features endpointvar gb: GrowthBookSDK = GrowthBookBuilder(  // Your GrowthBook feature flag endpoint  url: \"https://cdn.growthbook.io/api/features/sdk-abc123\").initializer()// Then, add targeting attributes so you can control the release of your features// TODO: Replace with your real targeting attributesvar attrs = [  \"id\": \"12345\",  \"deviceId\": \"abc123\",  \"loggedIn\": true,  \"country\": \"US\"]gb.setAttributes(attrs)// Finally, start feature flagging!// Boolean (On/Off) Feature Flagif (gb.isOn(\"feature-usage-code\")) {  // Feature is enabled!}// String/Number/JSON Feature Flag with a fallbackvar value = gb.getFeatureValue(\"button-color\", \"blue\")print(value)\n```\n\n## Loading Features[​](#loading-features \"Direct link to Loading Features\")\n\nIn order for the GrowthBook SDK to work, it needs to have feature definitions from the GrowthBook API. There are 2 ways to get this data into the SDK.\n\n### Built-in Fetching and Caching[​](#built-in-fetching-and-caching \"Direct link to Built-in Fetching and Caching\")\n\nIf you pass a `url` into GrowthBookBuilder, it will handle the network requests, caching, retry logic, etc. for you automatically. If your feature payload is encrypted, you can also pass in an `encryptionKey` and it will decrypt feature flags automatically.\n\n```\nvar gb: GrowthBookSDK = GrowthBookBuilder(  // Your feature flag endpoint  url: \"https://cdn.growthbook.io/api/features/sdk-abc123\",  // View your encryption key on the Features → SDKs page  encryptionKey: \"abcdef98765\").initializer()\n```\n\nIf you want to refresh the features at any time (e.g. when a navigation event occurs), you can call `gb.refreshCache()`.\n\n### Custom Integration[​](#custom-integration \"Direct link to Custom Integration\")\n\nIf you prefer to handle the network and caching logic yourself, you can instead pass in a features JSON object directly. For example, you might store features in Postgres on your back-end and send it down to your app as part of an initial bootstrap API call.\n\n```\nvar gb: GrowthBookSDK = GrowthBookBuilder(  features: [    \"feature1\": Feature(defaultValue: true)  ]).initializer()\n```\n\n## Experimentation (A/B Testing)[​](#experimentation-ab-testing \"Direct link to Experimentation (A/B Testing)\")\n\nIn order to run A/B tests on your feature flags, you need to set up a tracking callback function. This is called every time a user is put into an experiment and can be used to track the exposure event in your analytics system (Segment, Mixpanel, GA, etc.).\n\n```\nvar gb: GrowthBookSDK = GrowthBookBuilder(  // Your feature flag endpoint  url: \"https://cdn.growthbook.io/api/features/sdk-abc123\",  // Called whenever someone is put into an experiment  trackingCallback: { experiment, experimentResult in    // TODO: Track in your real analytics system    print(\"Viewed Experiment\")    print(\"Experiment Id: \", experiment.key)    print(\"Variation Id: \", experimentResult.variationId)  }).initializer()\n```\n\n## Reference[​](#reference \"Direct link to Reference\")\n\nView detailed docs on the [GitHub Repo](https://github.com/growthbook/growthbook-swift)",
    "title": "Swift SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Swift - iOS",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/flutter",
    "markdown": "# Flutter SDK | GrowthBook Docs\n\nThis SDK supports the following versions:\n\n*   **Android version 21 & above**\n*   **iOS version 12 & Above**\n*   **Apple TvOS version 13 & Above**\n*   **Apple WatchOS version 7 & Above**\n\n## Installation[​](#installation \"Direct link to Installation\")\n\nAdd this to your `pubspec.yaml` file\n\n```\ngrowthbook_sdk_flutter: ^1.0.0\n```\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\nTo create a GrowthBook SDK instance, use `GBSDKBuilderApp`. Then, you can evaluate feature flags or run experiments.\n\n```\n// User attributes for targeting and assigning users to experiment variationsval attrs = HashMap<String, Any>()attrs.put(\"id\", \"123\")attrs.put(\"env\", \"dev\")attrs.put(\"betaUser\", true)final GrowthBookSDK sdkInstance = GBSDKBuilderApp(  apiKey: \"<API_KEY>\",  attributes: {    attrs  },  growthBookTrackingCallBack: (gbExperiment, gbExperimentResult) {},  hostURL: '<GrowthBook_URL>',).initialize();if (gb.feature(\"my-feature\").on) {  // Feature is enabled!}\n```\n\n## Using Features[​](#using-features \"Direct link to Using Features\")\n\nThe `feature` method takes a String feature name and returns a `GBFeatureResult` object with a few useful properties:\n\n*   **value** (`dynamic`) - The assigned value of the feature\n*   **on** (`bool`) - The value cast to a boolean\n*   **off** (`bool`) - The value cast to a boolean and then negated\n*   **source** (`String`) - Why the value was assigned to the user. One of \"unknownFeature\", \"defaultValue\", \"force\", or \"experiment\"\n\nWhen the source is \"experiment\", there are 2 additional properties that tell you which experiment was used and more details about the result of the experiment:\n\n*   **experiment** (`GBExperiment`)\n*   **experimentResult** (`GBExperimentResult`)\n\nHere are some examples:\n\n```\nGBFeatureResult feature = gb.feature(\"my-feature\")// Do something if feature is truthyif (feature.on) { }// Do something if feature is falsyif (feature.off) { }// Print the actual value of the feature// (depending on the feature, might be a string, number, boolean, etc.)Println(feature.value)// Print the experiment id used to assign the feature valueif (feature.source == \"experiment\") {  Println(feature.experiment.key)}\n```\n\n## Running Inline Experiments[​](#running-inline-experiments \"Direct link to Running Inline Experiments\")\n\nInstead of just using features defined in the GrowthBook API, you can run an experiment directly. This is done with the `run` method, which takes a `GBExperiment` object as an argument and returns a `GBExperimentResult` object:\n\n```\nvar exp = GBExperiment()exp.key = \"my-experiment\"exp.variations = List.of(\"control\", \"variation\")var result = gb.run(exp)// Either \"control\" or \"variation\"Println(result.value)\n```\n\nThe `GBExperiment` class has two required properties - `key` and `variations`. There are also a number of optional properties:\n\n*   **key** (`String`) - The unique identifier for this experiment\n*   **variations** (`dynamic[]`) - Array of variations to decide between\n*   **weights** (`double[]`) - How to weight traffic between variations. Must add to 1.\n*   **active** (`bool`) - If set to false, always return the control (first variation)\n*   **coverage** (`double`) - What percent of users should be included in the experiment (between 0 and 1, inclusive)\n*   **condition** (`GBCondition`) - Optional targeting condition\n*   **namespace** (`[String, int, int]`) - Adds the experiment to a namespace\n*   **force** (`int`) - All users included in the experiment will be forced into the specific variation index\n*   **hashAttribute** (`String`) - What user attribute should be used to assign variations (defaults to `id`)\n\nThe `GBExperimentResult` object returns the following properties:\n\n*   **inExperiment** (`bool`)\n*   **variationId** (`int`) - The array index of the assigned variation\n*   **value** (`dynamic`) - The value of the assigned variation\n*   **hashAttribute** (`String`) - The user attribute used to assign a variation\n*   **hashValue** (`String`) - The value of the attribute used to assign a variation\n\n## More Documentation[​](#more-documentation \"Direct link to More Documentation\")\n\nThe GitHub repo for this SDK has more detailed class and method documentation - [https://github.com/growthbook/growthbook-flutter](https://github.com/growthbook/growthbook-flutter)",
    "title": "Flutter SDK | GrowthBook Docs",
    "description": "Flutter SDK for GrowthBook",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/tools/cli",
    "markdown": "# GrowthBook Command Line Interface (CLI)\n\nThe GrowthBook command-line interface (CLI) is a tool for working with the GrowthBook A/B testing, feature flagging, and experimentation platform.\n\nRequires Node.js version 16+.\n\nNew\n\nThe GrowthBook CLI is a brand new tool. If you experience any issues, let us know either on [Slack](https://slack.growthbook.io/) or [create an issue](https://github.com/growthbook/growthbook-cli/issues).\n\n## CLI Features[​](#cli-features \"Direct link to CLI Features\")\n\n### Generating Types[​](#generating-types \"Direct link to Generating Types\")\n\nThe GrowthBook CLI enables you to generate TypeScript types for working with the SDK.\n\nRun `growthbook features generate-types --help` for more info.\n\nSee the [JavaScript SDK documentation](https://docs.growthbook.io/lib/js#strict-typing) for more information on working with typed features.\n\n### Profile management[​](#profile-management \"Direct link to Profile management\")\n\nIf you have multiple GrowthBook organizations or accounts, you can easily switch between profiles when running individual commands.\n\nRun `growthbook auth --help` for more info.\n\n## Usage[​](#usage \"Direct link to Usage\")\n\n### Installing the CLI[​](#installing-the-cli \"Direct link to Installing the CLI\")\n\nYou can install the CLI to your project with the following command:\n\nnpm install growthbook --save\n\nOr if you use `yarn` you can do:\n\nyarn add growthbook\n\nYou can also install it globally so you can use it with multiple projects and outside of projects:\n\nnpm install -g growthbook\n\nThe `growthbook` executable should now be available in your project. You should now be able to run commands, e.g.:\n\ngrowthbook --help\n\n### Adding your API secret[​](#adding-your-api-secret \"Direct link to Adding your API secret\")\n\nBefore using the GrowthBook CLI you will need to authenticate yourself. You will need to get an API key, which you can do [here](https://app.growthbook.io/settings/keys) .\n\nNext, use the `growthbook auth login --apiKey XXX` command to set your token for the default profile.\n\nRun `growthbook auth login --help` for more info and options.\n\n### Generating Types[​](#generating-types-1 \"Direct link to Generating Types\")\n\nYou can also add it to your `package.json` file of the project that will use the types, e.g.:\n\n```\n{  \"scripts\": {    \"type-gen\": \"growthbook features generate-types --output ./types\"  }}\n```\n\nIt should now be available for use when you run `npm run type-gen` or `yarn type-gen`.\n\n### Usage on CI/CD[​](#usage-on-cicd \"Direct link to Usage on CI/CD\")\n\nIf you'd like to use the CLI in continuous integration/continuous deployment environments, instead of running the `growthbook auth login` command, we recommend creating the following file at `~/.growthbook/config.toml` with your secret and API base URL:\n\n```\n[default]growthbook_secret = \"secret_abc123\"api_base_url = \"https://api.growthbook.io\" # replace this with your API URL if self-hosted\n```\n\nYou can also store multiple profiles and refer to them with the `--profile` flag in supported commands:\n\n```\n[default]growthbook_secret = \"secret_abc123\"api_base_url = \"https://api.growthbook.io\"[acme_donuts]growthbook_secret = \"secret_xyz987\"api_base_url = \"http://localhost:3100\"\n```\n\n### Detailed Command Usage[​](#detailed-command-usage \"Direct link to Detailed Command Usage\")\n\nSee the generated [GrowthBook CLI command documentation on Github](https://github.com/growthbook/growthbook-cli#commands) .\n\n### Examples[​](#examples \"Direct link to Examples\")\n\n*   [Example implementation of a TypeScript project that uses the GrowthBook CLI](https://github.com/growthbook/examples/tree/main/vanilla-typescript)",
    "title": "GrowthBook Command Line Interface (CLI) | GrowthBook Docs",
    "description": "The GrowthBook command-line interface (CLI) for working with the GrowthBook A/B testing, feature flagging, and experimentation platform",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/react-native",
    "markdown": "# React Native SDK | GrowthBook Docs\n\nThis is a thin wrapper on top of the [Javascript Library](https://docs.growthbook.io/lib/js), so you might want to view those docs first to familiarize yourself with the basic classes and methods.\n\n## Installation[​](#installation \"Direct link to Installation\")\n\nInstall with a package manager\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save @growthbook/growthbook-react\n```\n\n## Quick Usage[​](#quick-usage \"Direct link to Quick Usage\")\n\n### Step 1: Configure your app[​](#step-1-configure-your-app \"Direct link to Step 1: Configure your app\")\n\n```\nimport { useEffect } from \"react\";import { GrowthBook, GrowthBookProvider } from \"@growthbook/growthbook-react\";// Create a GrowthBook instanceconst gb = new GrowthBook({  apiHost: \"https://cdn.growthbook.io\",  clientKey: \"sdk-abc123\",  // Only required for A/B testing  // Called every time a user is put into an experiment  trackingCallback: (experiment, result) => {    console.log(\"Experiment Viewed\", {      experimentId: experiment.key,      variationId: result.key,    });  },});gb.init()export default function App() {  useEffect(() => {    // TODO: Set user attributes for targeting    gb.setAttributes({      id: user.id,      company: user.company,    });  }, [user])  return (    <GrowthBookProvider growthbook={gb}>      <OtherComponent />    </GrowthBookProvider>  );}\n```\n\n### Step 2: Start feature flagging![​](#step-2-start-feature-flagging \"Direct link to Step 2: Start feature flagging!\")\n\nThere are a few ways to use feature flags in GrowthBook:\n\n#### Feature Hooks[​](#feature-hooks \"Direct link to Feature Hooks\")\n\n```\nimport { useFeatureValue, useFeatureIsOn } from \"@growthbook/growthbook-react\";export default function OtherComponent() {  // Boolean on/off features  const newLogin = useFeatureIsOn(\"new-login-form\");  // String/Number/JSON features with a fallback value  const buttonColor = useFeatureValue(\"login-button-color\", \"blue\");  if (newLogin) {    return <NewLogin color={buttonColor} />;  } else {    return <Login color={buttonColor} />;  }}\n```\n\n#### Feature Wrapper Components[​](#feature-wrapper-components \"Direct link to Feature Wrapper Components\")\n\n```\nimport { IfFeatureEnabled, FeatureString } from \"@growthbook/growthbook-react\";export default function OtherComponent() {  return (    <View>      <Text style={heading}>        <FeatureString feature=\"app-title\" default=\"My App\"/>      </Text>      <IfFeatureEnabled feature=\"welcome-message\">        <Text>Welcome to our app!</Text>      </IfFeatureEnabled>    </View>  );}\n```\n\n#### useGrowthBook hook[​](#usegrowthbook-hook \"Direct link to useGrowthBook hook\")\n\nIf you need low-level access to the GrowthBook instance for any reason, you can use the `useGrowthBook` hook.\n\nOne example is updating targeting attributes when a user logs in:\n\n```\nimport { useGrowthBook } from \"@growthbook/growthbook-react\";export default function Auth() {  const growthbook = useGrowthBook();  const user = useUser();  useEffect(() => {    if (!user) return;    growthbook.setAttributes({      loggedIn: true,      id: user.id,      company: user.company,      isPro: user.plan === \"pro\"    })  }, [user, growthbook])  ...}\n```\n\n## Loading Features[​](#loading-features \"Direct link to Loading Features\")\n\nIn order for the GrowthBook SDK to work, it needs to have feature definitions from the GrowthBook API. There are 2 ways to get this data into the SDK.\n\n### Built-in Fetching and Caching[​](#built-in-fetching-and-caching \"Direct link to Built-in Fetching and Caching\")\n\nIf you pass an `apiHost` and `clientKey` into the GrowthBook constructor, it will handle the network requests, caching, retry logic, etc. for you automatically. If your feature payload is encrypted, you can also pass in a `decryptionKey`.\n\n```\nconst gb = new GrowthBook({  apiHost: \"https://cdn.growthbook.io\",  clientKey: \"sdk-abc123\",});await gb.init({  // If the network request takes longer than this (in milliseconds), continue  // Default: `0` (no timeout)  timeout: 2000,})\n```\n\nUntil features are loaded, all features will evaluate to `null`. If you're ok with a potential flicker in your application (features going from `null` to their real value), you can call `init` without awaiting the result.\n\nIf you want to refresh the features at any time (e.g. when a navigation event occurs), you can call `gb.refreshFeatures()`.\n\n#### Error Handling[​](#error-handling \"Direct link to Error Handling\")\n\nIn the case of network issues, the `init` call will not throw an error. Instead, it will stay in the default state where every feature evaluates to `null`.\n\nYou can still get access to the error if needed:\n\n```\nconst res = await gb.init({  timeout: 1000});console.log(res);\n```\n\nThe return value has 3 properties:\n\n*   **status** - `true` if the GrowthBook instance was populated with features/experiments. Otherwise `false`\n*   **source** - Where this result came from. One of the following values: `network`, `cache`, `init`, `error`, or `timeout`\n*   **error** - If status is `false`, this will contain an `Error` object with more details about the error\n\n### Custom Integration[​](#custom-integration \"Direct link to Custom Integration\")\n\nIf you prefer to handle the network and caching logic yourself, you can pass in a full JSON \"payload\" directly into the SDK. For example, you might store features in Postgres and send it down as part of your app's initial bootstrap API call.\n\n```\nawait gb.init({  payload: {    features: {      \"feature-1\": {...},      \"feature-2\": {...},      \"another-feature\": {...},    }  }})\n```\n\nThe data structure for \"payload\" is exactly the same as what is returned by the GrowthBook SDK endpoints and webhooks.\n\nYou can update the payload at any time by calling `setPayload(newPayloadJSON)`.\n\nNote: you don't need to specify `clientKey` or `apiHost` on your GrowthBook instance unless you want to enable streaming (see below) or call `refreshFeatures()` later.\n\n#### Synchronous Init[​](#synchronous-init \"Direct link to Synchronous Init\")\n\nThere is a alternate synchronous version of init named `initSync`, which can be especially useful in SSR to prevent hydration mismatches. There are some restrictions/differences:\n\n*   You MUST pass in `payload`\n*   The `payload` MUST NOT have encrypted features or experiments\n*   If you use sticky bucketing, you MUST pass `stickyBucketAssignmentDocs` into your GrowthBook constructor\n*   The return value is the GrowthBook instance to enable easy method chaining\n\n## Waiting for Features to Load[​](#waiting-for-features-to-load \"Direct link to Waiting for Features to Load\")\n\nThere is a helper component `<FeaturesReady>` that lets you render a fallback component until features are done loading. This works for both built-in fetching and custom integrations.\n\n```\n<FeaturesReady timeout={500} fallback={<LoadingSpinner/>}>  <ComponentThatUsesFeatures/></FeaturesReady>\n```\n\n*   `timeout` is the max time you want to wait for features to load (in ms). The default is `0` (no timeout).\n*   `fallback` is the component you want to display before features are loaded. The default is `null`.\n\nIf you want more control, you can use the `useGrowthBook()` hook and the `ready` flag:\n\n```\nconst gb = useGrowthBook();if (gb.ready) {  // Do something}\n```\n\n## Streaming Updates[​](#streaming-updates \"Direct link to Streaming Updates\")\n\nThe GrowthBook SDK supports streaming with Server-Sent Events (SSE). When enabled, changes to features within GrowthBook will be streamed to the SDK in realtime as they are published. This is only supported on GrowthBook Cloud or if running a GrowthBook Proxy Server.\n\nReact Native does not support SSE out-of-the-box, but there is a small helper library you can install:\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save react-native-sse\n```\n\nThe, tell GrowthBook to use this polyfill:\n\n```\nimport { setPolyfills } from \"@growthbook/growthbook\";import EventSource from \"react-native-sse\";// Configure GrowthBook to use the eventsource librarysetPolyfills({  EventSource: EventSource});\n```\n\nAnd finally, you can simply pass `streaming: true` into your init calls:\n\n```\ngb.init({  streaming: true,})\n```\n\n## Remote Evaluation[​](#remote-evaluation \"Direct link to Remote Evaluation\")\n\nThe React Native SDK may be run in Remote Evaluation mode. This mode brings the security benefits of a backend SDK to mobile by evaluating feature flags exclusively on a private server. Using Remote Evaluation ensures that any sensitive information within targeting rules or unused feature variations are never seen by the client.\n\nYou must enable Remote Evaluation in your SDK Connection settings. Cloud customers are also required to self-host a GrowthBook Proxy Server or custom remote evaluation backend.\n\nTo use Remote Evaluation, add the `remoteEval: true` property to your SDK instance. A new evaluation API call will be made any time a user attribute or other dependency changes. You may optionally limit these API calls to specific attribute changes by setting the `cacheKeyAttributes` property (an array of attribute names that, when changed, trigger a new evaluation call).\n\n```\nconst gb = new GrowthBook({  apiHost: \"https://gb-proxy.mydomain.io/\",  clientKey: \"sdk-abc123\",  // Enable remote evaluation  remoteEval: true,  // Optional: only trigger a new evaluation call when the `id` and `email` attribute changes  cacheKeyAttributes: [\"id\", \"email\"],});\n```\n\nnote\n\nIf you would like to implement Sticky Bucketing while using Remote Evaluation, you must configure your remote evaluation backend to support Sticky Bucketing. In the case of the GrowthBook Proxy Server, this means implementing a Redis database for sticky bucketing use. You will not need to provide a StickyBucketService instance to the client side SDK.\n\n## Caching[​](#caching \"Direct link to Caching\")\n\nThe React Native SDK has 2 caching layers:\n\n1.  In-memory cache (enabled by default)\n2.  Persistent localStorage cache (disabled by default, requires configuration)\n\n### Configuring Local Storage[​](#configuring-local-storage \"Direct link to Configuring Local Storage\")\n\nIn order to use persistent storage, you must provide a polyfill with the same method signature as browser's localStorage.\n\nHere's an example using AsyncStorage\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save @react-native-async-storage/async-storage\n```\n\n```\nimport AsyncStorage from '@react-native-async-storage/async-storage';import { setPolyfills } from \"@growthbook/growthbook\";setPolyfills({  localStorage: {    // Example using Redis    getItem: (key) => JSON.parse(AsyncStorage.getItem(key) || \"null\")    setItem: (key, value) => AsyncStorage.setItem(key, JSON.stringify(value))  }});\n```\n\n### Cache Settings[​](#cache-settings \"Direct link to Cache Settings\")\n\nThere are a number of cache settings you can configure within GrowthBook. This must be done BEFORE creating a GrowthBook instance.\n\nBelow are all of the default values. You can call `configureCache` with a subset of these fields and the rest will keep their default values.\n\n```\nimport { configureCache } from \"@growthbook/growthbook\";configureCache({  // The localStorage key the cache will be stored under  cacheKey: \"gbFeaturesCache\",  // Consider features stale after this much time (60 seconds default)  staleTTL: 1000 * 60,  // Cached features older than this will be ignored (24 hours default)  maxAge: 1000 * 60 * 60 * 24,  // For Remote Eval only - limit the number of cache entries (~1 entry per user)  maxEntries: 10,  // Set to `true` to completely disable both in-memory and persistent caching  disableCache: false,})\n```\n\n## Experimentation (A/B Testing)[​](#experimentation-ab-testing \"Direct link to Experimentation (A/B Testing)\")\n\nIn order to run A/B tests, you need to set up a tracking callback function. This is called every time a user is put into an experiment and can be used to track the exposure event in your analytics system (Segment, Mixpanel, GA, etc.).\n\n```\nconst gb = new GrowthBook({  apiHost: \"https://cdn.growthbook.io\",  clientKey: \"sdk-abc123\",  trackingCallback: (experiment, result) => {    // Example using Segment    analytics.track(\"Experiment Viewed\", {      experimentId: experiment.key,      variationId: result.key,    });  },});\n```\n\nThis same tracking callback is used for both feature flag experiments and Visual Editor experiments.\n\n### Feature Flag Experiments[​](#feature-flag-experiments \"Direct link to Feature Flag Experiments\")\n\nThere is nothing special you have to do for feature flag experiments. Just evaluate the feature flag like you would normally do. If the user is put into an experiment as part of the feature flag, it will call the `trackingCallback` automatically in the background.\n\n```\n// If this has an active experiment and the user is included,// it will call trackingCallback automaticallyuseFeatureIsOn(\"new-signup-form\")\n```\n\nIf the experiment came from a feature rule, `result.featureId` in the trackingCallback will contain the feature id, which may be useful for tracking/logging purposes.\n\n### Visual Editor Experiments[​](#visual-editor-experiments \"Direct link to Visual Editor Experiments\")\n\nVisual Editor experiments are not supported in React Native at this time.\n\n### URL Redirect Experiments[​](#url-redirect-experiments \"Direct link to URL Redirect Experiments\")\n\nURL Redirect experiments are no supported in React Native at this time.\n\n### Sticky Bucketing[​](#sticky-bucketing \"Direct link to Sticky Bucketing\")\n\nSticky bucketing ensures that users see the same experiment variant, even when user session, user login status, or experiment parameters change. See the [Sticky Bucketing docs](https://docs.growthbook.io/app/sticky-bucketing) for more information. If your organization and experiment supports sticky bucketing, you must implement an instance of the `StickyBucketService` to use Sticky Bucketing.\n\nThe JS SDK exports several implementations of this service for reference, although you will need to build your own to work in a React Native environments.\n\nImplement the abstract `StickyBucketService` class and connect to your own data store, or custom wrap multiple service implementations.\n\n```\nimport Cookies from 'js-cookie';const gb = new GrowthBook({  apiHost: \"https://cdn.growthbook.io\",  clientKey: \"sdk-abc123\",  stickyBucketService: new MyStickyBucketService(),  // ...});\n```\n\n## API Reference[​](#api-reference \"Direct link to API Reference\")\n\nThere are a number of configuration options and settings that control how GrowthBook behaves.\n\n### Attributes[​](#attributes \"Direct link to Attributes\")\n\nYou can specify attributes about the current user and request. These are used for two things:\n\n1.  Feature targeting (e.g. paid users get one value, free users get another)\n2.  Assigning persistent variations in A/B tests (e.g. user id \"123\" always gets variation B)\n\nThe following are some commonly used attributes, but use whatever makes sense for your application.\n\n```\nnew GrowthBook({  attributes: {    id: \"123\",    loggedIn: true,    deviceId: \"abc123def456\",    company: \"acme\",    paid: false,    url: \"/pricing\",    browser: \"chrome\",    mobile: false,    country: \"US\",  },});\n```\n\n#### Updating Attributes[​](#updating-attributes \"Direct link to Updating Attributes\")\n\nIf attributes change, you can call `setAttributes()` to update. This will completely overwrite any existing attributes. To do a partial update, use the following pattern:\n\n```\ngb.setAttributes({  // Only update the `url` attribute, keep the rest the same  ...gb.getAttributes(),  url: \"/new-page\"})\n```\n\n#### Secure Attributes[​](#secure-attributes \"Direct link to Secure Attributes\")\n\nWhen _secure attribute hashing_ is enabled, all targeting conditions in the SDK payload referencing attributes with datatype `secureString` or `secureString[]` will be anonymized via SHA-256 hashing. This allows you to safely target users based on sensitive attributes. You must enable this feature in your SDK Connection for it to take effect.\n\nIf your SDK Connection has secure attribute hashing enabled, you will need to manually hash any `secureString` or `secureString[]` attributes that you pass into the GrowthBook SDK.\n\nTo hash an attribute, use a cryptographic library with SHA-256 support, and compute the SHA-256 hashed value of your attribute _plus_ your organization's secure attribute salt.\n\n```\nconst salt = \"f09jq3fij\"; // Your organization's secure attribute salt (see Organization Settings)// hashing a secureString attributeconst userEmail = sha256(salt + user.email);// hashing an secureString[] attributeconst userTags = user.tags.map(tag => sha256(salt + tag));gb.setAttributes({  id: user.id,  loggedIn: true,  email: userEmail,  tags: userTags,});await gb.init();// In this example, we are using Node.js's built-in crypto libraryfunction sha256(str) {  return crypto.createHash(\"sha256\").update(str).digest(\"hex\");}\n```\n\nNote that in a browser context, we will not be able to natively access the Node.js crypto library. In modern browsers `window.crypto.subtle` is available, although calls are asynchronous. You would need to await all attribute hashing to complete before calling `gb.setAttributes()`.\n\n```\nasync function sha256(str) {  const buffer = await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(str));  const hashArray = Array.from(new Uint8Array(buffer));  return hashArray.map(byte => byte.toString(16).padStart(2, \"0\")).join(\"\");}\n```\n\nAlternatively, CryptoJS ([https://www.npmjs.com/package/crypto-js](https://www.npmjs.com/package/crypto-js)) provides a synchronous API:\n\n```\nimport sha256 from 'crypto-js/sha256';const userEmail = sha256(salt + user.email);\n```\n\n### Feature Usage Callback[​](#feature-usage-callback \"Direct link to Feature Usage Callback\")\n\nGrowthBook can fire a callback whenever a feature is evaluated for a user. This can be useful to update 3rd party tools like NewRelic or DataDog.\n\n```\nnew GrowthBook({  onFeatureUsage: (featureKey, result) => {    console.log(\"feature\", featureKey, \"has value\", result.value);  },});\n```\n\nNote: If you evaluate the same feature multiple times (and the value doesn't change), the callback will only be fired the first time.\n\n### Dev Mode[​](#dev-mode \"Direct link to Dev Mode\")\n\nThere is a [GrowthBook Chrome DevTools Extension](https://chrome.google.com/webstore/detail/growthbook-devtools/opemhndcehfgipokneipaafbglcecjia) that can help you debug and test your feature flags in development.\n\nIn order for this to work, you must explicitly enable dev mode when creating your GrowthBook instance:\n\n```\nconst gb = new GrowthBook({  enableDevMode: true,});\n```\n\nTo avoid exposing all of your internal feature flags and experiments to users, we recommend setting this to `false` in production in most cases.\n\n### Inline Experiments[​](#inline-experiments \"Direct link to Inline Experiments\")\n\nDepending on how you configure feature flags, they may run A/B tests behind the scenes to determine which value gets assigned to the user.\n\nSometimes though, you want to run an inline experiment without going through a feature flag first. For this, you can use either the `useExperiment` hook or the Higher Order Component `withRunExperiment`:\n\nView the [Javascript SDK Docs](https://docs.growthbook.io/lib/js) for all of the options available for inline experiments\n\n#### useExperiment hook[​](#useexperiment-hook \"Direct link to useExperiment hook\")\n\n```\nimport { useExperiment } from \"@growthbook/growthbook-react\";export default function OtherComponent() {  const { value } = useExperiment({    key: \"new-headline\",    variations: [\"Hello\", \"Hi\", \"Good Day\"]  });  return <h1>{value}</h1>;}\n```\n\n#### withRunExperiment (class components)[​](#withrunexperiment-class-components \"Direct link to withRunExperiment (class components)\")\n\n**Note:** This library uses hooks internally, so still requires React 16.8 or above.\n\n```\nimport { withRunExperiment } from \"@growthbook/growthbook-react\";class OtherComponent extends React.Component {  render() {    // The `runExperiment` prop is identical to the `useExperiment` hook    const { value } = this.props.runExperiment({      key: \"headline-test\",      variations: [\"Hello World\", \"Hola Mundo\"]    });    return <h1>{value}</h1>;  }}// Wrap your component in `withRunExperiment`export default withRunExperiment(OtherComponent);\n```\n\n## TypeScript support[​](#typescript-support \"Direct link to TypeScript support\")\n\nSome hooks are available in type-safe versions. These require you to pass in your generated types as the generic argument.\n\nSee the [GrowthBook CLI](https://docs.growthbook.io/tools/cli) documentation for more information on generating type definitions and [JavaScript → TypeScript → Scrict Typing](https://docs.growthbook.io/lib/js#strict-typing) for how to use them.\n\n### useGrowthBook<T>()[​](#usegrowthbookt \"Direct link to useGrowthBook<T>()\")\n\nA type-safe version of the `useGrowthBook()` hook is available. Everywhere you use `useGrowthBook()`, pass the generated features as the generic argument:\n\n```\nconst growthbook = useGrowthBook<AppFeatures>()\n```\n\nIn that case, the hook will return `GrowthBook<AppFeatures> | undefined`.\n\nYou can reduce this boilerplate by creating your own hook, e.g.:\n\n```\n// ./src/utils/growthbook.tsimport { useGrowthBook as _useGrowthBook } from \"@growthbook/growthbook-react\";export const useGrowthBook = (): GrowthBook<AppFeatures> | undefined =>  _useGrowthBook<AppFeatures>();\n```\n\nYou can now reference the hook you created instead of the one from the official package:\n\n```\nimport { useGrowthBook } from \"@/src/utils/growthbook\"const growthbook = useGrowthBook();growthbook.getFeatureValue(knownKey, defaultValueOfValidType)\n```\n\n### useFeatureIsOn<T>()[​](#usefeatureisont \"Direct link to useFeatureIsOn<T>()\")\n\nThe React SDK also provides access to a type-safe `useFeatureIsOn<AppFeatures>()` hook.\n\n```\nconst isDarkModeOn = useFeatureIsOn<AppFeatures>(\"dark_mode\");\n```\n\nThis will only allow you to pass known keys to the hook.\n\nYou can reduce the boilerplate for this hook by creating your own and using that instead:\n\n```\n// ./src/utils/growthbook.tsimport { useFeatureIsOn as _useFeatureIsOn } from \"@growthbook/growthbook-react\";export const useFeatureIsOn = (id: keyof AppFeatures & string): boolean =>  _useFeatureIsOn<AppFeatures>(id);\n```\n\nAnd then reference the hook you created instead of the one from the official package:\n\n```\nimport { useFeatureIsOn } from \"@/src/utils/growthbook\"const isDarkModeOn = useFeatureIsOn(\"dark_mode\");\n```\n\n## Examples[​](#examples \"Direct link to Examples\")\n\n*   [React Native](https://github.com/growthbook/examples/tree/main/react-native-cli)\n*   [Typescript example app with strict typing](https://github.com/growthbook/examples/tree/main/vanilla-typescript) .",
    "title": "React Native SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for React Native",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/google-tag-manager-and-growthbook",
    "markdown": "# GrowthBook and Google Tag Manager\n\n## Using GrowthBook with Google Tag Manager (GTM)\n\nNow customers who are familiar with feature management using Google Tag Manager (GTM), yet may lack the engineering resources or capability to implement changes in their codebase, may easily use GrowthBook with GTM to power their AB tests. This setup is commonly used by marketing teams and CRO agencies.\n\nnote\n\nGrowthBook also offers a [visual editor](https://docs.growthbook.io/app/visual) for lightweight, no-code UI changes. This approach is compatible with GTM and the examples provided on this page as long you enable the \"Include Visual Experiments\" toggle within your SDK Connection.\n\nIn this guide, we will assume familiarity with the GTM platform.\n\n## Create an SDK Connection within GrowthBook[​](#create-an-sdk-connection-within-growthbook \"Direct link to Create an SDK Connection within GrowthBook\")\n\nFirst, you need to add a new SDK Connection within GrowthBook. Choose the \"Generic HTML\" option when setting this up.\n\nAfter you create the connection, you will be shown a script tag that contains your unique client id. Copy this script tag since you will need it for the following step.\n\n## Creating a GTM tag for the GrowthBook SDK[​](#creating-a-gtm-tag-for-the-growthbook-sdk \"Direct link to Creating a GTM tag for the GrowthBook SDK\")\n\nNext, create a new tag in your desired GTM workspace. We will choose \"Custom HTML\" as the tag type. We can give it the name \"GrowthBook SDK\" or similar. Also, be sure to set the firing triggers to target the specific pages where we need to instrument our feature changes and experiments (or just choose \"All Pages\").\n\nPaste in the script tag from your SDK Connection in the previous step. It will look something like the following. Refer to our [Script Tag SDK docs](https://docs.growthbook.io/lib/script-tag) for more info.\n\n```\n<script async  data-client-key=\"YOUR_CLIENT_KEY_HERE\"  src=\"https://cdn.jsdelivr.net/npm/@growthbook/growthbook/dist/bundles/auto.min.js\"></script>\n```\n\nTo publish the SDK tag, submit our workspace changes (the blue \"Submit\" button on the top of the GTM application), Then ensure \"Publish and Create version\" is selected and click the blue \"Publish\" button – or use whichever GTM release strategy you are already using.\n\n### Use Feature Flags[​](#use-feature-flags \"Direct link to Use Feature Flags\")\n\nThis step is optional. If you are planning to mainly use the Visual Editor to implement experiments, you can skip ahead to the next section.\n\nTo use feature flags, create another \"Custom HTML\" tag in your workspace, with a name like \"GrowthBook Feature Flags\" and set the firing trigger to the page you want to run this on.\n\nYou can use the following example as a starting point:\n\n```\n<script>// Wait for the GrowthBook SDK to load before runningwindow.growthbook_queue = window.growthbook_queue || [];window.growthbook_queue.push((gb) => {  // Function that uses feature flags to make changes to the page  const applyFeatureFlags = () => {    if(gb.isOn(\"dark-mode\")) {      document.documentElement.classList.add(\"dark\");    } else {      document.documentElement.classList.remove(\"dark\");    }  }  // Call your function initially plus whenever new data is received  applyFeatureFlags();  document.addEventListener(\"growthbookdata\", applyFeatureFlags)});</script>\n```\n\nThe above example shows using a single feature flag called `dark-mode` and using it to modify the class name of the `<html>` element. Replace the contents of the `applyFeatureFlags` function with your own logic.\n\nYou can add multiple tags like this if needed, each with their own triggering logic.\n\n## Tracking via DataLayer and GTM[​](#tracking-via-datalayer-and-gtm \"Direct link to Tracking via DataLayer and GTM\")\n\nThe GrowthBook SDK implementation above will send an event to the DataLayer that looks like the following whenever the user views an experiment:\n\n```\n{  \"event\": \"experiment_viewed\",  \"experiment_id\": \"...\",  \"variation_id\": \"...\"}\n```\n\nThis event can be forwarded on to your analytics tool of choice. The following steps show an example of sending this to Google Analytics v4:\n\n### Step 1: Add a new Tag[​](#step-1-add-a-new-tag \"Direct link to Step 1: Add a new Tag\")\n\n![Step 1](https://docs.growthbook.io/assets/images/gtm-ga4-1-05aa43364639866da51c77ac6e6771dc.png)\n\nClick “Tag Configuration”\n\n![Step 2](https://docs.growthbook.io/assets/images/gtm-ga4-2-33339325678729ffcc0cc167fe3d2d09.png)\n\nChoose “Google Analytics”\n\n![Step 3](https://docs.growthbook.io/assets/images/gtm-ga4-3-9631f8842cba811b4bb4ba883f8b0a91.png)\n\nThen, choose “Google Analytics: GA4 Event”\n\n### Step 2: Start Configuring the Tag[​](#step-2-start-configuring-the-tag \"Direct link to Step 2: Start Configuring the Tag\")\n\nYou will be presented with the following screen:\n\n![Step 4](https://docs.growthbook.io/assets/images/gtm-ga4-4-ec1a2cf39654b39560ab70ecda10f8a7.png)\n\nFill out the following fields:\n\n*   Measurement ID: Your GA4 measurement id (find it in the GA4 admin settings)\n*   Event Name: `experiment_viewed`\n\nAlso, add 2 parameters, but only fill out the name. Leave the value empty for now\n\n*   `experiment_id`\n*   `variation_id`\n\n![Step 5](https://docs.growthbook.io/assets/images/gtm-ga4-5-32620e5ce17e49aa3a55b2cd9bb233f4.png)\n\n### Step 3: Add Variables for Experiment and Variation Ids[​](#step-3-add-variables-for-experiment-and-variation-ids \"Direct link to Step 3: Add Variables for Experiment and Variation Ids\")\n\nThese steps will be repeated for both the `experiment_id` and `variation_id` parameters. We will start with `experiment_id`:\n\nClick the \\[+\\] icon in the Value input for `experiment_id`\n\n![Step 6](https://docs.growthbook.io/assets/images/gtm-ga4-6-b85155eab51a16f4341d92742dcc8b0c.png)\n\nClick the blue “+” in the top right corner to add a new variable\n\n![Step 7](https://docs.growthbook.io/assets/images/gtm-ga4-7-02d6add5cf27a2255644bcd7dd53bb6c.png)\n\nClick on “Variable Configuration”:\n\n![Step 8](https://docs.growthbook.io/assets/images/gtm-ga4-8-4f3840fb5143698a6e12d36083a9ef51.png)\n\nSelect “Data Layer Variable” and enter `experiment_id` as the Data Layer Variable Name.\n\nAlso, add a descriptive name for your variable in the top left where it says “Untitled Variable” (”Experiment Id” shown below)\n\n![Step 9](https://docs.growthbook.io/assets/images/gtm-ga4-9-5cd9d6e4cb31696fdf54f2067cb617fe.png)\n\nClick the blue “Save” button.\n\n**Repeat the above steps for the `variation_id` variable**\n\n### Step 4: Add a Trigger[​](#step-4-add-a-trigger \"Direct link to Step 4: Add a Trigger\")\n\nYou should be left with the following configuration. Add a descriptive name in the top left for your tag if you haven’t already - “GA4 - Experiment Viewed Event” shown here.\n\n![Step 10](https://docs.growthbook.io/assets/images/gtm-ga4-10-f662adc8e4b2ea3be364654a4a97ab2d.png)\n\nClick the “Triggering” section\n\n![Step 11](https://docs.growthbook.io/assets/images/gtm-ga4-11-fd03868049ce6ce93b63b71a05a37097.png)\n\nClick the blue “+” in the top right to add a new trigger. Enter a descriptive name in the top left (”Experiment Viewed Event” shown here)\n\n![Step 12](https://docs.growthbook.io/assets/images/gtm-ga4-12-ffa8eedec38b16fc70a09a6e0025086e.png)\n\nClick “Trigger Configuration”\n\n![Step 13](https://docs.growthbook.io/assets/images/gtm-ga4-13-37a6d1c0ae536d0059aad5cb899236bc.png)\n\nClick “Custom Event”:\n\n![Step 14](https://docs.growthbook.io/assets/images/gtm-ga4-14-f662adc8e4b2ea3be364654a4a97ab2d.png)\n\nEnter `experiment_viewed` as the Event name and click the blue “Save” button.\n\nBelow is the end result of your tag configuration. Click the blue “Save” button to finish.\n\n![Step 15](https://docs.growthbook.io/assets/images/gtm-ga4-15-b4c4ac0de83e85aad0fc91881e4fb61b.png)\n\n### Step 5: Publish Your Changes[​](#step-5-publish-your-changes \"Direct link to Step 5: Publish Your Changes\")\n\nFinally, publish your changes in Google Tag Manager and you’re done!\n\n## Viewing Results[​](#viewing-results \"Direct link to Viewing Results\")\n\nOnce your analytics tool is successfully tracking your experiment events, the next step is to connect GrowthBook to your data warehouse and view results.\n\nIf you are using Google Analytics v4, we have a dedicated guide for [Connecting GrowthBook to GA4 with BigQuery](https://docs.growthbook.io/guide/GA4-google-analytics).\n\nFor other analytics tools, refer to our general guide on [Connecting to your Data Warehouse](https://docs.growthbook.io/warehouses).",
    "title": "GrowthBook and Google Tag Manager | GrowthBook Docs",
    "description": "This guide walks you through using GrowthBook with Google Tag Manager (GTM) to track your experiments and measure their impact on your business.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/edge/fastly",
    "markdown": "# Fastly Compute Edge App & SDK\n\n## Overview[​](#overview \"Direct link to Overview\")\n\nGrowthBook currently supports two levels of integration with most edge workers, including Fastly:\n\n1.  Our turnkey Edge App\n    \n    *   Automatically run server-side or hybrid [Visual Experiments](https://docs.growthbook.io/app/visual) without redraw flicker.\n    *   Automatically run server-side or hybrid [URL Redirect Experiments](https://docs.growthbook.io/app/url-redirects) without flicker or delay.\n    *   Optionally inject the JavaScript SDK with hydrated payload, allowing the front-end to pick up where the edge left off without any extra network requests. We use an enhanced version of our [HTML Script Tag](https://docs.growthbook.io/lib/script-tag) for this purpose.\n2.  Support for edge apps using our JavaScript SDK\n    \n    *   Enhanced support and examples for using our JavaScript SDK in an edge environment\n\nRegardless of your use case, our Fastly integration makes easy to synchronize feature and experiment values between GrowthBook and Fastly's KV store. This eliminates the network request to the GrowthBook API, unlocking blazingly fast edge-side and client-side SDK performance.\n\n## References[​](#references \"Direct link to References\")\n\n*   Our Fastly Compute SDK repository, which supports the above use cases, is [here](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-fastly)\n*   A turnkey implementation of the Edge App (compatible with Viceroy) is [here](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-fastly/example)\n*   You may find it useful to review our [JavaScript SDK](https://docs.growthbook.io/lib/js). Many of the concepts which apply to both on-edge and injected frontend SDKs are based on our JS SDK.\n\n## Worker Configuration[​](#worker-configuration \"Direct link to Worker Configuration\")\n\ntip\n\nThis tutorial assumes some familiarity with building and deploying Fastly Compute applications. You can quickly get up to speed by following the Fastly Compute [Developer guide](https://www.fastly.com/documentation/guides/compute/) .\n\nYou may either use our turnkey Edge App for Fastly Compute or build your own app from scratch using our JavaScript and Fastly SDKs.\n\n## Turnkey Edge App[​](#turnkey-edge-app \"Direct link to Turnkey Edge App\")\n\nOur Edge App runs as a smart proxy layer between your application and your end users. In absence of Visual or URL Redirect experiments, the Edge App will simply proxy the user request to your site and return the response, optionally injecting a fully-bootstrapped JavaScript SDK onto the rendered HTML page. If the request URL matches an Visual or URL Redirect experiment and the targeting conditions are satisfied, the Edge App may also perform one or more URL redirects behind the scenes (the public-facing URL does not change) and/or mutate the DOM for Visual Experiments.\n\nURL Redirects on edge\n\nThe Edge App defaults to running URL Redirect Experiments in the browser only. This is because edge redirects load a separate page's content without altering the URL. After the redirect, some sites may experience problems with loading assets or endpoints with relative paths.\n\nYou can enable URL Redirects on edge by setting environment variable `RUN_URL_REDIRECT_EXPERIMENTS` ([see below](#environment-variables)).\n\n  \n\nVisual Experiments and CPU\n\nBy default, Fastly allows 50ms of CPU time per request. When running Visual Experiments on edge with Fastly, it is common to see CPU time exceed the allotted 50ms. If your responses exceed 50ms and you receive a **503** error, you have a few options:\n\n1.  Upgrade your Fastly Compute account to support longer CPU time.\n2.  Or set the environment variable `RUN_VISUAL_EDITOR_EXPERIMENTS=\"browser\"`. Users will still receive a flicker-free experience because the bootstrapped SDK and DOM mutations are injected into the page `<head>` and triggered immediately on page load.\n\nSetting up our turnkey Edge App is simple. Assuming that you have a basic Fastly Compute service set up, simply install the SDK and implement our custom request handler. Or if you prefer, you may pull down our fully-functional [example implementation](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-fastly/example) and follow along.\n\n### Install the SDK[​](#install-the-sdk \"Direct link to Install the SDK\")\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save @growthbook/edge-fastly\n```\n\n### Implement the Edge App request handler[​](#implement-the-edge-app-request-handler \"Direct link to Implement the Edge App request handler\")\n\nA basic implementation of our Edge App only requires a few lines of code:\n\n```\n/// <reference types=\"@fastly/js-compute\" />import { ConfigStore } from \"fastly:config-store\";import { gbHandleRequest, getConfigEnvFromStore } from \"@growthbook/edge-fastly\";addEventListener(\"fetch\", (event) => event.respondWith(handleRequest(event)));async function handleRequest(event) {  const envVarsStore = new ConfigStore(\"env_vars\");  const env = getConfigEnvFromStore(envVarsStore);  const config = {    apiHostBackend: \"api_host\",  // Name of Fastly backend pointing to your GrowthBook API Endpoint    backends: { \"https://internal.mysite.io\": \"my_site\" },  // Map of proxy origins to named Fastly backends  };  return await gbHandleRequest(event.request, env, config);}\n```\n\nNotice a few references to backends. We will define these in the Fastly Dashboard in the subsequent doc section.\n\n### Set up backends (origins)[​](#set-up-backends-origins \"Direct link to Set up backends (origins)\")\n\nUnless your have requested open proxy behavior on your Fastly account, Fastly requires that you define backends for each origin server that your Compute application fetches from. In order to use our Edge app, you will need to create a backend for your GrowthBook API Host (which we'll call `api_host`), and one or more backends for your origin site using the Fastly dashboard (called \"Origins\" in your Compute service configuration).\n\nEach backend is defined as an _origin_ URL. Example: `https://internal.mysite.io` or `https://internal.mobile.mysite.io`; but not full URLs like `https//internal.mysite.io/features/widget`.\n\n*   In Fastly, create a backend called `api_host` pointing to your GrowthBook API Host. For GrowthBook Cloud customers, this will be `https://cdn.growthbook.io`. Link this backend to your Compute service.\n*   In Fastly, create one or more backends pointing to your site origins. This includes both your main site origin URL as well as any origin URLs that you may redirect to in any URL Redirect experiments. Link these backends to your Compute service.\n\nIn your request handler, you must pass these backends via the **config** parameter, as shown in the example code in the [previous doc section](#implement-the-edge-app-request-handler).\n\n*   The API Host backend should be set via `config.apiHostBackend = \"api_host\"`.\n*   The site origin backends are defined as an object mapping each origin URL to its corresponding backend name. They should be set via `config.backends = { \"https://internal.mysite.io\": \"my_site\" }`.\n\n### Configure the Edge App[​](#configure-the-edge-app \"Direct link to Configure the Edge App\")\n\nUse a combination of environment variables and optional runtime configuration to add required fields and to customize the Edge App behavior.\n\n#### Environment variables[​](#environment-variables \"Direct link to Environment variables\")\n\nWe suggest using a [Fastly Config store](https://docs.fastly.com/en/guides/working-with-config-stores) to set your environment variables. Create a Config store called `env_vars` from the Fastly dashboard and link it to your Compute service. Then, at minimum, add these required key/value pairs:\n\n```\nPROXY_TARGET=\"https://internal.mysite.io\"  # The non-edge URL to your websiteGROWTHBOOK_API_HOST=\"https://cdn.growthbook.io\"GROWTHBOOK_CLIENT_KEY=\"sdk-abc123\"GROWTHBOOK_DECRYPTION_KEY=\"key_abc123\"  # Only include for encrypted SDK Connections\n```\n\nYou may want to further customize the app. Here is a list of common customization variables:\n\n```\n# Disable or change the rendering behavior of Visual Experiments:# ==========RUN_VISUAL_EDITOR_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"everywhere\"# URL Redirect Experiments are disabled on edge by default. Because the URL does not change, some sites# may experience problems with loading assets or endpoints with relative paths:# ==========RUN_URL_REDIRECT_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"browser\"RUN_CROSS_ORIGIN_URL_REDIRECT_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"browser\"# Mutate browser URL via window.history.replaceState() to reflect the new URL:INJECT_REDIRECT_URL_SCRIPT=\"true\"  # default \"true\".# Do not inject a bootstrapped JavaScript SDK onto the page:# ==========DISABLE_INJECTIONS=\"true\"  # default \"false\"# Customize the edge or injected browser SDK behavior:# ==========ENABLE_STREAMING=\"true\"  # default \"false\". Streaming SSE updates on browser.ENABLE_STICKY_BUCKETING=\"true\"  # default \"false\". Use cookie-based sticky bucketing on edge and browser.\n```\n\n#### Runtime configuration[​](#runtime-configuration \"Direct link to Runtime configuration\")\n\nYou may want to provide context to your edge app at runtime rather than using environment variables. For example, if you have additional [targeting attributes](https://docs.growthbook.io/lib/js#attributes) available, you may inject them by modifying your request handler code:\n\n```\n/// <reference types=\"@fastly/js-compute\" />import { ConfigStore } from \"fastly:config-store\";import { gbHandleRequest, getConfigEnvFromStore } from \"@growthbook/edge-fastly\";addEventListener(\"fetch\", (event) => event.respondWith(handleRequest(event)));async function handleRequest(event) {  const envVarsStore = new ConfigStore(\"env_vars\");  const env = getConfigEnvFromStore(envVarsStore);  const cookie = parse(event.request.headers.get(\"Cookie\") || \"\");  const config = {    // custom targeting attributes:    attributes: {      userType: cookie[\"userId\"] ? \"logged in\" : \"anonymous\"    },    // backends:    apiHostBackend: \"api_host\",  // Name of Fastly backend pointing to your GrowthBook API Endpoint    backends: { \"https://internal.mysite.io\": \"my_site\" },  // Map of proxy origins to named Fastly backends  };  return await gbHandleRequest(event.request, env, config);}\n```\n\n#### More customization options[​](#more-customization-options \"Direct link to More customization options\")\n\nFor a full list of customizations, view our vendor-agnostic [Edge Utility repository](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-utils) .\n\n### Set up a Payload Cache[​](#set-up-a-payload-cache \"Direct link to Set up a Payload Cache\")\n\nYou can configure GrowthBook payload caching by using a [Fastly KV](https://docs.fastly.com/en/guides/working-with-kv-stores) store. This eliminates network requests from your edge to GrowthBook which speeds up page delivery while reducing network costs.\n\nYou may configure the Fastly Edge App to use either webhook-based or just-in-time payload caching (or both) depending on how you've set up your KV namespaces and SDK Webhooks.\n\nMore information about setting up your payload cache can be found in the [Payload Caching with Fastly KV Store](#payload-caching-with-fastly-kv-store) doc section below.\n\n### Tracking Experiment Views[​](#tracking-experiment-views \"Direct link to Tracking Experiment Views\")\n\nRunning A/B tests requires a [tracking callback](https://docs.growthbook.io/lib/js#experimentation-ab-testing). Our turnkey Edge App defaults to using built-in front-end tracking. The tracking call automatically integrates with Segment.io, GA4, and Google Tag Manager by using the mechanism outlined in our [HTML Script Tag](https://docs.growthbook.io/lib/script-tag#tracking-experiment-views). In order to do this, the app keeps track of tracking calls triggered on edge and injects them into the front-end SDK to be automatically triggered on page load.\n\nYou may wish to either customize front-end tracking or switch to edge tracking (or use both concurrently if running hybrid edge + front-end experiments).\n\nWhy might you be interested in tracking on edge? Tracking on an edge or backend environment allows you to ensure the callback is fired before any differentiation across variations, eliminating experimental bias. While not eliminating this risk, the default injected front-end tracking introduced by our Edge App does reduce this risk relative to solely using a front-end SDK.\n\nTo change the front-end tracking callback, set the `GROWTHBOOK_TRACKING_CALLBACK` to your custom tracking JS code:\n\n```\n# todo: replace with your own tracking libraryGROWTHBOOK_TRACKING_CALLBACK=\"(experiment, results) => { console.log('browser tracking callback', {experiment, results}); }\"\n```\n\nTo track on edge, you must inject your own tracking callback into the edge request handler code. Any experiments that run on edge will use the edge tracking callback and not the front-end callback (hybrid edge + front-end experiments being an exception):\n\n```\n/// <reference types=\"@fastly/js-compute\" />import { ConfigStore } from \"fastly:config-store\";import { gbHandleRequest, getConfigEnvFromStore } from \"@growthbook/edge-fastly\";addEventListener(\"fetch\", (event) => event.respondWith(handleRequest(event)));async function handleRequest(event) {  const envVarsStore = new ConfigStore(\"env_vars\");  const env = getConfigEnvFromStore(envVarsStore);  const config = {    edgeTrackingCallback: (experiment, results) => {      // todo: replace with your tracking library      console.log('edge tracking callback', {experiment, results});    },    // backends:    apiHostBackend: \"api_host\",  // Name of Fastly backend pointing to your GrowthBook API Endpoint    backends: { \"https://internal.mysite.io\": \"my_site\" },  // Map of proxy origins to named Fastly backends  };  return await gbHandleRequest(event.request, env, config);}\n```\n\n### Targeting Attributes[​](#targeting-attributes \"Direct link to Targeting Attributes\")\n\nThe following targeting attributes are set automatically by the Edge App.\n\n*   `id` - creates a long-lived `gbuuid` cookie if it doesn't exist already\n*   `url`\n*   `path`\n*   `host`\n*   `query`\n*   `pageTitle`\n*   `deviceType` - either `mobile` or `desktop`\n*   `browser` - one of `chrome`, `edge`, `firefox`, `safari`, or `unknown`\n*   `utmSource`\n*   `utmMedium`\n*   `utmCampaign`\n*   `utmTerm`\n*   `utmContent`\n\nYou can customize both the primary identifier name (`id`) and cookie name (`gbuuid`) by setting the `UUID_KEY` and `UUID_COOKIE_NAME` environment variables respectively.\n\nAs shown in the [runtime configuration](#runtime-configuration) section above, you can also pass custom attributes via runtime config. You can also skip automatic attribute generation and rely solely on custom attributes by setting the environment variable `SKIP_AUTO_ATTRIBUTES=\"true\"`.\n\n### Routing[​](#routing \"Direct link to Routing\")\n\nBy default, the Edge App will process all `GET` requests (other HTTP verbs are proxied through without running through our app logic).\n\nThere may be situations when you will need to provide fine-grained routing / URL targeting rules within our Edge App. You will need to include a JSON encoded string of route rules in your `ROUTES` environment variable.\n\nFor instance, you may want to do a proxy pass-through (do not process) for `mysite.io/account/*` or `mysite.io/settings/*`. Your routes may look like this:\n\n```\nROUTES='[{ \"pattern\":\"mysite.io/account/*\", \"behavior\":\"proxy\" }, { \"pattern\":\"mysite.io/settings/*\", \"behavior\":\"proxy\" }]'\n```\n\nA route uses the following interface, with many of the properties being optional:\n\n```\n{  pattern: string;  type?: \"regex\" | \"simple\";  // default: \"simple\"  behavior?: \"intercept\" | \"proxy\" | \"error\";  // default: \"intercept\"  includeFileExtensions?: boolean;  // Include requests to filenames like \"*.jpg\". default: false (pass-through).  statusCode?: number; // Alter the status code (default is 404 when using \"error\")  body?: string; // Alter the body (for setting an error message body)}\n```\n\nWhen multiple routes are included in your `ROUTES` array, only the first match is used.\n\n### Cookie Policy and GDPR[​](#cookie-policy-and-gdpr \"Direct link to Cookie Policy and GDPR\")\n\nBy default, the Edge App will persist a random unique identifier in a first-party cookie named `gbuuid`. Its purpose is to provide a consistent user experience to your visitors by preventing them from being re-bucketed into different A/B test variations. It follows the same mechanism as discussed in our [HTML Script Tag docs](https://docs.growthbook.io/lib/script-tag#cookie-policy-and-gdpr).\n\n#### Delay Storing the Cookie Until Consent is Granted[​](#delay-storing-the-cookie-until-consent-is-granted \"Direct link to Delay Storing the Cookie Until Consent is Granted\")\n\nIf you must delay persisting the `gbuuid` cookie until a user consents, you can set the environment variable `NO_AUTO_COOKIES=\"true\"`.\n\nThis will still generate a UUID for the user, but will not persist it. That means, if the user refreshes the page, they will have a new random UUID generated.environment\n\nYou have the option to manually persist this cookie at any time, for example when a user grants consent on your cookie banner. All you need to do is fire this custom event from javascript on the rendered page:\n\n```\ndocument.dispatchEvent(new CustomEvent(\"growthbookpersist\"));\n```\n\nnote\n\nIf you are using Sticky Bucketing, a persistent sticky bucket assignments cookie will automatically be generated. If you require user permission before writing cookies, you should:\n\n*   Either do not enable Sticky Bucketing on edge (do not use `ENABLE_STICKY_BUCKETING`)\n*   Or only enable Sticky Bucketing per each user via runtime configuration. (only pass `config.enableStickyBucketing: true` if user has consented — identifiable by checking for presence of the `gbuuid` cookie).\n\n## Manual SDK Integration on Edge[​](#manual-sdk-integration-on-edge \"Direct link to Manual SDK Integration on Edge\")\n\nYou may be interested in building your own edge application using the GrowthBook SDK and not using our turnkey Edge App. Or you may want to do custom feature flagging on specific routes while running our Edge App on other routes.\n\nTo use the GrowthBook on edge, simply include our standard [JavaScript SDK](https://docs.growthbook.io/lib/js) (`@growthbook/growthbook` NPM package). You will likely need to monkey-patch our SDK's built-in fetch calls in order to specify a Fastly backend.\n\nIn our `@growthbook/edge-fastly` NPM package, we export a few Fastly-specific utility functions to simplify SDK payload caching (we discuss payload caching strategies in the subsequent doc section).\n\n```\n/// <reference types=\"@fastly/js-compute\" />import { KVStore } from \"fastly:kv-store\";import { GrowthBook, setPolyfills, helpers } from \"@growthbook/growthbook\";import { getPayloadFromKV, getKVLocalStoragePolyfill } from \"@growthbook/edge-fastly\";addEventListener(\"fetch\", (event) => event.respondWith(handleRequest(event)));async function handleRequest(event) {  // 1. Monkey-patch the GrowthBook SDK to support Fastly backends  helpers.fetchFeaturesCall = ({ host, clientKey, headers }) => fetch(    `${host}/api/features/${clientKey}`,    { headers, backend: config.apiHostBackend }  );  // 2. Init the GrowthBook SDK and choose an optional caching strategy  // A. Use the KV as a managed payload store to eliminate SDK requests to the GrowthBook API entirely.  // Requires setting up an SDK Webhook.  const payloadKVStore = new KVStore(\"gb_payload\");  const payload = await getPayloadFromKV(payloadKVStore);  const growthbook = new GrowthBook(gbContext);  await growthbook.init({ payload: payload });  // B. Or provide a KV cache layer so that the GrowthBook SDK doesn't need to make as many requests  // to the GrowthBook API. No SDK Webhook needed.  const cacheKVStore = new KVStore(\"gb_cache\");  const localStoragePolyfill = getKVLocalStoragePolyfill(cacheKVStore);  setPolyfills({ localStorage: localStoragePolyfill });  await growthbook.init();  // 3. Start feature flagging  if (growthbook.isOn(\"my-feature\")) {    return new Response(\"<h1>foo</h1>\");  }  return new Response(\"<h1>bar</h1>\");}\n```\n\n## Payload Caching with Fastly KV Store[​](#payload-caching-with-fastly-kv-store \"Direct link to Payload Caching with Fastly KV Store\")\n\nBy default, the Edge App will make a network request to the GrowthBook API on each user request in order to fetch the current feature and experiment values. This is a blocking call that delays page delivery. There is an in-memory short-lived cache layer on this call, but it won't always protect you.\n\nConvenient solutions this problem are realized through [Fastly KV](https://docs.fastly.com/en/guides/working-with-kv-stores) , an on-edge key-val store which we can leverage for persistent payload caching. There are 2 levels of KV integration available:\n\n1.  You can either completely eliminate the blocking call to the GrowthBook API by implementing a GrowthBook-to-Fastly-KV push model via **SDK Webhooks**.\n2.  Alternatively, you can eliminate most of these network requests by using Fastly KV as a just-in-time payload cache.\n\nYou can also use either of these strategies in your own manual SDK integration via the `getPayloadFromKV` and `getKVLocalStoragePolyfill` utility functions.\n\n### Configuring the KV store[​](#configuring-the-kv-store \"Direct link to Configuring the KV store\")\n\nCreate a Fastly KV store for your worker to interface with.\n\nUsing the Fastly dashboard, create a Fastly KV store for either push-based or just-in-time payload cache (or use both if you like). By convention, we suggest naming a push-based KV store as `gb_payload` and naming a just-in-time KV store as `gb_cache`. Link your KV store(s) to your Compute service.\n\nIf you are using our turnkey Edge App, you simply need to instantiate your KVStore(s) and pass them into your request handler via the **config** parameter. The Edge App will automatically use these KV stores as persistent cache if present.\n\n```\n/// <reference types=\"@fastly/js-compute\" />import { ConfigStore } from \"fastly:config-store\";import { KVStore } from \"fastly:kv-store\";import { gbHandleRequest, getConfigEnvFromStore } from \"@growthbook/edge-fastly\";addEventListener(\"fetch\", (event) => event.respondWith(handleRequest(event)));async function handleRequest(event) {  const envVarsStore = new ConfigStore(\"env_vars\");  const env = getConfigEnvFromStore(envVarsStore);  const config = {    apiHostBackend: \"api_host\",    backends: { \"https://internal.mysite.io\": \"my_site\" },    gbCacheStore: new KVStore(\"gb_cache\"),  // just-in-time payload cache    gbPayloadStore: new KVStore(\"gb_payload\"),  // push-based payload cache  };  return await gbHandleRequest(event.request, env, config);}\n```\n\n### Configuring a SDK Webhook[​](#configuring-a-sdk-webhook \"Direct link to Configuring a SDK Webhook\")\n\nFor KV stored payloads (1), we eliminate network requests from edge to GrowthBook by using a GrowthBook SDK Webhook to push the SDK payload to the KV store on change.\n\n1.  Create an [SDK Webhook](https://docs.growthbook.io/app/webhooks/sdk-webhooks) on the same SDK Connection that you are using for edge integration. You do not need to worry about the receiving end of the webhook (verifying GrowthBook signatures, etc).\n2.  Set the **Endpoint URL** to the Fastly's REST API endpoint for KV. At the time of writing, it follows this format:\n\n```\nhttps://api.fastly.com/resources/stores/kv/{store_id}/keys/gb_payload\n```\n\n3.  Change the **Method** to `PUT`.\n4.  Add appropriate authorization header:\n\n```\n{  \"Fastly-Key\": \"YOUR_FASTLY_REST_API_TOKEN\"}\n```\n\n5.  Set the **Payload format** to \"SDK Payload only\".\n\nNow whenever feature and experiment values change, your Fastly worker will have immediate access to the latest values. You can also test the webhook by using the \"Test Webhook\" button on the SDK Connection page.",
    "title": "Fastly Compute Edge App & SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Fastly Compute",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/power",
    "markdown": "# Power Analysis | GrowthBook Docs\n\nnote\n\nPower analysis is currently in alpha (version 2.9+ required). To enable power analysis, go to your organizational settings, and toggle \"Enable Power Calculator\" in \"Experiment Settings.\" Currently GrowthBook offers only frequentist power analysis. Bayesian power analysis is coming soon.\n\n## What is power analysis?[​](#what-is-power-analysis \"Direct link to What is power analysis?\")\n\nPower analysis helps you estimate required experimental duration. Power is the probability of observing a statistically significant result, given your feature has some effect on your metric.\n\n## When should I run power analysis?[​](#when-should-i-run-power-analysis \"Direct link to When should I run power analysis?\")\n\nYou should run power analysis before your experiment starts, to determine how long you should run your experiment. The longer the experiment runs, the more users are in the experiment (i.e., your sample size increases). Increasing your sample size lowers the uncertainty around your estimate, which makes it likelier you achieve a statistically significant result.\n\n## What is a minimum detectable effect, and how do I interpret it?[​](#what-is-a-minimum-detectable-effect-and-how-do-i-interpret-it \"Direct link to What is a minimum detectable effect, and how do I interpret it?\")\n\nRecall that your relative effect size (which we often refer to as simply the effect size), is the percentage improvement in your metric caused by your feature. For example, suppose that average revenue per customer under control is $100, while under treatment you expect that it will be 102.Thiscorrespondstoa(102\\. This corresponds to a (102-100)/100)/100 = 2% effect size. Effect size is often referred to as lift.\n\nGiven the sample variance of your metric and the sample size, the minimum detectable effect (MDE) is the smallest effect size for which your power will be at least 80%.\n\nGrowthBook includes both power and MDE results to ensure that customers comfortable with either tool can use them to make decisions. The MDE can be thought of as the smallest effect that you will be able to detect most of the time in your experiment. We want to be able to detect subtle changes in metrics, so smaller MDEs are better.\n\nFor example, suppose your MDE is 2%. If you feel like your feature could drive a 2% improvement, then your experiment is high-powered. If you feel like your feature will probably only drive something like .5% improvement (which can still be huge!), then you need to add users to detect this effect.\n\n## How do I run a power analysis?[​](#how-do-i-run-a-power-analysis \"Direct link to How do I run a power analysis?\")\n\n1.  From the GrowthBook home page, click \"Experiments\" on the left tab. In the top right, click \"+ Power Calculation.\"\n2.  Select “New Calculation”.\n3.  On the first page you:\n\n*   Select your metrics (maximum of 5). Currently binomial, count, duration, and revenue metrics are supported, while ratio and quantile metrics are unsupported.\n*   Select your \"Estimated users per week.\" This is the average number of **new** users your experiment will add each week. See [FAQ](#faq) below for a couple of simple estimation approaches.\n*   click \"Next\".\n\n4.  On the second page you:\n\n*   enter the \"Effect Size\" for each metric. Effect size is the percentage improvement in your metric (i.e., the lift) you anticipate your feature will cause. Inputting your effect size can require care - see [here](#how-should-i-pick-my-effect-size).\n*   for binomial metrics, enter the conversion rate.\n*   for other metrics, enter the metric mean and metric standard deviation. These means and standard deviations occur across users in your experimental population.\n*   click \"Next\".\n\n5.  Now you have results! Please see the results interpretation [here](#how-do-i-interpret-power-analysis-results).\n6.  By clicking \"Edit\" in the \"Analysis Settings\" box, you can toggle [sequential testing](https://docs.growthbook.io/statistics/sequential) on and off to compare power. Enabling sequential testing decreases power.\n7.  You can alter the number of variations in your experiment. Increased variations result in smaller sample sizes per variation, resulting in lower power.\n8.  If you want to modify your inputs, click the \"Edit\" button next to \"New Calculation\" in the top right corner.\n\n## How do I interpret power analysis results?[​](#how-do-i-interpret-power-analysis-results \"Direct link to How do I interpret power analysis results?\")\n\nIn this section we run through an example power analysis. After starting power analysis, you will need to select metrics and enter estimated users per week.\n\n![metric and users input](https://docs.growthbook.io/assets/images/power_1-72e0be3502e3404db18b15c46dc40a75.png)\n\nIn our example, we choose a binomial metric (Retention - \\[1, 14) Days) and a revenue metric (Purchases - Total Revenue (72 hour window)). We refer to these metrics as \"retention\" and \"revenue\" respectively going forward. We estimate that 500,000 new users per week visit our website.\n\nYou then input your effect sizes, which are the best guesses for your expected metric improvements due to your feature.\n\n![metric and users input](https://docs.growthbook.io/assets/images/power_2-826f9b68404396d3f40a5acfdf89b17b.png)\n\nWe provide guidance for effect size selection [here](#how-should-i-pick-my-effect-size). For our feature we anticpate a 2% improvement in retention. For retention, the conversion rate is 10%. This 10% number should come from an offline query that measures your conversion rate on your experimental population. We expect a 1% improvement in revenue, which has a mean of 0.10andastandarddeviationof0.10 and a standard deviation of 0.22 (as with conversion rate, the mean and standard deviation come from an offline query that you run on your population). We then submit our data.\n\nNow we can see the results! ![metric and users input](https://docs.growthbook.io/assets/images/power_3-5464a7f63686338e67aa709399b08edd.png)\n\nAt the top of the page is a box called Analysis Settings. The summary here says, \"Run experiment for 4 weeks to achieve 80% power for all metrics.\" This is the most important piece of information from power analysis. If running your experiment for 4 weeks is compatible with your business constraints, costs, and rollout timeframe, then you do not need to dive into the numbers below this statement. If you want to rerun power results with number of variations greater than 2, then click \"# of Variations\" and then click \"Update\". The total traffic divided by number of variations should equal the smallest sample size in the experiment you plan to run. If you want to toggle on or off \"Sequential Testing\", then press the \"Edit\" button and select the appropriate option. Enabling sequential testing reduces power.\n\nBelow \"Analysis Settings\" is \"Calculated Sample Size and Runtime\", which contains the number of weeks (or equivalently the number of users) needed to run your experiment to achieve 80% power by metric. Clicking on a row in the table causes the information in the box to the right to change. We expect 80% power for retention if we run the experiment for 2 weeks. For revenue, we need to run the experiment for 4 weeks to achieve at least 80% power.\n\nBeneath \"Calculated Sample Size and Runtime\" is \"Power Over Time\", which contains power estimates by metric.\n\n![metric and users input](https://docs.growthbook.io/assets/images/power_4-adebe7d2802c8b2dbcab2d2f742825c9.png)\n\nThe columns in Power Over Time correspond to different weeks. For example, in the first week power for retention is 65%. The highlighted column in week 4 is the first week where at least 80% power is achieved for all metrics. As expected, power increases over time, as new users are added to the experiment.\n\nBeneath Power Over Time is Minimum Detectable Effect Over Time.\n\n![metric and users input](https://docs.growthbook.io/assets/images/mde-1c0b304a1a99ddfaba03a2db44f98fcf.png)\n\nMinimum Detectable Effect Over Time is structured the same as Power Over Time, except it contains MDEs rather than power estimates. The Week 1 revenue MDE is 2%. This means that if your true lift is 2%, after 1 week you will have at least 80% chance of observing a statistically significant result. As expected, MDEs decrease over time, as new users are added to the experiment.\n\nIf you see `N/A` in your MDE results, this means that you need to increase your number of weekly users, as the MDE calculation failed.\n\nIt can be helpful to see power estimates at different effect sizes, different estimates of weekly users, etc. To modify your inputs, click the \"Edit\" button next to \"New Calculation\" in the top right corner.\n\n## How should I pick my effect size?[​](#how-should-i-pick-my-effect-size \"Direct link to How should I pick my effect size?\")\n\nSelecting your effect size for power analysis requires careful thought. Your effect size is your anticipated metric lift due to your feature. Obviously you do not have complete information about the true lift, otherwise you would not be running the experiment!\n\nWe advocate running power analysis for multiple effect sizes. The following questions may elicit helpful effect sizes:\n\n1.  What is your best guess for the potential improvement due to your feature? Are there similar historical experiments, or pilot studies, and if so, what were their lifts?\n2.  Suppose your feature is amazing - what do you think the lift would be?\n3.  Suppose your feature impact is smaller than you think - how small could it be?\n\nIdeally your experiment has high power (see [here](#what-is-a-high-powered-experiment)) across a range of effect sizes.\n\n## What is a high-powered experiment?[​](#what-is-a-high-powered-experiment \"Direct link to What is a high-powered experiment?\")\n\nIn clinical trials, the standard is 80%. This means that if you were to run your clinical trial 100 times with different patients and different randomizations each time, then you would observe statistically significant results in at least roughly 80 of those trials. When calculating MDEs, we use this default of 80%.\n\nThat being said, running an experiment with less than 80% power can still help your business. The purpose of an experiment is to learn about your business, not simply to roll out features that achieve statistically significant improvement. The biggest cost to running low-powered experiments is that your results will be noisy. This usually leads to ambiguity in the rollout decision.\n\n## How do I run Bayesian power analysis?[​](#how-do-i-run-bayesian-power-analysis \"Direct link to How do I run Bayesian power analysis?\")\n\nFor Bayesian power analysis, you specify the prior distribution of the treatment effect (see [here](https://docs.growthbook.io/statistics/details#bayesian-engine)) for guidance regarding prior selection). We then estimate Bayesian power, which is the probability that the (1−α)(1 - \\\\alpha) credible interval does not contain 0.\n\nIf your organizational default is Bayesian, then Bayesian will be your default power analysis. You can switch to and from frequentist and Bayesian power calculations by toggling \"Statistics Engine\" under \"Settings\" on the Power Results page.\n\nYour default prior for each metric will be your organizational default. To change a prior for a metric, go to \"Settings\", and make sure that \"Statistics Engine\" is toggled to \"Bayesian.\" Then choose \"Prior Specification\", and update prior means and standard deviations for your metric(s). Remember that these priors are on the relative scale, so a prior mean of 0.1 represents a 10% lift.\n\n## FAQ[​](#faq \"Direct link to FAQ\")\n\nFrequently asked questions:\n\n1.  How do I pick the number for Estimated Users Per Week? If you know your number of daily users, you can multiply that by 7. If traffic varies by day of the week, you may want to do something like (5 \\_ average weekday traffic + 2 \\_ average weekend traffic) / 7.\n2.  How can I increase my experimental power? You can increase experimental power by increasing the number of daily users, perhaps by either expanding your population to new segments, or by including a larger percentage of user traffic in your experiment. Similarly, if you have more than 2 variations, reducing the number of variations increases power.\n3.  What if my experiment is low-powered? Should I still run it? The biggest cost to running a low-powered experiment is that your results will probably be noisy, and you will face ambiguity in your rollout/rollback decision. That being said, you will probably still have learnings from your experiment.\n4.  What does \"N/A\" mean for my MDE result? It means there is no solution for the MDE, given the current number of weekly users, control mean, and control variance. Increase your number of weekly users or reduce your number of treatment variations.\n\n## GrowthBook implementation[​](#growthbook-implementation \"Direct link to GrowthBook implementation\")\n\nFor both Bayesian and frequentist engines, we produce two key estimates:\n\n1.  Power - After running the experiment for a given number of weeks and for a hypothesized effect size, what is the probability of a statistically significant result?\n2.  Minimum Detectable Effect (MDE) - After running an experiment for a given number of weeks, what is the smallest effect that we can detect as statistically significant 80% of the time?\n\nEach engine arrives at these values differently. Below we describe high-level technical details of our implementation. All technical details can be found [here](https://docs.growthbook.io/statistics/power-technical).\n\n### Frequentist implementation[​](#frequentist-implementation \"Direct link to Frequentist implementation\")\n\nBelow we define frequentist power.\n\nDefine:\n\n1.  the false positive rate as α\\\\alpha (GrowthBook default is α\\=0.05\\\\alpha=0.05).\n2.  the critical values Z1−α/2\\=Φ−1(1−α/2)Z\\_{1- \\\\alpha / 2}= \\\\Phi^{-1}(1-\\\\alpha/2) and Z1−α\\=Φ−1(1−α)Z\\_{1-\\\\alpha}= \\\\Phi^{-1}(1-\\\\alpha) where Φ\\\\Phi is the inverse cumulative distribution function of the standard normal distribution.\n\nWe make the following assumptions:\n\n1.  equal sample sizes across control and treatment variations. If unequal sample sizes are used in the experiment, use the smaller of the two sample sizes. This will produce conservative power estimates.\n2.  equal variance across control and treatment variations;\n3.  observations across users are independent and identically distributed; and\n4.  all metrics have finite variance.\n5.  you are running a two-sample t-test. If in practice you use [CUPED](https://docs.growthbook.io/statistics/cuped), your power will be higher. Use CUPED!\n\nFor a 2-sided test (all GrowthBook tests are 2-sided), power is the probability of rejecting the null hypothesis of no effect, given that a nonzero effect exists.  \nMathematically, **frequentist power** equals\n\nπ\\=1−Φ(Z1−α/2−Δσ^Δ)+Φ(Zα/2−Δσ^Δ)\\\\pi = 1 - \\\\Phi\\\\left(Z\\_{1-\\\\alpha/2}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right) + \\\\Phi(Z\\_{\\\\alpha/2} - \\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}).\n\nThe MDE is the smallest effect size for which nominal power (i.e., 80%) is achieved. In the 2-sided case there is no closed form solution. The **frequentist MDE** is the solution for Δ\\\\Delta when solving for π\\\\pi in the equation below:\n\nπ\\=1−Φ(Z1−α/2−Δσ^Δ).\\\\pi = 1 - \\\\Phi\\\\left(Z\\_{1-\\\\alpha/2}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right).\n\nInverting this equation requires some care, as the uncertainty estimate σ^Δ\\\\hat{\\\\sigma}\\_{\\\\Delta} depends upon Δ\\\\Delta. Details can be found [here](https://docs.growthbook.io/statistics/power-technical).\n\nTo estimate power under [sequential testing](https://docs.growthbook.io/statistics/sequential), we adjust the variance term σ^Δ2\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2} to account for sequential testing, and then input this adjusted variance into our power formula. We assume that you look at the data only once, so our power estimate below is a lower bound for the actual power under sequential testing. Otherwise we would have to make assumptions about the temporal correlation of the data generating process.\n\n### Bayesian implementation[​](#bayesian-implementation \"Direct link to Bayesian implementation\")\n\nFor Bayesian power analysis, we let users specify the prior distribution of the treatment effect (see [here](https://docs.growthbook.io/statistics/details#bayesian-engine) for guidance regarding prior selection). We then estimate Bayesian power, which is the probability that the (1−α)(1 - \\\\alpha) credible interval does not contain 0.\n\nAt GrowthBook, **Bayesian power** is\n\nπ\\=1−Φ(σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\]−Δσ^Δ2)+Φ(−σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\]−Δσ^Δ2).\\\\begin{align} \\\\begin{split} \\\\pi &= 1-\\\\Phi\\\\left( \\\\frac{ \\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\Delta} {\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}} \\\\right) \\\\\\\\&+\\\\Phi\\\\left( \\\\frac{ -\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\Delta} {\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}} \\\\right). \\\\end{split} \\\\end{align}\n\nConstructing the MDE is less straightforward, as MDEs are not well defined in Bayesian literature. We provide MDEs in Bayesian power analysis for customers that are used to conceptualizing MDEs and want to be able to leverage prior information in their analysis. We define the MDE as the minimum value of Δ\\\\Delta such that at least π\\\\pi power is achieved.\n\nThe **Bayesian MDE** is the solution for Δ\\\\Delta when solving for π\\\\pi in Equation 1. To find Δ\\\\Delta, we use a grid search.",
    "title": "Power Analysis | GrowthBook Docs",
    "description": "Power Analysis",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/self-host/env",
    "markdown": "# Environment Variables | GrowthBook Docs\n\nThe default configuration in GrowthBook is optimized for trying things out quickly on a local dev machine. Beyond that, you can customize behavior with Environment Variables.\n\n## Domains and Ports[​](#domains-and-ports \"Direct link to Domains and Ports\")\n\nThis is used to generate links to GrowthBook and enable CORS access to the API.\n\n*   **APP\\_ORIGIN** - default [http://localhost:3000](http://localhost:3000/)\n*   **API\\_HOST** - default [http://localhost:3100](http://localhost:3100/)\n\nIf you want to run GrowthBook on a different host than localhost, you need to add the above environment variables to your `docker-compose.yml` file.\n\n```\ngrowthbook:  ...  environment:    - APP_ORIGIN=http://<my ip>:3000    - API_HOST=http://<my ip>:3100\n```\n\nUnique ports on the same domain\n\nThe back-end and the front-end **must run on unique ports if on the same domain**.\n\nThe front-end has its own set of `/api` routes so currently we do not support running both the API and the front-end on the same port on the same domain.\n\nImportant\n\nIn order for authentication cookies to work correctly, both the app and api domains must be considered the \"same site\". They can be on different subdomains or ports, but the root domain must be the same.\n\n*   **Works:** `gb.example.com` and `gb-api.example.com`\n    \n*   **Breaks:** `gb.frontend.com` and `gb.backend.com`\n    \n\nIf you need to change the ports on your local dev environment (e.g. if `3000` is already being used), you need to update the above variables AND change the port mapping in `docker-compose.yml`:\n\n```\ngrowthbook:  ports:    - \"4000:3000\" # example: use 4000 instead of 3000 for the app    - \"4100:3100\" # example: use 4100 instead of 3100 for the api  ...  environment:    - APP_ORIGIN=http://<my ip or url>:4000    - API_HOST=http://<my ip or url>:4100\n```\n\n### Production Settings[​](#production-settings \"Direct link to Production Settings\")\n\n*   **NODE\\_ENV** - Set to \"production\" to turn on additional optimizations and API request logging\n*   **MONGODB\\_URI** - The full MongoDB connection string. Alternatively you can specify the following environment variables from which we will compose the full connection string like so `mongodb://${MONGODB_USERNAME}:${MONGODB_PASSWORD}@${MONGODB_HOSTNAME}:${MONGODB_PORT}/${MONGODB_DBNAME}${MONGODB_EXTRA_ARGS}`:\n    *   **MONGODB\\_USERNAME** - Username for MongoDB\n    *   **MONGODB\\_PASSWORD** - Password for MongoDB\n    *   **MONGODB\\_HOST** - Host name of MongoDB excluding port, e.g. `some.host.com`\n    *   **MONGODB\\_PORT** - Port to use for MongoDB (defaults to `27017`)\n    *   **MONGODB\\_DBNAME** - Database name of growthbook database (defaults to `growthbook`)\n    *   **MONGODB\\_EXTRA\\_ARGS** - Optional set of extra arguments for MongoDB connection string (defaults to `?authSource=admin`)\n*   **JWT\\_SECRET** - Auth signing key (use a long random string)\n*   **ENCRYPTION\\_KEY** - Data source credential encryption key (use a long random string)\n\nIf you change the `ENCRYPTION_KEY`, you will need to migrate any existing data sources using the following script:\n\n```\n# If you didn't have an ENCRYPTION_KEY before, leave OLD_KEY blank belowdocker-compose run growthbook yarn migrate-encryption-key OLD_KEY\n```\n\nImportant\n\nWhen using GrowthBook in production, it is important to change the\n\n`NODE_ENV` to to \"production\" and change the `JWT_SECRET` to a random string. Using the `production` node environment and the default `JWT_SECRET` will throw an error.\n\n## Email SMTP Settings[​](#email-smtp-settings \"Direct link to Email SMTP Settings\")\n\nThis is required in order to send experiment alerts, team member invites, and reset password emails.\n\n*   **EMAIL\\_ENABLED** (\"true\" or \"false\")\n*   **EMAIL\\_HOST**\n*   **EMAIL\\_PORT**\n*   **EMAIL\\_HOST\\_USER**\n*   **EMAIL\\_HOST\\_PASSWORD**\n*   **EMAIL\\_FROM**\n\n## Google OAuth Settings[​](#google-oauth-settings \"Direct link to Google OAuth Settings\")\n\nOnly required if using Google Analytics as a data source\n\n*   **GOOGLE\\_OAUTH\\_CLIENT\\_ID**\n*   **GOOGLE\\_OAUTH\\_CLIENT\\_SECRET**\n\n## File Uploads[​](#file-uploads \"Direct link to File Uploads\")\n\nThe **UPLOAD\\_METHOD** environment variable controls where to store uploaded files and screenshots. The supported values are `local`, `s3`, and `google-cloud`.\n\n### local[​](#local \"Direct link to local\")\n\nThis is the default value. Uploads are stored in the GrowthBook docker container at `/usr/local/src/app/packages/back-end/uploads`. In production, you should mount a volume here to persist uploads across container restarts.\n\n### s3[​](#s3 \"Direct link to s3\")\n\nStore uploads in an AWS S3 bucket.\n\n*   **S3\\_BUCKET**\n*   **S3\\_REGION** (defaults to `us-east-1`)\n*   **S3\\_DOMAIN** (defaults to `https://${S3_BUCKET}.s3.amazonaws.com/`)\n*   **AWS\\_ACCESS\\_KEY\\_ID** (not required when deployed to AWS with an instance role)\n*   **AWS\\_SECRET\\_ACCESS\\_KEY** (not required when deployed to AWS with an instance role)\n*   **USE\\_FILE\\_PROXY** set this to true for access to uploads to proxy through your self hosted server allowing you to keep the bucket private.\n\n### google-cloud[​](#google-cloud \"Direct link to google-cloud\")\n\nStore uploads in a Google Cloud Storage bucket.\n\n*   **GCS\\_BUCKET\\_NAME**\n*   **GCS\\_DOMAIN** (defaults to `https://storage.googleapis.com/${GCS_BUCKET_NAME}/`)\n*   **GOOGLE\\_APPLICATION\\_CREDENTIALS** (not required when deployed to GCP with an instance service account)\n*   **USE\\_FILE\\_PROXY** set this to true for access to uploads to proxy through your self hosted server allowing you to keep the bucket private.\n\n## Enterprise Settings[​](#enterprise-settings \"Direct link to Enterprise Settings\")\n\nSome features in self-hosted GrowthBook are only available with a commercial license key. You can get a trial Enterprise key from your self-hosted version of GrowthBook, or reach out to [sales@growthbook.io](mailto:sales@growthbook.io) to learn more.\n\n### License Keys[​](#license-keys \"Direct link to License Keys\")\n\nIf you have a license key, you can activate it in GrowthBook two different ways:\n\n1.  Navigate to **Settings** → **General** and look for the License section of the page. There you can input or edit your license key string. (Recommended)\n2.  Alternately, set the environment variable `LICENSE_KEY` to your license key string. If using Docker, go to _docker-compose.yml_ and add the variable to the _growthbook_ → _environment_ section.\n\nnote\n\nIf you are running your application behind a firewall you will need to whitelist `75.2.109.47` to be able to have your license verified. If this is an issue, contact [sales@growthbook.io](mailto:sales@growthbook.io) for an air-gapped license.\n\nThe GrowthBook app will check with the license server daily to get the latest license information. When doing so, it will send the following data to our license server:\n\n*   **A hash of each user's email** - this is used to deduplicate users across multiple installations (dev, prod, etc.) in order to figure out how many seats are being used.\n*   **The git sha and date of the installation** - this is used to determine when GrowthBook can delete deprecated features, determine who to send upgrade notices to, provides helpful information for debugging, etc.\n*   **A list of which data source types are being used, a list of which event trackers are being used, and a list of SDK languages being used** - these help GrowthBook know how much usage the various data sources, event trackers, and sdk languages are getting so we can prioritize work.\n\nIf you recently upgraded your license and do not want to wait a day to get the new license information you can go to **Settings** → **General** and look for the License section of the page and click the Refresh button. If you have a multi-org installation and are a super admin you must instead navigate to the **Settings** → **Admin** page, find the license section and click the refresh button there.\n\n### Enterprise SSO[​](#enterprise-sso \"Direct link to Enterprise SSO\")\n\nTo enable SSO on your self-hosted GrowthBook instance, you will need an active license key (see above section), and then you may add the SSO settings for your provider. You can find the instructions on how to setup SSO for GrowthBook with most common providers on our [SSO instructions page](https://docs.growthbook.io/sso). The JSON object with the settings will need to be JSON encoded and then set to the environment variable `SSO_CONFIG`.\n\n### Multi-org[​](#multi-org \"Direct link to Multi-org\")\n\nIf your company has two or more largely independent products (e.g. Google has Search and Google Docs), you can set up multiple [organizations](https://docs.growthbook.io/using/growthbook-best-practices#organizations) per product. The following env vars control multi-org settings:\n\n*   **IS\\_MULTI\\_ORG** - This defaults to `false`. Set this to true if you want to enable multiple organizations.\n*   **ALLOW\\_SELF\\_ORG\\_CREATION** - This defaults to `false`. Set this to true to allow any users to create new organizations.\n*   **SHOW\\_MULTI\\_ORG\\_SELF\\_SELECTOR** - This defaults to `true`. It allows all users to see a list of all organizations they can join. Upon selecting an organization, users will either automatically join it (if using SSO and [self-join](https://docs.growthbook.io/account/user-permissions#self-registering-and-automatic-approvals) is enabled for that organization) or require an admin's approval.\n\n## Observability (OpenTelemetry)[​](#observability-opentelemetry \"Direct link to Observability (OpenTelemetry)\")\n\nThe GrowthBook API is instrumented with OpenTelemetry to publish observability metrics, traces, and logs.\n\nTo enable, you must change the Docker CMD from the default `yarn start` to `yarn start:with-tracing`.\n\nThe standard [OTEL\\_\\* Environment Variables](https://opentelemetry.io/docs/concepts/sdk-configuration/) are supported, such as `OTEL_SERVICE_NAME` and `OTEL_EXPORTER_OTLP_ENDPOINT`.\n\n## Other Settings[​](#other-settings \"Direct link to Other Settings\")\n\n*   **EXPERIMENT\\_REFRESH\\_FREQUENCY** - Default update schedule for experiment results. Update when stale for X hours (default `6`).\n*   **QUERY\\_CACHE\\_TTL\\_MINS** - How long (in minutes) to cache and re-use SQL query results (default `60`)\n*   **DEFAULT\\_CONVERSION\\_WINDOW\\_HOURS** - How many hours after being put into an experiment does a user have to convert. Can be overridden on a per-metric basis. (default `72`)\n*   **DISABLE\\_TELEMETRY** - We collect anonymous telemetry data to help us improve GrowthBook. Set to \"true\" to disable.\n*   **STORE\\_SEGMENTS\\_IN\\_MONGO** - If using the config.yml file, set to `true` if you want to store segments in Mongo. This is also useful if you have existing segments stored in Mongo that you need to access. When set, GrowthBook will ignore segments in the config.yml file and only use Segments stored in Mongo.\n*   **CDN\\_HOST** - When set, this will update the implementation instructions within GrowthBook to override the `API_HOST` in cases where a CDN is used.\n*   **EXPRESS\\_TRUST\\_PROXY\\_OPTS** - Express' [trust proxy](https://expressjs.com/en/5x/api.html#trust.proxy.options.table) setting value. Supports boolean (true/false), string values, and integer values for trusting the _n_th hop from the front-facing proxy server as the client. Leavy empty or specify `false` to use Express' default behavior. If you are running GrowthBook behind a proxy or load balancer, this is required to track the correct user IP for audit log events.",
    "title": "Environment Variables | GrowthBook Docs",
    "description": "Learn how to set environment variables for your self hosted version of GrowthBook",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/edge/lambda",
    "markdown": "# Lambda@Edge Edge App & SDK\n\nalpha\n\nOur Lambda@Edge implementation is in **alpha**. If you experience any issues, let us know either on [Slack](https://slack.growthbook.io/) or [create an issue](https://github.com/growthbook/growthbook-proxy/issues).\n\n## Overview[​](#overview \"Direct link to Overview\")\n\nGrowthBook currently supports two levels of integration with most edge workers, including Lambda@Edge:\n\n1.  Our turnkey Edge App\n    \n    *   Automatically run server-side or hybrid [Visual Experiments](https://docs.growthbook.io/app/visual) without redraw flicker.\n    *   Automatically run server-side or hybrid [URL Redirect Experiments](https://docs.growthbook.io/app/url-redirects) without flicker or delay.\n    *   Optionally inject the JavaScript SDK with hydrated payload, allowing the front-end to pick up where the edge left off without any extra network requests. We use an enhanced version of our [HTML Script Tag](https://docs.growthbook.io/lib/script-tag) for this purpose.\n2.  Support for edge apps using our JavaScript SDK\n    \n\n## References[​](#references \"Direct link to References\")\n\n*   Our Lambda@Edge SDK repository, which supports the above use cases, is [here](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-lambda)\n*   You may find it useful to review our [JavaScript SDK](https://docs.growthbook.io/lib/js). Many of the concepts which apply to both on-edge and injected frontend SDKs are based on our JS SDK.\n\n## Worker Configuration[​](#worker-configuration \"Direct link to Worker Configuration\")\n\ntip\n\nThis tutorial assumes some familiarity with building and deploying AWS Lambda@Edge applications. You can get up to speed by following the AWS [Tutorial: Create a basic Lambda@Edge function](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-edge-how-it-works-tutorial.html) guide.\n\nNote that our Edge App responds directly to a `viewer-request` without forwarding to an origin; interaction with CloudFront is minimal (Step 2 in the AWS tutorial).\n\nYou may either use our turnkey Edge App for Lambda@Edge or build your own app from scratch using our JavaScript SDK.\n\n## Turnkey Edge App[​](#turnkey-edge-app \"Direct link to Turnkey Edge App\")\n\nOur Edge App runs as a smart proxy layer between your application and your end users. In absence of Visual or URL Redirect experiments, the Edge App will simply proxy the user request to your site and return the response, optionally injecting a fully-bootstrapped JavaScript SDK onto the rendered HTML page. If the request URL matches an Visual or URL Redirect experiment and the targeting conditions are satisfied, the Edge App may also perform one or more URL redirects behind the scenes (the public-facing URL does not change) and/or mutate the DOM for Visual Experiments.\n\nURL Redirects on edge\n\nThe Edge App defaults to running URL Redirect Experiments in the browser only. This is because edge redirects load a separate page's content without altering the URL. After the redirect, some sites may experience problems with loading assets or endpoints with relative paths.\n\nYou can enable URL Redirects on edge by setting environment variable `RUN_URL_REDIRECT_EXPERIMENTS` ([see below](#environment-variables)).\n\nWe will assume that you have a basic Lambda@Edge application set up, and that it is configured to respond to viewer requests. Note that our Edge App will not attempt to reach your CF cache nor origin and instead will fetch/proxy to your web server during the _viewer request / response_ lifecycle. Therefore a minimal CloudFront setup is advised.\n\nOnce your application is set up, simply install the SDK and implement our custom request handler.\n\n### Install the SDK[​](#install-the-sdk \"Direct link to Install the SDK\")\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save @growthbook/edge-lambda\n```\n\n### Implement the Edge App request handler[​](#implement-the-edge-app-request-handler \"Direct link to Implement the Edge App request handler\")\n\nA basic implementation of our Edge App only requires a few lines of code:\n\n```\nimport { handleRequest } from \"@growthbook/edge-lambda\";export async function handler(event, ctx, callback) {  // Manually build your environment:  const env = buildEnv();  // Specify additional edge endpoint information:  env.host = \"www.mysite.io\";  // Uncomment for ease of testing locally - returns response instead of using callback():  // env.returnResponse = true;  handleRequest(event, callback, env);}function buildEnv() {  // todo: define environment variables here}\n```\n\n### Configure the Edge App[​](#configure-the-edge-app \"Direct link to Configure the Edge App\")\n\nUse a combination of environment variables and optional runtime configuration to add required fields and to customize the Edge App behavior.\n\n#### Environment variables[​](#environment-variables \"Direct link to Environment variables\")\n\nUnfortunately Lambda@Edge does not have native support for environment variables. You will need to implement your own mechanism to build an `Env` environment (a TypeScript interface is exported in `\"@growthbook/edge-lambda\"`). You will need to inject your environment variables into the handler either directly into your codebase or at compile time. Our `buildEnv()` method is a placeholder for your preferred mechanism.\n\nTip (for a subset of use cases)\n\nWe do offer a utility function called `mapHeadersToConfigEnv(req, originType=\"custom\", prefix=\"x-env-\")` (exported from `\"@growthbook/edge-lambda\"`) that can build a valid `Env` environment from custom CF origin headers. However this is only useful if your app is set up to reach your origin server through CF (this is not the default behavior of our Edge App).\n\nAdd these required fields, at minimum, to your environment variables:\n\n```\nfunction buildEnv() {  return {    // required fields:    PROXY_TARGET: \"https://internal.mysite.io\",  // The non-edge URL to your website    GROWTHBOOK_API_HOST: \"https://cdn.growthbook.io\",    GROWTHBOOK_CLIENT_KEY: \"sdk-abc123\",    GROWTHBOOK_DECRYPTION_KEY: \"key_abc123\",  // Only include for encrypted SDK Connections  };}\n```\n\nYou may want to further customize the app. Here is a list of common customization variables:\n\n```\n# Disable or change the rendering behavior of Visual Experiments:# ==========RUN_VISUAL_EDITOR_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"everywhere\"# URL Redirect Experiments are disabled on edge by default. Because the URL does not change, some sites# may experience problems with loading assets or endpoints with relative paths:# ==========RUN_URL_REDIRECT_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"browser\"RUN_CROSS_ORIGIN_URL_REDIRECT_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"browser\"# Mutate browser URL via window.history.replaceState() to reflect the new URL:INJECT_REDIRECT_URL_SCRIPT=\"true\"  # default \"true\".# Do not inject a bootstrapped JavaScript SDK onto the page:# ==========DISABLE_INJECTIONS=\"true\"  # default \"false\"# Customize the edge or injected browser SDK behavior:# ==========ENABLE_STREAMING=\"true\"  # default \"false\". Streaming SSE updates on browser.ENABLE_STICKY_BUCKETING=\"true\"  # default \"false\". Use cookie-based sticky bucketing on edge and browser.\n```\n\n#### Runtime configuration[​](#runtime-configuration \"Direct link to Runtime configuration\")\n\nYou may want to provide context to your edge app at runtime rather than using environment variables. For example, if you have additional [targeting attributes](https://docs.growthbook.io/lib/js#attributes) available, you may inject them by modifying your request handler code:\n\n```\nimport { handleRequest } from \"@growthbook/edge-lambda\";import { getCookies } from \"./helpers\";export async function handler(event, ctx, callback) {  const env = buildEnv();  env.host = \"www.mysite.io\";  // example getCookies method  const cookie = getCookies(event);  const config = {    attributes: {      userType: cookie[\"userId\"] ? \"logged in\" : \"anonymous\"    }  };  handleRequest(event, callback, env, config);}\n```\n\n#### More customization options[​](#more-customization-options \"Direct link to More customization options\")\n\nFor a full list of customizations, view our vendor-agnostic [Edge Utility repository](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-utils) .\n\n### Tracking Experiment Views[​](#tracking-experiment-views \"Direct link to Tracking Experiment Views\")\n\nRunning A/B tests requires a [tracking callback](https://docs.growthbook.io/lib/js#experimentation-ab-testing). Our turnkey Edge App defaults to using built-in front-end tracking. The tracking call automatically integrates with Segment.io, GA4, and Google Tag Manager by using the mechanism outlined in our [HTML Script Tag](https://docs.growthbook.io/lib/script-tag#tracking-experiment-views). In order to do this, the app keeps track of tracking calls triggered on edge and injects them into the front-end SDK to be automatically triggered on page load.\n\nYou may wish to either customize front-end tracking or switch to edge tracking (or use both concurrently if running hybrid edge + front-end experiments).\n\nWhy might you be interested in tracking on edge? Tracking on an edge or backend environment allows you to ensure the callback is fired before any differentiation across variations, eliminating experimental bias. While not eliminating this risk, the default injected front-end tracking introduced by our Edge App does reduce this risk relative to solely using a front-end SDK.\n\nTo change the front-end tracking callback, set the `GROWTHBOOK_TRACKING_CALLBACK` to your custom tracking JS code:\n\n```\n# todo: replace with your own tracking libraryGROWTHBOOK_TRACKING_CALLBACK=\"(experiment, results) => { console.log('browser tracking callback', {experiment, results}); }\"\n```\n\nTo track on edge, you must inject your own tracking callback into the edge request handler code. Any experiments that run on edge will use the edge tracking callback and not the front-end callback (hybrid edge + front-end experiments being an exception):\n\n```\nimport { handleRequest } from \"@growthbook/edge-lambda\";export async function handler(event, ctx, callback) {  const env = buildEnv();  env.host = \"www.mysite.io\";  const config = {    edgeTrackingCallback: (experiment, results) => {      // todo: replace with your tracking library      console.log('edge tracking callback', {experiment, results});    }  };  handleRequest(event, callback, env, config);}\n```\n\n### Targeting Attributes[​](#targeting-attributes \"Direct link to Targeting Attributes\")\n\nThe following targeting attributes are set automatically by the Edge App.\n\n*   `id` - creates a long-lived `gbuuid` cookie if it doesn't exist already\n*   `url`\n*   `path`\n*   `host`\n*   `query`\n*   `pageTitle`\n*   `deviceType` - either `mobile` or `desktop`\n*   `browser` - one of `chrome`, `edge`, `firefox`, `safari`, or `unknown`\n*   `utmSource`\n*   `utmMedium`\n*   `utmCampaign`\n*   `utmTerm`\n*   `utmContent`\n\nYou can customize both the primary identifier name (`id`) and cookie name (`gbuuid`) by setting the `UUID_KEY` and `UUID_COOKIE_NAME` environment variables respectively.\n\nAs shown in the [runtime configuration](#runtime-configuration) section above, you can also pass custom attributes via runtime config. You can also skip automatic attribute generation and rely solely on custom attributes by setting the environment variable `SKIP_AUTO_ATTRIBUTES=\"true\"`.\n\n### Routing[​](#routing \"Direct link to Routing\")\n\nBy default, the Edge App will process all `GET` requests (other HTTP verbs are proxied through without running through our app logic).\n\nIt is generally preferable to configure your routing rules outside of our Edge App when possible. For instance, you may only want to invoke the Edge App at `https://yourdomain.io/landing-page`.\n\nThere may be situations when you will need to provide finer-grained routing / URL targeting rules within our Edge App. You will need to include a JSON encoded string of route rules in your `ROUTES` environment variable.\n\nFor instance, you may want to do a proxy pass-through (do not process) for `mysite.io/account/*` or `mysite.io/settings/*`. Your routes may look like this:\n\n```\nROUTES='[{ \"pattern\":\"mysite.io/account/*\", \"behavior\":\"proxy\" }, { \"pattern\":\"mysite.io/settings/*\", \"behavior\":\"proxy\" }]'\n```\n\nA route uses the following interface, with many of the properties being optional:\n\n```\n{  pattern: string;  type?: \"regex\" | \"simple\";  // default: \"simple\"  behavior?: \"intercept\" | \"proxy\" | \"error\";  // default: \"intercept\"  includeFileExtensions?: boolean;  // Include requests to filenames like \"*.jpg\". default: false (pass-through).  statusCode?: number; // Alter the status code (default is 404 when using \"error\")  body?: string; // Alter the body (for setting an error message body)}\n```\n\nWhen multiple routes are included in your `ROUTES` array, only the first match is used.\n\n### Cookie Policy and GDPR[​](#cookie-policy-and-gdpr \"Direct link to Cookie Policy and GDPR\")\n\nBy default, the Edge App will persist a random unique identifier in a first-party cookie named `gbuuid`. Its purpose is to provide a consistent user experience to your visitors by preventing them from being re-bucketed into different A/B test variations. It follows the same mechanism as discussed in our [HTML Script Tag docs](https://docs.growthbook.io/lib/script-tag#cookie-policy-and-gdpr).\n\n#### Delay Storing the Cookie Until Consent is Granted[​](#delay-storing-the-cookie-until-consent-is-granted \"Direct link to Delay Storing the Cookie Until Consent is Granted\")\n\nIf you must delay persisting the `gbuuid` cookie until a user consents, you can set the environment variable `NO_AUTO_COOKIES=\"true\"`.\n\nThis will still generate a UUID for the user, but will not persist it. That means, if the user refreshes the page, they will have a new random UUID generated.environment\n\nYou have the option to manually persist this cookie at any time, for example when a user grants consent on your cookie banner. All you need to do is fire this custom event from javascript on the rendered page:\n\n```\ndocument.dispatchEvent(new CustomEvent(\"growthbookpersist\"));\n```\n\nnote\n\nIf you are using Sticky Bucketing, a persistent sticky bucket assignments cookie will automatically be generated. If you require user permission before writing cookies, you should:\n\n*   Either do not enable Sticky Bucketing on edge (do not use `ENABLE_STICKY_BUCKETING`)\n*   Or only enable Sticky Bucketing per each user via runtime configuration. (only pass `config.enableStickyBucketing: true` if user has consented — identifiable by checking for presence of the `gbuuid` cookie).\n\n## Manual SDK Integration on Edge[​](#manual-sdk-integration-on-edge \"Direct link to Manual SDK Integration on Edge\")\n\nYou may be interested in building your own edge application using the GrowthBook SDK and not using our turnkey Edge App. Or you may want to do custom feature flagging on specific routes while running our Edge App on other routes.\n\nTo use the GrowthBook on edge, simply include our standard [JavaScript SDK](https://docs.growthbook.io/lib/js) (`@growthbook/growthbook` NPM package).\n\n```\nimport { GrowthBook, setPolyfills } from \"@growthbook/growthbook\";export async function handler(event, ctx, callback) {  // 1. Init the GrowthBook SDK and choose an optional caching strategy  // A. Use the KV as a managed payload store to eliminate SDK requests to the GrowthBook API entirely.  // Requires setting up an SDK Webhook.  const payload = await getPayloadFromProvider(); // not implemented, build your own  const growthbook = new GrowthBook(gbContext);  await growthbook.init({ payload: payload });  // B. Or provide a KV cache layer so that the GrowthBook SDK doesn't need to make as many requests  // to the GrowthBook API. No SDK Webhook needed.  const localStoragePolyfill = getLocalStoragePolyfill(env); // not implemented, build your own  setPolyfills({ localStorage: localStoragePolyfill });  await growthbook.init();  // 2. Start feature flagging  if (growthbook.isOn(\"my-feature\")) {    const resp = { status: \"200\", body: \"<h1>foo</h1>\" };    callback(null, resp);  } else {    const resp = { status: \"200\", body: \"<h1>bar</h1>\" };    callback(null, resp);  }}\n```\n\n## Payload Caching via edge datastore[​](#payload-caching-via-edge-datastore \"Direct link to Payload Caching via edge datastore\")\n\nBy default, the Edge App will make a network request to the GrowthBook API on each user request in order to fetch the current feature and experiment values. This is a blocking call that delays page delivery. There is an in-memory short-lived cache layer on this call, but it won't always protect you.\n\nIf you have access to a distributed key-value store such as DynamoDB, you can likely overcome this problem. There are 2 levels of key-value integration available:\n\n1.  You can either completely eliminate the blocking call to the GrowthBook API by implementing a GrowthBook-to-edge-keyval push model via **SDK Webhooks**.\n2.  Alternatively, you can eliminate most of these network requests by using an edge key-val store as a just-in-time payload cache.\n\nYou can also use these strategies in your own manual SDK integration.\n\nWe are unable to offer specific guidance about how to configure or connect to your key-val store because there are many possible network configurations and data stores within an AWS edge application.\n\n### Configuring a SDK Webhook[​](#configuring-a-sdk-webhook \"Direct link to Configuring a SDK Webhook\")\n\nFor key-val stored payloads (1), we eliminate network requests from edge to GrowthBook by using a GrowthBook SDK Webhook to push the SDK payload to the key-val store on change.\n\n1.  Create an [SDK Webhook](https://docs.growthbook.io/app/webhooks/sdk-webhooks) on the same SDK Connection that you are using for edge integration.\n2.  Set the **Endpoint URL** to your key-val store's REST API endpoint, if available. You may need to build your own private Lambda endpoint to handle the webhook, in which case webhook verification may be important.\n3.  Change the **Method** to `PUT` (or whichever verb is required by your endpoint).\n4.  Set the **Payload format** to \"SDK Payload only\".\n\nNow whenever feature and experiment values change, your edge worker will have immediate access to the latest values. You can also test the webhook by using the \"Test Webhook\" button on the SDK Connection page.",
    "title": "Lambda@Edge Edge App & SDK | GrowthBook Docs",
    "description": "GrowthBook SDK for Lambda@Edge",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/lib/edge/other",
    "markdown": "# GrowthBook Edge App for other edge providers\n\n## Overview[​](#overview \"Direct link to Overview\")\n\nGrowthBook currently supports two levels of integration with most edge workers:\n\n1.  Our turnkey Edge App\n    \n    *   Automatically run server-side or hybrid [Visual Experiments](https://docs.growthbook.io/app/visual) without redraw flicker.\n    *   Automatically run server-side or hybrid [URL Redirect Experiments](https://docs.growthbook.io/app/url-redirects) without flicker or delay.\n    *   Optionally inject the JavaScript SDK with hydrated payload, allowing the front-end to pick up where the edge left off without any extra network requests. We use an enhanced version of our [HTML Script Tag](https://docs.growthbook.io/lib/script-tag) for this purpose.\n2.  Support for edge apps using our JavaScript SDK\n    \n\n## References[​](#references \"Direct link to References\")\n\n*   Our base Edge App repository, which supports the above use cases, is [here](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-utils)\n*   You may find it useful to review our [JavaScript SDK](https://docs.growthbook.io/lib/js). Many of the concepts which apply to both on-edge and injected frontend SDKs are based on our JS SDK.\n\n## Turnkey Edge App[​](#turnkey-edge-app \"Direct link to Turnkey Edge App\")\n\nOur Edge App runs as a smart proxy layer between your application and your end users. In absence of Visual or URL Redirect experiments, the Edge App will simply proxy the user request to your site and return the response, optionally injecting a fully-bootstrapped JavaScript SDK onto the rendered HTML page. If the request URL matches an Visual or URL Redirect experiment and the targeting conditions are satisfied, the Edge App may also perform one or more URL redirects behind the scenes (the public-facing URL does not change) and/or mutate the DOM for Visual Experiments.\n\nURL Redirects on edge\n\nThe Edge App defaults to running URL Redirect Experiments in the browser only. This is because edge redirects load a separate page's content without altering the URL. After the redirect, some sites may experience problems with loading assets or endpoints with relative paths.\n\nYou can enable URL Redirects on edge by setting environment variable `RUN_URL_REDIRECT_EXPERIMENTS` ([see below](#environment-variables)).\n\nSetting up our turnkey Edge App is usually simple for most JavaScript-based edge workers.\n\nIn this guide we do not discuss bootstrapping your project, but rather how to implement our Edge App once you have a basic edge worker environment set up.\n\n### Install the SDK[​](#install-the-sdk \"Direct link to Install the SDK\")\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save @growthbook/edge-utils\n```\n\n### Implement the Edge App request handler[​](#implement-the-edge-app-request-handler \"Direct link to Implement the Edge App request handler\")\n\nA basic implementation of our Edge App only requires a few lines of code. Your implementation however will be vendor specific:\n\n```\nimport { edgeApp, getConfig, defaultContext } from \"@growthbook/edge-utils\";// Build a request handler// note: we assume availability of `env` (environment variables)export async function handler(request, env) {  const context = await init(env);  return edgeApp(context, request);}// Build context for the appfunction init(env) {  // Automatically parse environment variables into app context  const context = defaultContext;  context.config = getConfig(env);  context.helpers = {    // define utility functions for request/response manipulation  };  return context;}\n```\n\nYou will need to write our own set of helper methods (`context.helpers`) that correspond to how your edge provider handles various request and response utilities.\n\n### Define helper methods[​](#define-helper-methods \"Direct link to Define helper methods\")\n\nYou will need to build helper methods based on the following interfaces:\n\n```\n{  // Get the full URL from the user request  getRequestURL?: (req: Req) => string;  // Get the request method (GET, POST, etc)  getRequestMethod?: (req: Req) => string;  // Get a specific header from the request  getRequestHeader?: (req: Req, key: string) => string | undefined;  // Construct or prepare a response for sending to the client  // note: For many vendors, this function should build a new response object  sendResponse?: (    ctx: Context<Req, Res>,    res?: Res, // Only needed for engines where res already exists    headers?: Record<string, any>,    body?: string,    cookies?: Record<string, string>, // Optionally use ctx.helpers.setCookie(resp, key, cookies[key]) to assign.    status?: number,  ) => unknown;  // Fetch an external resource from the edge app  // note: For many vendors, you can ignore ctx  fetch?: (ctx: Context<Req, Res>, url: string) => Promise<Res>;  // For sending a pass-through response without Edge App interception  // note: For many vendors, this will map directly to helpers.fetch  proxyRequest?: (    ctx: Context<Req, Res>,    req: Req,    res?: Res,    next?: any,  ) => Promise<unknown>;  // Get cookie from request (for UUID and StickyBucketing persistence)  getCookie?: (req: Req, key: string) => string;  // Set a cookie on response (unused unless you choose to persist on edge)  setCookie?: (res: Res, key: string, value: string) => void;}\n```\n\nYou may reference example implementations of these methods in our [Cloudflare repository](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-cloudflare/src/helpers.ts) .\n\n### Configure the Edge App[​](#configure-the-edge-app \"Direct link to Configure the Edge App\")\n\nUse a combination of environment variables and optional runtime configuration to add required fields and to customize the Edge App behavior.\n\n#### Environment variables[​](#environment-variables \"Direct link to Environment variables\")\n\nAdd these required fields, at minimum, to your environment variables:\n\n```\nPROXY_TARGET=\"https://internal.mysite.io\"  # The non-edge URL to your websiteGROWTHBOOK_API_HOST=\"https://cdn.growthbook.io\"GROWTHBOOK_CLIENT_KEY=\"sdk-abc123\"GROWTHBOOK_DECRYPTION_KEY=\"key_abc123\"  # Only include for encrypted SDK Connections\n```\n\nYou may want to further customize the app. Here is a list of common customization variables:\n\n```\n# Disable or change the rendering behavior of Visual Experiments:# ==========RUN_VISUAL_EDITOR_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"everywhere\"# URL Redirect Experiments are disabled on edge by default. Because the URL does not change, some sites# may experience problems with loading assets or endpoints with relative paths:# ==========RUN_URL_REDIRECT_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"browser\"RUN_CROSS_ORIGIN_URL_REDIRECT_EXPERIMENTS=\"everywhere\"|\"edge\"|\"browser\"|\"skip\"  # default: \"browser\"# Mutate browser URL via window.history.replaceState() to reflect the new URL:INJECT_REDIRECT_URL_SCRIPT=\"true\"  # default \"true\".# Do not inject a bootstrapped JavaScript SDK onto the page:# ==========DISABLE_INJECTIONS=\"true\"  # default \"false\"# Customize the edge or injected browser SDK behavior:# ==========ENABLE_STREAMING=\"true\"  # default \"false\". Streaming SSE updates on browser.ENABLE_STICKY_BUCKETING=\"true\"  # default \"false\". Use cookie-based sticky bucketing on edge and browser.\n```\n\n#### Runtime configuration[​](#runtime-configuration \"Direct link to Runtime configuration\")\n\nYou may want to provide context to your edge app at runtime rather than using environment variables. For example, if you have additional [targeting attributes](https://docs.growthbook.io/lib/js#attributes) available, you may inject them by modifying your request handler code:\n\n```\nimport { edgeApp, getConfig } from \"@growthbook/edge-utils\";export async function handler(request, env) {  const context = await init(env);  const userId = context.helpers.getCookie(request, \"userId\");  context.config.attributes.userType = userId ? \"logged in\" : \"anonymous\";  return edgeApp(context, request);}\n```\n\n#### More customization options[​](#more-customization-options \"Direct link to More customization options\")\n\nFor a full list of customizations, view our [Edge Utility repository](https://github.com/growthbook/growthbook-proxy/tree/main/packages/lib/edge-utils) .\n\n### Tracking Experiment Views[​](#tracking-experiment-views \"Direct link to Tracking Experiment Views\")\n\nRunning A/B tests requires a [tracking callback](https://docs.growthbook.io/lib/js#experimentation-ab-testing). Our turnkey Edge App defaults to using built-in front-end tracking. The tracking call automatically integrates with Segment.io, GA4, and Google Tag Manager by using the mechanism outlined in our [HTML Script Tag](https://docs.growthbook.io/lib/script-tag#tracking-experiment-views). In order to do this, the app keeps track of tracking calls triggered on edge and injects them into the front-end SDK to be automatically triggered on page load.\n\nYou may wish to either customize front-end tracking or switch to edge tracking (or use both concurrently if running hybrid edge + front-end experiments).\n\nWhy might you be interested in tracking on edge? Tracking on an edge or backend environment allows you to ensure the callback is fired before any differentiation across variations, eliminating experimental bias. While not eliminating this risk, the default injected front-end tracking introduced by our Edge App does reduce this risk relative to solely using a front-end SDK.\n\nTo change the front-end tracking callback, set the `GROWTHBOOK_TRACKING_CALLBACK` to your custom tracking JS code:\n\n```\n# todo: replace with your own tracking libraryGROWTHBOOK_TRACKING_CALLBACK=\"(experiment, results) => { console.log('browser tracking callback', {experiment, results}); }\"\n```\n\nTo track on edge, you must inject your own tracking callback into the edge request handler code. Any experiments that run on edge will use the edge tracking callback and not the front-end callback (hybrid edge + front-end experiments being an exception):\n\n```\nimport { edgeApp, getConfig } from \"@growthbook/edge-utils\";export async function handler(request, env) {  const context = await init(env);  context.config.edgeTrackingCallback = (experiment, results) => {    // todo: replace with your tracking library    console.log('edge tracking callback', {experiment, results});  }  return edgeApp(context, request);}\n```\n\n### Targeting Attributes[​](#targeting-attributes \"Direct link to Targeting Attributes\")\n\nThe following targeting attributes are set automatically by the Edge App.\n\n*   `id` - creates a long-lived `gbuuid` cookie if it doesn't exist already\n*   `url`\n*   `path`\n*   `host`\n*   `query`\n*   `pageTitle`\n*   `deviceType` - either `mobile` or `desktop`\n*   `browser` - one of `chrome`, `edge`, `firefox`, `safari`, or `unknown`\n*   `utmSource`\n*   `utmMedium`\n*   `utmCampaign`\n*   `utmTerm`\n*   `utmContent`\n\nYou can customize both the primary identifier name (`id`) and cookie name (`gbuuid`) by setting the `UUID_KEY` and `UUID_COOKIE_NAME` environment variables respectively.\n\nAs shown in the [runtime configuration](#runtime-configuration) section above, you can also pass custom attributes via runtime config. You can also skip automatic attribute generation and rely solely on custom attributes by setting the environment variable `SKIP_AUTO_ATTRIBUTES=\"true\"`.\n\n### Routing[​](#routing \"Direct link to Routing\")\n\nBy default, the Edge App will process all `GET` requests (other HTTP verbs are proxied through without running through our app logic).\n\nIt is generally preferable to configure your routing rules outside of our Edge App. For instance, you may only want to invoke the Edge App at `https://yourdomain.io/landing-page`.\n\nThere may be situations when you will need to provide finer-grained routing / URL targeting rules within our Edge App. You will need to include a JSON encoded string of route rules in your `ROUTES` environment variable.\n\nFor instance, you may want to do a proxy pass-through (do not process) for `mysite.io/account/*` or `mysite.io/settings/*`. Your routes may look like this:\n\n```\nROUTES='[{ \"pattern\":\"mysite.io/account/*\", \"behavior\":\"proxy\" }, { \"pattern\":\"mysite.io/settings/*\", \"behavior\":\"proxy\" }]'\n```\n\nA route uses the following interface, with many of the properties being optional:\n\n```\n{  pattern: string;  type?: \"regex\" | \"simple\";  // default: \"simple\"  behavior?: \"intercept\" | \"proxy\" | \"error\";  // default: \"intercept\"  includeFileExtensions?: boolean;  // Include requests to filenames like \"*.jpg\". default: false (pass-through).  statusCode?: number; // Alter the status code (default is 404 when using \"error\")  body?: string; // Alter the body (for setting an error message body)}\n```\n\nWhen multiple routes are included in your `ROUTES` array, only the first match is used.\n\n### Cookie Policy and GDPR[​](#cookie-policy-and-gdpr \"Direct link to Cookie Policy and GDPR\")\n\nBy default, the Edge App will persist a random unique identifier in a first-party cookie named `gbuuid`. Its purpose is to provide a consistent user experience to your visitors by preventing them from being re-bucketed into different A/B test variations. It follows the same mechanism as discussed in our [HTML Script Tag docs](https://docs.growthbook.io/lib/script-tag#cookie-policy-and-gdpr).\n\n#### Delay Storing the Cookie Until Consent is Granted[​](#delay-storing-the-cookie-until-consent-is-granted \"Direct link to Delay Storing the Cookie Until Consent is Granted\")\n\nIf you must delay persisting the `gbuuid` cookie until a user consents, you can set the environment variable `NO_AUTO_COOKIES=\"true\"`.\n\nThis will still generate a UUID for the user, but will not persist it. That means, if the user refreshes the page, they will have a new random UUID generated.environment\n\nYou have the option to manually persist this cookie at any time, for example when a user grants consent on your cookie banner. All you need to do is fire this custom event from javascript on the rendered page:\n\n```\ndocument.dispatchEvent(new CustomEvent(\"growthbookpersist\"));\n```\n\nnote\n\nIf you are using Sticky Bucketing, a persistent sticky bucket assignments cookie will automatically be generated. If you require user permission before writing cookies, you should:\n\n*   Either do not enable Sticky Bucketing on edge (do not use `ENABLE_STICKY_BUCKETING`)\n*   Or only enable Sticky Bucketing per each user via runtime configuration. (only pass `config.enableStickyBucketing: true` if user has consented — identifiable by checking for presence of the `gbuuid` cookie).\n\n## Manual SDK Integration on Edge[​](#manual-sdk-integration-on-edge \"Direct link to Manual SDK Integration on Edge\")\n\nYou may be interested in building your own edge application using the GrowthBook SDK and not using our turnkey Edge App. Or you may want to do custom feature flagging on specific routes while running our Edge App on other routes.\n\nTo use the GrowthBook on edge, simply include our standard [JavaScript SDK](https://docs.growthbook.io/lib/js) (`@growthbook/growthbook` NPM package).\n\n```\nimport { GrowthBook, setPolyfills } from \"@growthbook/growthbook\";export default {  async fetch(request) {    // 1. Init the GrowthBook SDK and choose an optional caching strategy    // A. Use the KV as a managed payload store to eliminate SDK requests to the GrowthBook API entirely.    // Requires setting up an SDK Webhook.    const payload = await getPayloadFromProvider(env); // not implemented, build your own    const growthbook = new GrowthBook(gbContext);    await growthbook.init({ payload: payload });    // B. Or provide a KV cache layer so that the GrowthBook SDK doesn't need to make as many requests    // to the GrowthBook API. No SDK Webhook needed.    const localStoragePolyfill = getLocalStoragePolyfill(env); // not implemented, build your own    setPolyfills({ localStorage: localStoragePolyfill });    await growthbook.init();    // 2. Start feature flagging    if (growthbook.isOn(\"my-feature\")) {      return new Response(\"<h1>foo</h1>\");    }    return new Response(\"<h1>bar</h1>\");  }}\n```\n\n## Payload Caching via edge datastore[​](#payload-caching-via-edge-datastore \"Direct link to Payload Caching via edge datastore\")\n\nBy default, the Edge App will make a network request to the GrowthBook API on each user request in order to fetch the current feature and experiment values. This is a blocking call that delays page delivery. There is an in-memory short-lived cache layer on this call, but it won't always protect you.\n\nIf you have access to a distributed key-val store on your edge, you can likely overcome this problem. There are 2 levels of key-val integration available:\n\n1.  You can either completely eliminate the blocking call to the GrowthBook API by implementing a GrowthBook-to-edge-keyval push model via **SDK Webhooks**.\n2.  Alternatively, you can eliminate most of these network requests by using an edge key-val store as a just-in-time payload cache.\n\nYou can also use these strategies in your own manual SDK integration.\n\nWe are unable to offer specific guidance about how to configure or connect to your key-val store because the details vary heavily by vendor. For inspiration, you can see how we've addressed key-val implementation with Cloudflare Workers in our [Cloudflare docs](https://docs.growthbook.io/lib/edge/cloudflare#payload-caching-with-cloudflare-kv-store).\n\n### Configuring a SDK Webhook[​](#configuring-a-sdk-webhook \"Direct link to Configuring a SDK Webhook\")\n\nFor key-val stored payloads (1), we eliminate network requests from edge to GrowthBook by using a GrowthBook SDK Webhook to push the SDK payload to the key-val store on change.\n\n1.  Create an [SDK Webhook](https://docs.growthbook.io/app/webhooks/sdk-webhooks) on the same SDK Connection that you are using for edge integration.\n2.  Set the **Endpoint URL** to your key-val provider's REST API endpoint. However, not all edge vendors will have a public REST endpoint for setting the key-val cache. You may need to build your own endpoint to handle the webhook, in which case webhook verification may be important.\n3.  Change the **Method** to `PUT` (or whichever verb is required by your vendor or endpoint).\n4.  Add any vendor-specific authorization headers. This may not be required depending on your specific vendor:\n\n```\n{  \"Authorization\": \"Bearer YOUR_REST_API_TOKEN\"}\n```\n\n5.  Set the **Payload format** to \"SDK Payload only\".\n\nNow whenever feature and experiment values change, your edge worker will have immediate access to the latest values. You can also test the webhook by using the \"Test Webhook\" button on the SDK Connection page.",
    "title": "GrowthBook Edge App for other edge providers | GrowthBook Docs",
    "description": "GrowthBook SDK for other edge providers",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/self-host/config",
    "markdown": "# Config.yml | GrowthBook Docs\n\nIn order to use GrowthBook, you need to connect to a data source and define metrics (and optionally dimensions and segments). There are two ways to do this.\n\nThe default way to define these is by filling out forms in the GrowthBook UI, which persists them to MongoDB.\n\nThe other option is to create a `config.yml` file. In the Docker container, this file must be placed at `/usr/local/src/app/config/config.yml`. Below is an example file:\n\n```\ndatasources:  warehouse:    type: postgres    name: Main Warehouse    # Connection params (different for each type of data source)    params:      host: localhost      port: 5432      user: root      password: ${POSTGRES_PW} # use env for secrets      database: growthbook    # How to query the data (same for all SQL sources)    settings:      userIdTypes:        - userIdType: user_id          description: Logged-in user id        - userIdType: anonymous_id          description: Anonymous visitor id      queries:        exposure:          - id: user_id            name: Logged-in user experiments            userIdType: user_id            query: >              SELECT                user_id,                received_at as timestamp,                experiment_id,                variation_id,                context_location_country as country              FROM                experiment_viewed            dimensions:              - country        identityJoins:          - ids: [\"user_id\", \"anonymous_id\"]            query: SELECT user_id, anonymous_id FROM identifiesmetrics:  signups:    type: binomial    name: Sign Ups    userIdType: user_id    datasource: warehouse    sql: SELECT user_id, anonymous_id, received_at as timestamp FROM signupsdimensions:  country:    name: Country    userIdType: user_id    datasource: warehouse    sql: SELECT user_id, country as value from userssegments:  visitors:    name: Visitors in the US    datasource: warehouse    sql: |-      SELECT userid as user_id, timestamp as date      FROM users      WHERE country='US'    userIdType: user_id\n```\n\n### Data Source Connection Params[​](#data-source-connection-params \"Direct link to Data Source Connection Params\")\n\nThe contents of the `params` field for a data source depends on the type.\n\nAs seen in the example above, you can use environment variable interpolation for secrets (e.g. `${POSTGRES_PW}`).\n\n#### Redshift, ClickHouse, Postgres, and Mysql (or MariaDB)[​](#redshift-clickhouse-postgres-and-mysql-or-mariadb \"Direct link to Redshift, ClickHouse, Postgres, and Mysql (or MariaDB)\")\n\n```\ntype: postgres # or \"redshift\" or \"mysql\" or \"clickhouse\"params:  host: localhost  port: 5432  user: root  password: password  database: growthbook\n```\n\nRedshift and Postgres also support optional params to force an SSL connection:\n\n```\ntype: postgresparams:  ...  ssl: true  # Omit the below fields to use the default trusted CA from Mozilla  caCert: \"-----BEGIN CERTIFICATE-----\\n...\"  clientCert: \"-----BEGIN CERTIFICATE-----\\n...\"  clientKey: \"-----BEGIN CERTIFICATE-----\\n...\"\n```\n\n#### Snowflake[​](#snowflake \"Direct link to Snowflake\")\n\n```\ntype: snowflakeparams:  account: abc123.us-east-1  username: user  password: password  database: GROWTHBOOK  schema: PUBLIC  role: SYSADMIN  warehouse: COMPUTE_WH\n```\n\n#### BigQuery[​](#bigquery \"Direct link to BigQuery\")\n\nYou must first create a Service Account in Google with the following roles:\n\n*   Data Viewer\n*   Metadata Viewer\n*   Job User\n\nIf you want GrowthBook to auto-discover credentials from environment variables or GCP metadata, use the following:\n\n```\ntype: bigqueryparams:  authType: auto\n```\n\nIf you prefer to pass in credentials directly, you can use this format instead:\n\n```\ntype: bigqueryparams:  projectId: my-project  clientEmail: growthbook@my-project.iam.gserviceaccount.com  privateKey: -----BEGIN PRIVATE KEY-----\\nABC123\\n-----END PRIVATE KEY-----\\n\n```\n\n#### Presto and TrinoDB[​](#presto-and-trinodb \"Direct link to Presto and TrinoDB\")\n\n```\ntype: prestoparams:  engine: presto # or \"trino\"  host: localhost  port: 8080  username: user  password: password  catalog: growthbook  schema: growthbook\n```\n\n#### Databricks[​](#databricks \"Direct link to Databricks\")\n\n```\ntype: databricksparams:  host: dbc-123-abc.cloud.databricks.com  port: 443  path: /sql/1.0/warehouses/abc123  token: dapi123abc\n```\n\n#### AWS Athena[​](#aws-athena \"Direct link to AWS Athena\")\n\nIf you want GrowthBook to auto-discover credentials from environment variables or instance metadata, use the following format:\n\n```\ntype: athenaparams:  authType: auto  region: us-east-1  database: growthbook  bucketUri: aws-athena-query-results-growthbook  workGroup: primary\n```\n\nIf you prefer to specify access key and secret directly instead, use the following format:\n\n```\ntype: athenaparams:  accessKeyId: AKIA123  secretAccessKey: AB+cdef123  region: us-east-1  database: growthbook  bucketUri: aws-athena-query-results-growthbook  workGroup: primary\n```\n\n#### Mixpanel[​](#mixpanel \"Direct link to Mixpanel\")\n\nMixpanel access requires a service account.\n\n```\ntype: mixpanelparams:  username: growthbook  secret: abc123  projectId: my-project\n```\n\n#### Google Analytics[​](#google-analytics \"Direct link to Google Analytics\")\n\nUnfortunately at this time there is no way to connect to Google Analytics in `config.yml`. You must connect via the GrowthBook UI, where we use OAuth and a browser redirect.\n\n### Data Source Settings[​](#data-source-settings \"Direct link to Data Source Settings\")\n\nThe settings tell GrowthBook how to query your data.\n\n#### SQL Data Sources[​](#sql-data-sources \"Direct link to SQL Data Sources\")\n\nFor data sources that support SQL, there are a couple queries you need to define plus an optional Python script to run queries from inside a Jupyter notebook:\n\n```\ntype: postgresparams: ...settings:  # The different types of supported identifiers  userIdTypes:    - userIdType: user_id      description: Logged-in user id    - userIdType: anonymous_id      description: Anonymous visitor id  queries:    # These queries returns experiment variation assignment info    # One row every time a user was put into an experiment    exposure:      - id: user_id        name: Logged-in user experiments        userIdType: user_id        query: >          SELECT            user_id,            received_at as timestamp,            experiment_id,            variation_id,            context_location_country as country          FROM            experiment_viewed        # List additional columns you selected in your experimentsQuery        # Can use these to drill down into experiment results        dimensions:          - country    # These optional queries map between different types of identifiers    identityJoins:      - ids: [\"user_id\", \"anonymous_id\"]        query: SELECT user_id, anonymous_id FROM identifies  # Used when exporting experiment results to a Jupyter notebook  # Define a `runQuery(sql)` function that returns a pandas data frame  notebookRunQuery: >    import os    import psycopg2    import pandas as pd    from sqlalchemy import create_engine, text    # Use environment variables or similar for passwords!    password = os.getenv('POSTGRES_PW')    connStr = f'postgresql+psycopg2://user:{password}@localhost'    dbConnection = create_engine(connStr).connect();    def runQuery(sql):      return pd.read_sql(text(sql), dbConnection)\n```\n\n#### Mixpanel[​](#mixpanel-1 \"Direct link to Mixpanel\")\n\nMixpanel does not support SQL, so we query the data using JQL instead. In order to do this, we just need to know a few event names and properties:\n\n```\ntype: mixpanelparams: ...settings:  events:    experimentEvent: Viewed Experiment    experimentIdProperty: experiment_id    variationIdProperty: variation_id\n```\n\n### Metrics[​](#metrics \"Direct link to Metrics\")\n\nMetrics are what your experiments are trying to improve (or at least not hurt).\n\nBelow is an example of all the possible settings with comments:\n\n```\nname: Revenue per User# Required. The data distribution and unittype: revenue # or \"binomial\" or \"count\" or \"duration\"# Required. Must match one of the datasources defined in config.ymldatasource: warehouse# Description supports full markdowndescription: This metric is **super** important# For inverse metrics, the goal is to DECREASE the value (e.g. \"page load time\")inverse: false# When ignoring nulls, only users who convert are included in the denominator# Setting to true here would change from \"Revenue per User\" to \"Average Order Value\"ignoreNulls: false# Which identifier types are supported for this metricuserIdTypes:  - user# Any user with a higher metric amount will be capped at this value# In this case, if someone bought a $10,000 order, it would only be counted as $100# Note: you can also specify `type: percentile` and a `value` between 0 and 1# for percentile based cappingcappingSettings:  type: absolute  value: 100# Control the date window for your metricswindowSettings:  type: conversion  # Ignore all conversions within the first X hours of being put into an experiment.  delayHours: 0  # After the conversion delay (if any), wait this many hours for a conversion event.  windowValue: 72  windowUnit: hours# The risk thresholds for the metric.# If risk < $winRisk, it is highlighted green.# If risk > $loseRisk, it is highlighted red.# Otherwise, it's highlighted yellow.winRisk: 0.0025loseRisk: 0.0125# Min number of conversions for an experiment variation before we reveal resultsminSampleSize: 150# The \"suspicious\" threshold. If the percent change for a variation is above this,#   we hide the result and label it as suspicious.# Default 0.5 = 50% changemaxPercentChange: 0.50# The minimum change required for a result to considered a win or loss. If the percent# change for a variation is below this threshold, we will consider an otherwise conclusive# test a draw.# Default 0.005 = 0.5% changeminPercentChange: 0.005# Overrides for  Regression Adjustment (CUPED) at the metric level. To enforce these fields# you must set regressionAdjustmentOverride to true.# Leave the settings out of your config file to accept your organization level settings; or# set regressionAdjustmentOverride to false.regressionAdjustmentOverride: trueregressionAdjustmentEnabled: trueregressionAdjustmentDays: 14# Arbitrary tags used to group related metricstags:  - revenue  - core\n```\n\nIn addition to all of those settings, you also need to tell GrowthBook how to query the metric.\n\n#### SQL Data Sources[​](#sql-data-sources-1 \"Direct link to SQL Data Sources\")\n\nFor SQL data sources, you just need to specify a single query. Depending on the other settings, the columns you need to select may differ slightly:\n\n*   `timestamp` - always required\n*   `value` - required unless type is set to \"binomial\"\n\nPlus, you need to select a column for each identifier type the metric supports.\n\nA full example:\n\n```\ntype: durationuserIdTypes:  - user_id  - anonymous_idsql: >  SELECT    created_at as timestamp,    user_id,    anonymous_id,    duration as value  FROM    requests\n```\n\nAnd a simple binomial metric that only supports logged-in users:\n\n```\ntype: binomialuserIdTypes:  - usersql: SELECT user_id, timestamp FROM orders\n```\n\nBy default, if a user has more than 1 non-binomial metric row during an experiment, we sum the values together. You can override this behavior with the `aggregation` setting:\n\n```\ntype: durationuserIdTypes:  - user_idsql: >  SELECT    created_at as timestamp,    user_id,    duration as value  FROM    requestsaggregation: MAX(value) # use MAX instead of the default SUM\n```\n\n#### Mixpanel[​](#mixpanel-2 \"Direct link to Mixpanel\")\n\nFor Mixpanel, instead of SQL we just need some info about what events and properties to use.\n\nHere's a simple binomial metric:\n\n```\ntype: binomial# The event nametable: Purchased\n```\n\nAny metric can have optional conditions as well:\n\n```\ntype: binomial# The event nametable: Purchased# Only include events which pass these conditionsconditions:  - column: category # property    operator: \"=\" # \"=\", \"!=\", \">\", \"<\", \"<=\", \">=\", \"~\", \"!~\"    value: clothing\n```\n\nFor count, duration, and revenue metrics, it will count the number of events per user by default:\n\n```\ntype: count# Event name to counttable: Page views\n```\n\nYou can instead specify a javascript expression for the value of the event. By default, it will sum these values for each user:\n\n```\n# A \"Revenue per user\" metrictype: revenue# The event nametable: Purchases# The metric value that will be summedcolumn: event.properties.grand_total\n```\n\nIf you don't want to sum, you can also provide a custom aggregation method that reduces an array of `values` into a single number (or null). For example, here's a metric that counts the number of unique files downloaded per user\n\n```\ntype: count# The event nametable: PDF Downloads# The \"value\" of the metric (the file name)column: event.properties.filename# The aggregation operation (number of unique values)aggregation: new Set(values).size\n```\n\n#### Allow Creating Metrics in the UI[​](#allow-creating-metrics-in-the-ui \"Direct link to Allow Creating Metrics in the UI\")\n\nBy default, when using `config.yml`, it's not possible to create metrics via the GrowthBook UI. Everything must be done directly in the `config.yml` file.\n\nThere is an optional environment variable you can specify to change this behavior:\n\n```\nALLOW_CREATE_METRICS=true\n```\n\nThis will let you create new metrics via the UI. Metrics defined in `config.yml` will be marked as \"Official\" and not editable, while ones defined via the UI will be editable.\n\n### Dimensions[​](#dimensions \"Direct link to Dimensions\")\n\nDimensions let you drill down into your experiment results. They are currently only supported for SQL data sources.\n\nDimensions only have 4 properties: name, datasource, userIdType, and SQL. The SQL query must return two columns: the identifier type and `value`.\n\nExample:\n\n```\nname: Country# Must match one of the datasources defined in config.ymldatasource: warehouseuserIdType: user_idsql: SELECT user_id, country as value FROM users\n```\n\n### Segments[​](#segments \"Direct link to Segments\")\n\nSegments define important groups of users - for example, \"annual subscribers\" or \"left-handed people from France.\" They are currently only supported for SQL data sources.\n\nSegments only have 4 properties: name, datasource, userIdType, and SQL. The SQL query must return two columns: the identifier type and `date`.\n\nExample:\n\n```\nname: US Page Visitors# Must match one of the datasources defined in config.ymldatasource: warehouseuserIdType: user_idsql: SELECT user_id, timestamp as date FROM pages WHERE country='US'\n```\n\nSegment support for the config.yml was added in February 2023. If you are using the config.yml file and have previously created segments stored in MongoDB, in order to access, you will need to add the environment variable `STORE_SEGMENTS_IN_MONGO` or update your config.yml file to include these segments.\n\n### Organization Settings[​](#organization-settings \"Direct link to Organization Settings\")\n\nIn addition to the above, you can also control some organization settings from `config.yml`.\n\nBelow are all of the currently supported settings:\n\n```\norganization:  settings:    # Enable creating experiments using the Visual Editor (beta).  Default `false`    visualEditorEnabled: true    # Minimum experiment length (in days) when importing past experiments. Default `6`    pastExperimentsMinLength: 3    # Number of days of historical data to use when analyzing metrics    # (must be between 1 and 400, default `90`)    metricAnalysisDays: 90    # The min percent of users exposed to multiple variations in an    # experiment before we start warning you (between 0 and 1, defaults to `0.01`)    multipleExposureMinPercent: 0.01    # Whether Regression Adjustment (CUPED) should be on or off by default how many    # days to use. Can be overridden in your metric definitions if you wish.    regressionAdjustmentEnabled: true    regressionAdjustmentDays: 14    # When we should auto-update experiment results    updateSchedule:      type: stale      hours: 6\n```\n\nThe `updateSchedule` setting has 3 types of values:\n\n*   Never update automatically\n    \n    ```\n    updateSchedule:  type: never\n    ```\n    \n*   Update if data is X hours stale\n    \n    ```\n    updateSchedule:  type: stale  hours: 6\n    ```\n    \n*   Update on a fixed Cron schedule\n    \n    ```\n    updateSchedule:  type: cron  cron: \"0 */6 * * *\"\n    ```",
    "title": "Config.yml | GrowthBook Docs",
    "description": "Adjust the configuration of the GrowthBook platform through Config.yml",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/app/webhooks/sdk-webhooks",
    "markdown": "# SDK Webhooks | GrowthBook Docs\n\nGrowthBook has SDK-based webhooks that trigger a script on your server whenever something changes within GrowthBook which will affect that SDK.\n\n## Adding a Webhook[​](#adding-a-webhook \"Direct link to Adding a Webhook\")\n\nWhen logged into GrowthBook as an admin, navigate to **SDK Connections** .\n\nUnder the SDK Webhooks section you can add a webhook endpoint and select with method you would like to be notified with `POST, PUT, GET, DELETE, PURGE`.\n\nOnce a SDK webhook is created you will be able to view the secret and when the last time it was fired as well as if there was an error.\n\n### VPCs and Firewalls[​](#vpcs-and-firewalls \"Direct link to VPCs and Firewalls\")\n\nIf your webhook endpoint is behind a firewall and you are using GrowthBook Cloud, make sure to whitelist the ip address `52.70.79.40`.\n\n## Verify Signatures[​](#verify-signatures \"Direct link to Verify Signatures\")\n\nSDK Webhook payloads are signed with a shared secret so you can verify they actually came from GrowthBook.\n\n### Standard Webhooks[​](#standard-webhooks \"Direct link to Standard Webhooks\")\n\nWe follow the [Standard Webhooks](https://www.standardwebhooks.com/) specification, so you can use any of their SDKs to verify our webhook signatures.\n\n```\nimport { Webhook } from \"standardwebhooks\"const wh = new Webhook(base64_secret);wh.verify(webhook_body, webhook_headers);\n```\n\n### Custom Verification[​](#custom-verification \"Direct link to Custom Verification\")\n\nWebhook requests sent to your endpoint include 3 headers:\n\n*   `webhook-id` - The unique id for this event\n*   `webhook-timestamp` - The unix integer timestamp of the event\n*   `webhook-signature` - The signature (format described below)\n\nTo create the signature, we concatenate the `webhook-id`, the `webhook-timestamp`, and the body contents, all separated by dots (`.`). Then, we create an HMAC SHA-256 hash of this using the shared secret.\n\nWhat we set in the `webhook-signature` header is the hashing algorithm identifier for HMAC SHA-256 (`v1`), followed by a comma (`,`), followed by the base64-encoded hash from above. For example:\n\n```\nv1,K5oZfzN95Z9UVu1EsfQmfVNQhnkZ2pj9o9NDN/H/pI4=\n```\n\nYou can find the shared secret via **SDK Configuration → SDK Connections**, choosing the connection, and viewing your webhook's details.\n\nHere is example code in NodeJS for verifying the signature. Other languages should be similar:\n\n```\nconst crypto = require(\"crypto\");const express = require(\"express\");const bodyParser = require(\"body-parser\");// Retrieve from GrowthBook SDK connection settingsconst GROWTHBOOK_WEBHOOK_SECRET = \"wk_123A5341464B3A13\";const port = 1337;const app = express();app.post(  \"/webhook\",  bodyParser.raw({ type: \"application/json\" }),  (req, res) => {    // If there is no body sent, use an empty string to compute the signature    const body = req.body || \"\";    // Get the request headers    const id = req.get(\"webhook-id\");    const timestamp = req.get(\"webhook-timestamp\");    const rawSignature = req.get(\"webhook-signature\") || \"\";    // Remove the \"v1,\" prefix from the signature for comparison    const signature = rawSignature.split(\",\")[1];    if (id && timestamp && signature) {      // Base64 encode the secret      const base64_secret = btoa(GROWTHBOOK_WEBHOOK_SECRET);      // Compute the signature      const computed = crypto        .createHmac(\"sha256\", base64_secret)        .update(`${id}.${timestamp}.${body}`)        .digest(\"base64\");      if (!crypto.timingSafeEqual(Buffer.from(computed), Buffer.from(signature))) {        throw new Error(\"Invalid signature\");      }    } else {      throw new Error(\"Missing signature headers\");    }    const parsedBody = JSON.parse(body);    const payload = parsedBody.data.payload;    // TODO: Do something with the webhook data    // Make sure to respond with a 200 status code    res.status(200).send(\"\");  });app.listen(port, () => {  console.log(`Webhook endpoint listening on port ${port}`);});\n```\n\n## Errors and Retries[​](#errors-and-retries \"Direct link to Errors and Retries\")\n\nIf your endpoint returns any HTTP status besides `200`, the webhook will be considered failed.\n\nWebhooks are retried up to 2 additional times with an exponential back-off between attempts.\n\nYou can view the status of your webhooks in the GrowthBook app under **SDK Connections**.\n\n## Supported HTTP Methods[​](#supported-http-methods \"Direct link to Supported HTTP Methods\")\n\n*   **GET**\n*   **POST**\n*   **PUT**\n*   **DELETE**\n*   **PURGE**\n\n## Payload Format[​](#payload-format \"Direct link to Payload Format\")\n\nFor all methods other than `GET`, you may send a payload body. By default, webhooks will send in the \"Standard\" format.\n\n### Standard[​](#standard \"Direct link to Standard\")\n\nFollows the **Standard Webhooks** specification. Inludes a JSON-encoded SDK Payload in the `data.payload` field.\n\nExample payload:\n\n```\n{  \"type\": \"payload.changed\",  \"timestamp\": \"2024-04-03T01:54:20.449Z\",  \"data\": {    \"payload\": \"{\\\"features\\\":{\\\"my-feature\\\":{\\\"defaultValue\\\":true}}}\"  }}\n```\n\nThe `data.payload` object contains the exact JSON format that our SDKs are expecting. For example, you can pass this directly into the JavaScript SDK:\n\n```\nconst payload = JSON.parse(parsedBody.data.payload);const gb = new GrowthBook();await gb.init({  payload: payload});\n```\n\n### Standard (no SDK Payload)[​](#standard-no-sdk-payload \"Direct link to Standard (no SDK Payload)\")\n\nSame as above, but without the `data.payload` field.\n\nExample payload:\n\n```\n{  \"type\": \"payload.changed\",  \"timestamp\": \"2024-04-03T01:54:20.449Z\",}\n```\n\n### SDK Payload[​](#sdk-payload \"Direct link to SDK Payload\")\n\nSends the raw SDK Payload using the same format as our SDK features endpoint. This is usually the correct format if you are using the webhook to set a cache value or assigning key/value storage.\n\nExample payload:\n\n```\n{\"features\":{\"my-feature\":{\"defaultValue\":true}}}\n```",
    "title": "SDK Webhooks | GrowthBook Docs",
    "description": "SDK Webhooks trigger every time your SDK Payload changes.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/app/webhooks/global-sdk-webhooks",
    "markdown": "# Global SDK Webhooks | GrowthBook Docs\n\nnote\n\nGlobal SDK Webhooks are only available for self-hosted GrowthBook installations.\n\nGlobal SDK Webhooks are just like [SDK Webhooks](https://docs.growthbook.io/app/webhooks/sdk-webhooks), but configured via environment variables instead of the GrowthBook UI.\n\nWhen any SDK Connection payloads changes in any organization, all of your Global SDK Webhooks will be triggered.\n\n## Setup[​](#setup \"Direct link to Setup\")\n\nDefine a `WEBHOOKS` environment variable as a JSON string of an array of global webhook objects.\n\nThe only required field for a global webhook is **`url`**. Here's a minimal example:\n\n```\n[{\"url\":\"https://example.com\"}]\n```\n\nThere are additional fields you can specify:\n\n*   **`signingKey`** (string) - Will be used to add a signature header that enables you to verify the webhook origin\n*   **`method`** (string) - One of `GET`, `PUT`, `POST`, `PURGE`, or `DELETE`. Defaults to `POST` if omitted\n*   **`headers`** (object) - Additional headers to add to the webhook request. Useful for adding auth headers for example. Default `{}`.\n*   **`payloadFormat`** (string) - How to format the body (ignored when method = \"GET\"). One of `standard`, `standard-no-payload`, `sdkPayload` or `none`. Defaults to `standard`. Read more about the different formats in the SDK Webhooks [Payload Format docs](https://docs.growthbook.io/app/webhooks/sdk-webhooks#payload-format).\n\n_Deprecated:_\n\n*   **`sendPayload`** (boolean) - Whether or not to include the full SDK Payload in the body. `true` maps to `payloadFormat = standard`; false maps to `payloadFormat = standard-no-payload`.\n\nHere's a full example using all of the fields:\n\n```\n[{\"url\":\"https://example.com\",\"signingKey\":\"abc123\",\"method\":\"PUT\",\"headers\":{\"X-Custom-Header\":\"foo\"},\"payloadFormat\":\"sdkPayload\"}]\n```\n\n## Verify Signatures[​](#verify-signatures \"Direct link to Verify Signatures\")\n\nIf you define a `signingKey`, you can use it to verify that webhooks are coming from GrowthBook.\n\n**See: [SDK Webhooks - Verify Signatures](https://docs.growthbook.io/app/webhooks/sdk-webhooks#verify-signatures)**\n\n## Using Webhook Payloads[​](#using-webhook-payloads \"Direct link to Using Webhook Payloads\")\n\nGlobal SDK Webhooks always include a special header (`webhook-sdk-key`), which contains the clientKey of the SDK Connection that triggered the payload.\n\nIf you specify `sendPayload: true`, you will also receive an SDK payload in the body. See [SDK Webhooks -> Sending Payload](https://docs.growthbook.io/app/webhooks/sdk-webhooks#sending-payload)\n\n## Errors and Retries[​](#errors-and-retries \"Direct link to Errors and Retries\")\n\nUnlike normal SDK Webhooks, Global SDK Webhooks are NOT retried on error.\n\nOn failure, they will output container logs as well as save them to the Mongo `sdkwebhooklogs` collection.",
    "title": "Global SDK Webhooks | GrowthBook Docs",
    "description": "Global SDK Webhooks capture SDK Payload changes across all SDK Connections.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/self-host/production",
    "markdown": "# Production | GrowthBook Docs\n\n## Production Best Practices\n\nWhen properly configured, a self-hosted GrowthBook deployment can scale to billions of requests per month.\n\nThe default settings in the `docker-compose` file are meant to get you up and running quickly on a local dev machine. There are a few things to keep in mind when deploying GrowthBook securely at scale in production.\n\n## Security[​](#security \"Direct link to Security\")\n\nThere are a number of best practices to keep your GrowthBook deployment secure.\n\n### Encryption Keys and Secrets[​](#encryption-keys-and-secrets \"Direct link to Encryption Keys and Secrets\")\n\nFirst, make sure you pick long, random strings for your encryption keys and secrets. Specifically, there are 3 environment variables that need to be configured:\n\n*   **NODE\\_ENV** - Set to `production` to turn on additional security checks and logging\n*   **JWT\\_SECRET** - Auth signing key (use a long random string)\n*   **ENCRYPTION\\_KEY** - Data source credential encryption key (use a long random string)\n\nIf you change the `ENCRYPTION_KEY`, you will need to migrate any existing data sources using the following script:\n\n```\n# If you didn't have an ENCRYPTION_KEY before, leave OLD_KEY blank belowdocker-compose run growthbook yarn migrate-encryption-key OLD_KEY\n```\n\n### Networking[​](#networking \"Direct link to Networking\")\n\nThe most secure thing you can do is to put your entire GrowthBook deployment behind a firewall and/or corporate VPN. This way, you can restrict access to only those who need to sign into the GrowthBook platform. This can drastically reduce the attack vector and serves as an important first layer of security.\n\nIf you are using GrowthBook to serve feature flags to client-side apps, you will need some way for your end users to download the feature flag payload outside of the firewall or VPN. There are a few secure approaches for this:\n\n1.  Use a [**GrowthBook Proxy**](https://docs.growthbook.io/self-host/proxy) server. This way, your main GrowthBook instance can remain on a private subnet and only the Proxy needs to be exposed to the internet. The Proxy has a very small attack surface compared to the full GrowthBook app.\n2.  Use a **CDN**. If you go this route, it's very important to only allow requests to the `/api/features/*` endpoint in your CDN. If you allow access to other endpoints (e.g. `/auth/*` or other API routes) you lose many of the benefits of a Firewall or VPN.\n3.  Use **SDK Webhooks** to send your feature payload to a publically accessible place (e.g. a public S3 bucket). This switches GrowthBook from a \"pull\" model to a \"push\" model and you no longer need to allow any incoming requests from users at all.\n\n### Authentication and Permissions[​](#authentication-and-permissions \"Direct link to Authentication and Permissions\")\n\nFor our Enterprise customers, we recommend using [SSO](https://docs.growthbook.io/sso) and [SCIM](https://docs.growthbook.io/integrations/scim) to authenticate with GrowthBook and manage permissions. This offloads access control and management to your existing identity management infrastructure and further reduces the possible attack surface.\n\nNo matter which authentication method you use, it's best to follow the **least access** principle. Admins can invite other users and grant permissions, so restrict this role to only the people who really need it. Read more about [permissions](https://docs.growthbook.io/account/user-permissions).\n\nWhen using our REST API, it's best to use **readonly** API keys when possible. When you need write access, using **Personal Access Tokens** is best since it inherits the permissions of the user who created it. Only use admin Secret Access Tokens as a last resort.\n\n### MongoDB[​](#mongodb \"Direct link to MongoDB\")\n\nSecuring MongoDB in production is its own topic entirely and outside the scope of GrowthBook. We recommend using a hosted solution such as [MongoDB Atlas](https://www.mongodb.com/atlas/database), which is secure by default.\n\nIf you do want to host MongoDB yourself in production, they have a [detailed guide](https://www.mongodb.com/docs/manual/administration/production-notes/) on their docs.\n\n## Email SMTP Settings[​](#email-smtp-settings \"Direct link to Email SMTP Settings\")\n\nConfiguring email is required in order to send experiment alerts, team member invites, and reset password emails.\n\n*   **EMAIL\\_ENABLED** (\"true\" or \"false\")\n*   **EMAIL\\_HOST**\n*   **EMAIL\\_PORT**\n*   **EMAIL\\_HOST\\_USER**\n*   **EMAIL\\_HOST\\_PASSWORD**\n*   **EMAIL\\_FROM**\n\n## File Uploads[​](#file-uploads \"Direct link to File Uploads\")\n\nGrowthBook lets users add Markdown comments throughout the app and these support image uploads.\n\nThe **UPLOAD\\_METHOD** environment variable controls where to store uploaded files and screenshots. The supported values are `local`, `s3`, and `google-cloud`.\n\n### local[​](#local \"Direct link to local\")\n\nThis is the default value. Uploads are stored in the GrowthBook docker container at `/usr/local/src/app/packages/back-end/uploads`. In production, you should mount a shared volume here to persist uploads across container restarts and ensure your horizontally scaled GrowthBook instances all share the same uploads directory.\n\n### s3[​](#s3 \"Direct link to s3\")\n\nStore uploads in an AWS S3 bucket.\n\n*   **S3\\_BUCKET**\n*   **S3\\_REGION** (defaults to `us-east-1`)\n*   **S3\\_DOMAIN** (defaults to `https://${S3_BUCKET}.s3.amazonaws.com/`)\n*   **AWS\\_ACCESS\\_KEY\\_ID** (not required when deployed to AWS with an instance role)\n*   **AWS\\_SECRET\\_ACCESS\\_KEY** (not required when deployed to AWS with an instance role)\n*   **USE\\_FILE\\_PROXY** set this to true for access to uploads to proxy through your self hosted server allowing you to keep the bucket private.\n\n### google-cloud[​](#google-cloud \"Direct link to google-cloud\")\n\nStore uploads in a Google Cloud Storage bucket.\n\n*   **GCS\\_BUCKET\\_NAME**\n*   **GCS\\_DOMAIN** (defaults to `https://storage.googleapis.com/${GCS_BUCKET_NAME}/`)\n*   **GOOGLE\\_APPLICATION\\_CREDENTIALS** (not required when deployed to GCP with an instance service account)\n*   **USE\\_FILE\\_PROXY** set this to true for access to uploads to proxy through your self hosted server allowing you to keep the bucket private.\n\n## Scaling[​](#scaling \"Direct link to Scaling\")\n\nGrowthBook instances are stateless and can be horizontally scaled behind a load balancer. We recommend each instance have at least 2GB of RAM and 1vCPU. You should run at least 3 instances at a time for maximum fault tolerance.\n\n### Serving Feature Flags[​](#serving-feature-flags \"Direct link to Serving Feature Flags\")\n\nHitting the GrowthBook instance directly from our SDKs can work fine at a small scale, but we recommend an additional layer for added scalability and fault tolerance. There are a few options for this:\n\n1.  Use a [**GrowthBook Proxy**](https://docs.growthbook.io/self-host/proxy) server. Each Proxy Server instance can easily handle thousands of requests per second. We recommend horizontally scaling these instances and configuring Redis to keep them in sync.\n    \n2.  Use a **CDN** in front of the `/api/features/*` endpoints. The response from GrowthBook contains cache headers by default that most CDNs will recognize without any custom configuration. You can tweak these cache settings with the following environment variables (all in seconds):\n    \n    *   `CACHE_CONTROL_MAX_AGE` (default `30`)\n    *   `CACHE_CONTROL_STALE_WHILE_REVALIDATE` (default `3600` = 1 hour)\n    *   `CACHE_CONTROL_STALE_IF_ERROR` (default `36000` = 10 hours)\n3.  Use **SDK Webhooks** to send your feature payload to a publically accessible place (e.g. an S3 bucket) and point the SDKs there instead. This bypasses the issue by switching GrowthBook from a \"pull\" model to a \"push\" model.\n    \n\n## Observability and Logging[​](#observability-and-logging \"Direct link to Observability and Logging\")\n\nThe GrowthBook API is instrumented with OpenTelemetry to publish observability metrics, traces, and logs.\n\nTo enable, you must change the Docker CMD from the default `yarn start` to `yarn start:with-tracing`.\n\nThe standard [OTEL\\_\\* Environment Variables](https://opentelemetry.io/docs/concepts/sdk-configuration/) are supported, such as `OTEL_SERVICE_NAME` and `OTEL_EXPORTER_OTLP_ENDPOINT`.\n\nIn addition to this, make sure to configure the **EXPRESS\\_TRUST\\_PROXY\\_OPTS** environment variable. It supports boolean (true/false), string values, and integer values for trusting the _n_th hop from the front-facing proxy server as the client. Leavy empty or specify `false` to use Express' default behavior. If you are running GrowthBook behind a proxy or load balancer, this is required to track the correct user IP for audit log events. Read more about this setting in [Express' documentation](https://expressjs.com/en/5x/api.html#trust.proxy.options.table).",
    "title": "Production | GrowthBook Docs",
    "description": "Best practices for running self-hosted GrowthBook securely at scale",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/app/webhooks/event-webhooks",
    "markdown": "# Event Webhooks | GrowthBook Docs\n\nGrowthBook has event-based webhooks that trigger a script on your server whenever something changes within GrowthBook.\n\n## Adding a Webhook[​](#adding-a-webhook \"Direct link to Adding a Webhook\")\n\nWhen logged into GrowthBook as an admin, navigate to **Settings → Webhooks**.\n\nThere you can add a webhook endpoint and select which events you want to be notified about.\n\n## Supported Event Types[​](#supported-event-types \"Direct link to Supported Event Types\")\n\nWe currently support the following event types:\n\n*   **feature.created**\n*   **feature.updated**\n*   **feature.deleted**\n*   **experiment.created**\n*   **experiment.updated**\n*   **experiment.deleted**\n*   **experiment.warning**\n\nThe new webhooks are still in beta and we are always updating the list of supported events.\n\n## HTTP parameters[​](#http-parameters \"Direct link to HTTP parameters\")\n\nWhen creating or updating a webhook, you can select which HTTP method should be used. Available methods are: `POST`, `PUT` or `PATCH`.\n\nYou can also add your own custom headers. The format of custom headers is a JSON object of the form:\n\n```\n{  [Header-Name]: \"Header Value\",  ...}\n```\n\n## Slack notifications[​](#slack-notifications \"Direct link to Slack notifications\")\n\nWebhooks can be used to send notifications to slack channels and users with much less overhead than setting up a whole slack integration!\n\nFirst, you need to follow the instruction from the [slack documentation](https://api.slack.com/messaging/webhooks) to setup your own slack application and webhooks.\n\nOnce you have setup your application on slack, you should be able to copy the application's webhook endpoint. You can then paste it as the endpoint URL of your webhook configuration on GrowthBook.\n\nNext, select the `Slack` payload. That's it, your endpoint is ready to send Slack notifications!\n\n## Discord notifications[​](#discord-notifications \"Direct link to Discord notifications\")\n\nDiscord notifications work the same way as Slack notifications. The only difference is that you need to follow the [discord documentation](https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks) on how to setup webhook for your discord server.\n\nYou can select which notifications should be sent to your webhook according to projects, tags or environments. When set, your webhook will only fire when events associated with the selected items are triggered. If unset, you webhook will fire on all events regardless of the given item.\n\nFor instance, if your webhook is configured to fire on `feature.created` events with `Project Apollo` as a project filter, only `feature.created` events related to `Project Apollo` (and any other selected project) will trigger your webhook. If the projects filter is empty, your webhook will fire for all `feature.created` events on any project.\n\n## Testing your webhook[​](#testing-your-webhook \"Direct link to Testing your webhook\")\n\nOnce your webhook is configured, you should be able to test it! Look for the `Test` button on the webhook's settings page. When clicked, a test event should be delivered to the configured endpoint.\n\nThis can be quite helpful to debug and confirm that all the webhook's parameters have been set correctly.\n\n## Examples[​](#examples \"Direct link to Examples\")\n\n*   [Web hooks implementation example](https://github.com/growthbook/examples/tree/main/webhooks-impl)\n\n## Errors and Retries[​](#errors-and-retries \"Direct link to Errors and Retries\")\n\nIf your endpoint returns any HTTP status besides `200`, the webhook will be considered failed.\n\nFailed webhooks are tried a total of 3 times using an exponential back-off between attempts.\n\nYou can view the status of your webhooks in the GrowthBook app under **Settings → Webhooks**.\n\n### VPCs and Firewalls[​](#vpcs-and-firewalls \"Direct link to VPCs and Firewalls\")\n\nIf your webhook endpoint is behind a firewall and you are using GrowthBook Cloud, make sure to whitelist the ip address `52.70.79.40`.\n\n## Verify Signatures[​](#verify-signatures \"Direct link to Verify Signatures\")\n\nWebhook payloads are signed with a shared secret so you can verify they actually came from GrowthBook. The signature is passed in a `X-GrowthBook-Signature` header.\n\nYou can find the signature of a given webhook on its settings page. Look for a random string starting with `ewhk_...`.\n\nHere is example code in NodeJS for verifying the signature. Other languages should be similar:\n\n```\nconst crypto = require(\"crypto\");const express = require(\"express\");const bodyParser = require(\"body-parser\");// Retrieve from GrowthBook settingsconst GROWTHBOOK_WEBHOOK_SECRET = \"abc123\";const port = 1337;const app = express();app.post(  \"/webhook\",  bodyParser.raw({ type: \"application/json\" }),  (req, res) => {    const payload = req.body;    const sig = req.get(\"X-GrowthBook-Signature\");    const computed = crypto      .createHmac(\"sha256\", GROWTHBOOK_WEBHOOK_SECRET)      .update(req.body)      .digest(\"hex\");    if (!crypto.timingSafeEqual(Buffer.from(computed), Buffer.from(sig))) {      throw new Error(\"Signatures do not match!\");    }    const data = JSON.parse(payload);    // TODO: Do something with the webhook data    // Make sure to respond with a 200 status code    res.status(200).send(\"\");  });app.listen(port, () => {  console.log(`Webhook endpoint listening on port ${port}`);});\n```\n\n## SDK Webhooks (deprecated)[​](#sdk-webhooks-deprecated \"Direct link to SDK Webhooks (deprecated)\")\n\nGrowthBook has another type of webhook, meant specifically to keep SDKs up-to-date with the latest feature flag states. These have been deprecated in favor of SDK Connections and the GrowthBook Proxy Server. The payload for these legacy webhooks are described below for reference.\n\n### Payload[​](#payload \"Direct link to Payload\")\n\nSDK Webhooks will do a `POST` to the endpoint you provide. The body is a JSON object containing feature definitions in the same format that SDKs are expecting.\n\nHere's an example payload:\n\n```\n{  \"timestamp\": 1625098156,  \"features\": {    \"feature1\": {      \"defaultValue\": true    }  }}\n```\n\nThe `features` field has one entry per feature definition. Features can have the following properties:\n\n*   **defaultValue**\n*   **rules\\[\\]** - Array of feature rules\n    *   **condition** - A JSON condition using MongoDB query syntax\n    *   **force** - Force a specific value, takes precedence over all other rules besides `condition`\n    *   **variations\\[\\]** - Run an experiment and randomly assign one of the specified variations\n    *   **key** - When running an experiment, this is the experiment key that will be passed to the tracking callback function\n    *   **weights\\[\\]** - Determines how traffic is split between variations in an experiment\n    *   **coverage** - Specifies what sampling rate (0 to 1) to use for including users in an experiment. A rate of `1` means everyone is included. A rate of `0` means no one is.",
    "title": "Event Webhooks | GrowthBook Docs",
    "description": "Event Webhooks to help you update your cache or take other actions when the state changes on GrowthBook",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/integrations/github-metrics",
    "markdown": "# GitHub (Metric Definitions) | GrowthBook Docs\n\n## Use GitHub to Version Control Metric Definitions\n\nThis guide walks through how to make GitHub the source-of-truth of your metric definitions in GrowthBook.\n\n## Setting Up GrowthBook[​](#setting-up-growthbook \"Direct link to Setting Up GrowthBook\")\n\nFor this guide, you can either use GrowthBook Cloud at [https://app.growthbook.io](https://app.growthbook.io/) or your own self-hosted deployment.\n\n### Connect to a Data Source[​](#connect-to-a-data-source \"Direct link to Connect to a Data Source\")\n\nThe easiest way to start is to use the built-in sample data in GrowthBook. Go to **Experiments** and in the Setup Steps, select the **View Sample Experiment** option. This will connect to a sample Postgres database and create a few sample metrics and an experiment.\n\nIf you have your own data warehouse, you can use that instead, but you will have to change the SQL queries further in this guide to match your specific data structure.\n\nAfter connecting, you will need to find the data source id. The easiest way to find this is to go to **Metrics and Data** → **Data Sources**, click into the data source and copy the id from the last part of the URL. It will start with `ds_`, for example `ds_abc123`. Keep note of this id since you will need it later.\n\n### Create an API Key[​](#create-an-api-key \"Direct link to Create an API Key\")\n\nGo to **Settings** → **API Keys** and click to create a new Secret Key. Make sure to select the \"Admin\" role since we will need to use it to create metrics.\n\nKeep note of this key (it will start with `secret_admin_`), you will need it later.\n\n## Setting up GitHub[​](#setting-up-github \"Direct link to Setting up GitHub\")\n\nFirst, create an empty GitHub repository. This is where we will define our metrics.\n\n### Create a `metrics.yml` File[​](#create-a-metricsyml-file \"Direct link to create-a-metricsyml-file\")\n\nTo keep things simple, we will store all of our metric definitions in a single YAML file.\n\nWe're going to use Fact Tables to define our metrics. This lets us write SQL once and re-use that across multiple metric definitions. We will create a single Fact Table for `orders` and 2 metrics - `purchased` and `revenue`.\n\nnote\n\nThe format we're using below exactly matches what the GrowthBook API expects. If you want to store metrics in a different format, you will need to transform it first before sending to GrowthBook.\n\nCreate a new file in your GitHub repository called `metrics.yml` with the following contents. Replace `ds_abc123` with the id of your actual data source that you noted earlier.\n\n```\nfactTables:  - id: orders    data:      name: Orders      datasource: ds_abc123      userIdTypes:        - user_id      sql: >        SELECT          userId as user_id,          amount,          received_at as timestamp        FROM ordersfactMetrics:  - id: purchased    data:      name: Purchased      metricType: proportion      numerator:        factTableId: orders  - id: revenue    data:      name: Revenue      metricType: mean      numerator:        factTableId: orders        column: amount\n```\n\n### Creating a Helper Script[​](#creating-a-helper-script \"Direct link to Creating a Helper Script\")\n\nCreate a file named `growthbook_sync.mjs` in your repo with the following contents (make sure to use the `mjs` extension). If you are self-hosting GrowthBook, replace `https://api.growthbook.io` with your self-hosted API host.\n\n```\nimport { parse } from \"yaml\";import fs from \"fs\";// Edit these constants as neededconst FILE_NAME = 'metrics.yml';const API_HOST = 'https://api.growthbook.io';const GB_API_KEY = process.env.GB_API_KEY;// Parse the yaml fileconst file = fs.readFileSync(FILE_NAME, 'utf8');const json = parse(file);// Send to GrowthBookconst res = await fetch(`${API_HOST}/api/v1/bulk-import/facts`, {  method: \"POST\",  headers: {    'Content-Type': 'application/json',    'Authorization': `Bearer ${GB_API_KEY}`  },  body: JSON.stringify(json)});// Handle errors and print the responseconst resJson = await res.json();if (!res.ok) throw new Error(resJson?.message || \"Error syncing\");console.log(\"Success!\", resJson);\n```\n\nThis script does 3 things:\n\n1.  Parse the `metrics.yml` file into JSON\n2.  Send this payload to the GrowthBook API's `/bulk-import/facts` endpoint\n3.  Handle errors and print the response for easier debugging if things go wrong\n\n### Create a GitHub Secret[​](#create-a-github-secret \"Direct link to Create a GitHub Secret\")\n\nThe script above follows best practices by using environment variables to store secrets. For this to work, you need to add a secret to GitHub.\n\nIn your GitHub repository settings, create a new secret called `GB_API_KEY` and for the value, use the API Key you noted earlier (starting with `secret_admin_`).\n\n### Set up GitHub Actions[​](#set-up-github-actions \"Direct link to Set up GitHub Actions\")\n\nWe want the script above to run every time the `metrics.yml` file changes. We can do this using GitHub Actions.\n\nCreate a file in your repository named `.github/workflows/growthbook_sync.yml` with the following contents:\n\n```\nname: Sync to GrowthBookon:  push:    branches:      - mainjobs:  growthbook_sync:    runs-on: ubuntu-latest    steps:      - uses: actions/checkout@v4      - uses: actions/setup-node@v4        with:          node-version: 20.x      - name: Sync to GrowthBook        run: |          npm install yaml          GB_API_KEY=\"${{secrets.GB_API_KEY}}\" node growthbook_sync.mjs\n```\n\n## Testing it Out[​](#testing-it-out \"Direct link to Testing it Out\")\n\nAfter comitting the above files to your GitHub repo, it should run automatically and you should see your new Orders fact table and 2 new metrics within your GrowthBook account. If it didn't work, look at the output of your GitHub Action to see if there are any error messages.\n\n### Making Changes[​](#making-changes \"Direct link to Making Changes\")\n\nFact Tables and Metrics created via this `bulk-import` endpoint are marked as \"Official\" by default. This means they cannot be edited from within the GrowthBook UI and must be changed within GitHub instead. This helps avoid things getting out-of-sync.\n\nnote\n\nYou can still use the GrowthBook UI to create or edit other fact tables and metrics. Only \"Official\" ones created through this `bulk-import` endpoint will be locked down.\n\nLet's try updating the `metrics.yml` file, maybe by adding a description to the Purchased metric:\n\n```\n# ...    data:      name: Purchased      description: Percent of people who purchased something      metricType: proportion# ...\n```\n\nCommit this change to your `main` branch and GrowthBook's copy of this metric will be updated to match, usually within 30 seconds!\n\n## Next Steps[​](#next-steps \"Direct link to Next Steps\")\n\nRead the API Docs on the [bulk-import/facts endpoint](https://docs.growthbook.io/api#tag/fact-tables/operation/postBulkImportFacts) to see all of the options and fields you can use in your `metrics.yml` file.",
    "title": "GitHub (Metric Definitions) | GrowthBook Docs",
    "description": "Store metric definitions in GitHub and automatically sync them to GrowthBook",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/integrations/datadog",
    "markdown": "# Integrate DataDog with GrowthBook Feature Flag Data\n\nBy harnessing the power of DataDog's monitoring and alerting capabilities, along with GrowthBook's powerful REST API, you can create a dynamic system that automatically toggles GrowthBook Feature Flags when error thresholds surpass predefined thresholds.\n\n## Setup Instructions[​](#setup-instructions \"Direct link to Setup Instructions\")\n\n### 1\\. Instrument DataDog with Feature Flag Data[​](#1-instrument-datadog-with-feature-flag-data \"Direct link to 1. Instrument DataDog with Feature Flag Data\")\n\nDataDog has a number of products that can be used to monitor applications. For this example, we'll focus on how to integrate GrowthBook with [DataDog RUM](https://www.datadoghq.com/product/real-user-monitoring/).\n\nTo get started, you'll first need to instrument DataDog's RUM with their beta [Feature Flag Tracking](https://docs.datadoghq.com/real_user_monitoring/feature_flag_tracking/) feature.\n\nWhen initializing `datadogRum` you can add `enableExperimentalFeatures` and pass in `feature_flags` to get access to the beta feature.\n\n```\ndatadogRum.init({  applicationId: \"sample-application-id\",  clientToken: \"sample-client-token\",  site: \"datadoghq.com\",  service: \"demo-app\",  env: \"dev\",  version: \"1.0.0\",  sessionSampleRate: 100,  sessionReplaySampleRate: 100,  trackUserInteractions: true,  trackResources: true,  trackLongTasks: true,  defaultPrivacyLevel: \"mask-user-input\",// This enables the beta feature flag tracking  enableExperimentalFeatures: [\"feature_flags\"],});datadogRum.startSessionReplayRecording();\n```\n\nThen, you can use the `addFeatureFlagEvaluation` method built in to the `datadogRum` package when evaluating GrowthBook Feature Flags.\n\n```\nimport { datadogRum } from \"@datadog/browser-rum\";import { useFeatureIsOn } from \"@growthbook/growthbook-react\";const welcomeMessage = useFeatureIsOn(\"welcome-message\");datadogRum.addFeatureFlagEvaluation(\"welcome-message\", welcomeMessage);\n```\n\nNote\n\nIf you are using [DataDog APM](https://www.datadoghq.com/product/apm/), you can do something similar by adding Feature Flag data to your traces. DataDog then has a helpful guide on how to [Connect Rum & Traces](https://docs.datadoghq.com/real_user_monitoring/connect_rum_and_traces/?tab=browserrum). This route will enable you do have alerts built around both front-end and back-end errors.\n\n### 2\\. Build a DataDog Dashboard & Monitor[​](#2-build-a-datadog-dashboard--monitor \"Direct link to 2. Build a DataDog Dashboard & Monitor\")\n\nNow that you're passing Feature Flag data to DataDog, you can build monitors and alerts when the error rate between Feature Flags variations cross a specific threshold within a pre-defined time period.\n\n![](https://docs.growthbook.io/assets/images/add-feature-flags-to-dashboard-data-dog-212db748d20a3008a257a58a2e423d09.png)\n\nThe beta Feature Flag Tracking feature allows you to see error rates between the various feature flag states.\n\n![](https://docs.growthbook.io/assets/images/view-feature-flags-error-rates-in-data-dog-d84ee12339692a3b057dd230eb87452c.png)\n\nYou can then save the view to a Dashboard.\n\n![](https://docs.growthbook.io/assets/images/add-feature-flags-to-dashboard-data-dog-212db748d20a3008a257a58a2e423d09.png)\n\nFrom the Dashboard, there is a handy “Create Monitor” option that can seed much of the monitor's search query for you.\n\n![](https://docs.growthbook.io/assets/images/create-data-dog-monitor-from-dashboard-50e9cd5976389729cb0d249430f98791.png)\n\nThis is the out-of-the-box search query created from the Create Monitor link above. You could take it a step further and calculate the difference in error rates between the Feature Flag variations (e.g. error rate when the Feature Flag is enabled vs disabled) and use that value as your alert threshold.\n\n![](https://docs.growthbook.io/assets/images/customize-monitor-query-in-data-dog-4fe4e84dd8046621da956d81ff391e58.png)\n\n### 3\\. Build DataDog Webhook[​](#3-build-datadog-webhook \"Direct link to 3. Build DataDog Webhook\")\n\nOnce you've defined a monitor's search query, you can then build an alert that uses DataDog's Webhooks to invokes a serverless function (e.g. AWS Lambda).\n\nBefore you can call a [Webhook](https://docs.datadoghq.com/integrations/webhooks/) via a monitor alert, you'll need to build the Webhook within DataDog.\n\nYou can do that via the Integrations tab.\n\n![](https://docs.growthbook.io/assets/images/create-datadog-webhook-5af9c8923471bc58b50c3b6588b40898.png)\n\nOnce installed, you can build the Webhook that will invoke the serverless function. In this case, it's an AWS Lambda function that is invoked via a [Function URL](https://docs.aws.amazon.com/lambda/latest/dg/urls-invocation.html).\n\n![](https://docs.growthbook.io/assets/images/customize-webhook-to-hit-aws-url-bc065f6c4ee26330266a6c94da7f3a20.png)\n\nNow that you've built the Webhook, you can go back to the monitor alert and instead of emailing a team member, you can configure the alert to call the Webhook.\n\n![](https://docs.growthbook.io/assets/images/update-datadog-alert-to-post-to-webhook-e56f8ce884f9f74b74497ce0f5c2338a.png)\n\n### 4\\. Update Feature Flag via GrowthBook REST API.[​](#4-update-feature-flag-via-growthbook-rest-api \"Direct link to 4. Update Feature Flag via GrowthBook REST API.\")\n\nThe final step is to build a serverless function that hits the GrowthBook REST API endpoint to toggle status of a feature flag.\n\nThe [GrowthBook REST API](https://docs.growthbook.io/api/#tag/features/operation/toggleFeature) endpoint takes a simple POST request with basic HTTP auth and only requires the feature flag ID (the human-readable string), along with the environments you want to update and the new status of the Feature Flag for each environment.",
    "title": "Integrate DataDog with GrowthBook Feature Flag Data | GrowthBook Docs",
    "description": "By harnessing the power of DataDog's monitoring and alerting capabilities, along with GrowthBook&apos;s powerful REST API, you can create a dynamic system that automatically toggles GrowthBook Feature Flags when error thresholds surpass predefined thresholds.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/integrations/discord",
    "markdown": "# Discord integration | GrowthBook Docs\n\nThe GrowthBook Discord integration allows you to receive alerts for the events that you care about in a Discord channel of your choosing.\n\nNew\n\nThe GrowthBook Discord integration is a brand new feature. If you experience any issues, let us know either on [Slack](https://slack.growthbook.io/) or [create an issue](https://github.com/growthbook/growthbook-sdk-java/issues).\n\n## Making A Discord Webhook[​](#making-a-discord-webhook \"Direct link to Making A Discord Webhook\")\n\nThe first step is to create an event webhook on your discord server:\n\n1.  Open your **Server Settings** and head into the **Integrations** tab:\n2.  Click the **Create Webhook** button to create a new webhook!\n\n![](https://docs.growthbook.io/assets/images/discord-new-webhook-249fdd6f8e94bb19f9609ee4aa411ef6.png)\n\nOnce your discord webhook is configured, you can copy its url:\n\n![](https://docs.growthbook.io/assets/images/discord-copy-webhook-url-02ce290558f9f7f9dc6370ca6f88691f.png)\n\n## Add the Discord integration to GrowthBook[​](#add-the-discord-integration-to-growthbook \"Direct link to Add the Discord integration to GrowthBook\")\n\nNext step is to login to the GrowthBook app and visit the **Webhooks** tab under **Settings**, also available [here](https://app.growthbook.io/settings/webhooks). You will need privileges to manage webhooks in order for this menu item to be available.\n\nClick the **Create an Event Webhook** button. You should see a modal pop up with some fields for configuring the Discord notification webhook.\n\n![](https://docs.growthbook.io/assets/images/new-webhook-dca6a6897052dd9ab4911437a959dab1.png)\n\nThen, configure the following:\n\n*   **Name**: The name of the integration. In case you have multiple integrations, this can help you tell them apart. This will also show in the contextual text alongside the alerts.\n*   **Endpoint URL**: Copy and paste the webhook URL provided by your discord app.\n*   **Payload**: Select the `Discord` payload.\n*   **Event filters**: You can optionally filter by events you care about. For example, if you only care about when features are deleted, you can choose `feature.deleted` from the list. If you care about all events, leave this blank.\n*   **Environment filters**: You can optionally choose to filter by environment. For example, if you only want to hear about events that are for the production environment, you can choose `production` from the list. For all environments, leave this blank.\n*   **Project filters**: You can optionally choose to filter by project. For example, if you have a project named \"Onboarding V2\" and you only want to alert for that project, you can choose that project from the projects list. For all projects, leave this blank.\n*   **Tag filters**: You can optionally choose to filter by tag. For all events regardless of tag, leave this blank.\n\nAfter configuring all the fields, press **Create** to save your new Discord notification webhook.\n\nYou can also edit these fields at any point if you make a mistake.\n\n![](https://docs.growthbook.io/assets/images/edit-webhook-05554ff586071e32557f9044ea6aaba6.png)\n\n### Adding more alerts[​](#adding-more-alerts \"Direct link to Adding more alerts\")\n\nIf you'd like to be alerted in another Discord channel, you can add another Incoming Webhook in Discord.\n\nThen, you can create new integrations in the GrowthBook dashboard, specifying all of the same information except adding your new webhook URL.\n\n## Testing your alerts[​](#testing-your-alerts \"Direct link to Testing your alerts\")\n\nYou are now ready to test your alerts. First, you can hit the `Test` button on the webhook settings page. This should trigger a test notification.\n\nNext, perform one of the actions you're watching if you've added Event filters. If you haven't added any event filters, the quickest way to test it's working is to either create a new test feature (then delete it if it's not needed), or toggle an environment on or off for an existing feature.",
    "title": "Discord integration | GrowthBook Docs",
    "description": "The GrowthBook Discord integration allows you to receive alerts for the events that you care about in a Discord channel of your choosing.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/tools/chrome-extension",
    "markdown": "# Chrome Extension | GrowthBook Docs\n\nGrowthBook has a Chrome Extension that integrates with the JavaScript SDK's.\n\nQA and debug feature flags and experiments from GrowthBook's JavaScript SDK's.\n\nYou can [download it from the Chrome Web Store](https://chrome.google.com/webstore/detail/growthbook-devtools/opemhndcehfgipokneipaafbglcecjia) .",
    "title": "Chrome Extension | GrowthBook Docs",
    "description": "GrowthBook's Chrome Extension",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/tools/vscode-extension",
    "markdown": "# Visual Studio Code Extension | GrowthBook Docs\n\nThe GrowthBook Visual Studio Code extension allows you to see your available feature definitions right in VS Code.\n\nIt can be configured to work with your project in under a minute and makes it easier for developers who use VS Code to work with the GrowthBook SDK by making features browsable and conveniently surfacing common actions.\n\nYou [download it from the Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=GrowthBook.growthbook) .",
    "title": "Visual Studio Code Extension | GrowthBook Docs",
    "description": "GrowthBook's Visual Studio Code Extension",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/nextjs-app-router",
    "markdown": "# GrowthBook and Next.js (App Router)\n\nNote: If you are using the older Next.js Pages Router, check out [our dedicated Pages Router guide](https://docs.growthbook.io/guide/nextjs-and-growthbook) instead.\n\nThis document is a guide on how to add GrowthBook feature flags to your Next.js application. It assumes you are starting from scratch, so if you already have a Next.js application, you can skip to step 2.\n\n## 1\\. Create your Next.js App[​](#1-create-your-nextjs-app \"Direct link to 1. Create your Next.js App\")\n\nLet's start by getting a basic Next.js app running:\n\nThen cd into the newly create directory and run:\n\n```\ncd my-appyarn dev -p 4000\n```\n\nNote: Both GrowthBook and Next.js run on port 3000 by default, so we're making our Next.js app use 4000 instead to avoid conflicts.\n\nVisit `http://localhost:4000` and you should see the application running!\n\n## 2\\. GrowthBook Account[​](#2-growthbook-account \"Direct link to 2. GrowthBook Account\")\n\nYou will need a GrowthBook account. You can either run GrowthBook locally or using the cloud hosted GrowthBook at [https://app.growthbook.io](https://app.growthbook.io/). If you are using the GrowthBook cloud, you can skip to step 3. If you are installing it locally, here is the quick start instructions - or you can follow the [self hosting](https://docs.growthbook.io/self-host) instructions.\n\n```\ngit clone https://github.com/growthbook/growthbook.gitcd growthbookdocker-compose up -d\n```\n\nAfter that, visit `http://localhost:3000` and create your first user account.\n\n![GrowthBook Signup Screen](https://docs.growthbook.io/images/guides/nextjs-1-growthbook-signup-screen.jpeg)\n\n## 3\\. Set Environment Variables in your Next.js App[​](#3-set-environment-variables-in-your-nextjs-app \"Direct link to 3. Set Environment Variables in your Next.js App\")\n\nIn GrowthBook, create a new SDK Connection. After doing this, you should see an API Host and Client Key (and a Decryption Key if you enabled encryption).\n\nCreate the file `.env.local` in your Next.js app if it doesn't exist yet and add this info there:\n\n```\nNEXT_PUBLIC_GROWTHBOOK_API_HOST=https://cdn.growthbook.ioNEXT_PUBLIC_GROWTHBOOK_CLIENT_KEY=# Below is only required if you enabled encryptionNEXT_PUBLIC_GROWTHBOOK_DECRYPTION_KEY=\n```\n\n## 4\\. Create a Feature Flag[​](#4-create-a-feature-flag \"Direct link to 4. Create a Feature Flag\")\n\nBack in the GrowthBook application, let's create our first feature flag. Make a simple ON/OFF feature flag with the the key `welcome-message`. Leave the default value set to OFF. We will turn it on in a future step.\n\n![GrowthBook Create Feature](https://docs.growthbook.io/images/guides/nextjs-3-create-feature.png)\n\n## 5\\. Integrate the GrowthBook SDK into our Next.js app[​](#5-integrate-the-growthbook-sdk-into-our-nextjs-app \"Direct link to 5. Integrate the GrowthBook SDK into our Next.js app\")\n\nNext.js App Router uses Server Components by default, so we need to use the GrowthBook JavaScript SDK, not the React SDK (which only works client-side).\n\n*   npm\n*   Yarn\n*   pnpm\n\n```\nnpm install --save @growthbook/growthbook\n```\n\nOur Javascript SDK works out-of-the-box with React Server Components, but we can more deeply integrate it with Next.js by creating a small helper function in `app/growthbookServer.ts` with the following contents:\n\n```\n// app/growthbookServer.tsimport { setPolyfills, configureCache } from \"@growthbook/growthbook\";export function configureServerSideGrowthBook() {  // Tag fetch requests so they can be revalidated on demand  setPolyfills({    fetch: (url: string, init: RequestInit) =>      fetch(url, {        ...init,        next: {          // Cache feature definitions for 10 seconds for dev          // In prod, use a higher value and use WebHooks to revalidate on-demand          revalidate: 10,          tags: [\"growthbook\"],        },      }),  });  // Disable the built-in cache since we're using Next.js's fetch cache instead  configureCache({    disableCache: true,  });}\n```\n\nNow, let's modify our main `app/page.tsx` file.\n\nChange the top of the file to match the following:\n\n```\nimport Image from \"next/image\";import { configureServerSideGrowthBook } from \"./growthbookServer\";import { GrowthBook } from \"@growthbook/growthbook\";export default async function Home() {  configureServerSideGrowthBook();  // Create and initialize a GrowthBook instance  const gb = new GrowthBook({    apiHost: process.env.NEXT_PUBLIC_GROWTHBOOK_API_HOST,    clientKey: process.env.NEXT_PUBLIC_GROWTHBOOK_CLIENT_KEY,    decryptionKey: process.env.NEXT_PUBLIC_GROWTHBOOK_DECRYPTION_KEY,  });  await gb.init({ timeout: 1000 });  // Set targeting attributes for the user  // TODO: get from cookies/headers/db  await gb.setAttributes({    id: \"123\",    employee: true,  });  // Evaluate a feature flag  const welcomeMessage = gb.isOn(\"welcome-message\");  // Cleanup  gb.destroy();\n```\n\nNext Steps And now let's use the feature flag we referenced above. Add the following somewhere on the page so we can see it:\n\n```\n<h2>Welcome Message: {welcomeMessage ? \"ON\" : \"OFF\"}</h2>\n```\n\nThis will render as `OFF` for now.\n\n## 6\\. Turn on for your Team[​](#6-turn-on-for-your-team \"Direct link to 6. Turn on for your Team\")\n\nIn our page, we hard-coded `employee: true` when setting our targeting attributes. Let's use that to turn on the feature for just employees.\n\nCreate a Force Rule for your feature:\n\n![GrowthBook Targeting Rule](https://docs.growthbook.io/images/guides/nextjs-4-employee-rule.png)\n\nPublish the draft and refresh your Next.js app and you should now see the welcome message showing up as ON! (Note: it might take a few seconds for the cache to refresh).\n\nIf you change your targeting attribute to `employee: false` in the page, you should see the welcome message switch back to OFF immediately.\n\nThe best part about targeting attributes in GrowthBook is that they are evaluated entirely locally. Sensitive user data is never sent over the network and there is no performance penalty. Some other libraries require an HTTP request to evaluate a feature for a user and this is often a deal breaker for performance.\n\n## 7\\. Gradually roll out to your users[​](#7-gradually-roll-out-to-your-users \"Direct link to 7. Gradually roll out to your users\")\n\nAfter you test the new feature within your team, you probably want to start rolling it out to real users.\n\nWe can do that with another rule in GrowthBook:\n\n![GrowthBook Rollout Rule](https://docs.growthbook.io/images/guides/nextjs-6-rollout-rule.png)\n\nIn the targeting attributes, make sure you set `employee: false`. That will ensure you skip the first rule we made and fall into the second rollout rule.\n\nnote\n\nThe GrowthBook SDK uses deterministic hashing to figure out whether or not someone is included in a rollout (or A/B test). The SDKs hash together the selected targeting attribute (id) and the feature key (welcome-message) and coverts it to a float between 0 and 1. If that float is less than or equal to the rollout percent, the user is included. This ensures a consistent UX and prevents one user from constantly switching between ON and OFF as they navigate your app.\n\nTry changing the id in the targeting attributes to a few different random strings and see what happens. You should notice about half of the time the welcome message will be ON.\n\n## Conclusion and Next Steps[​](#conclusion-and-next-steps \"Direct link to Conclusion and Next Steps\")\n\nWe showed here how to do a targeted rule, and how to do a rollout rule. It's also just as easy to make an A/B test in the same manner. You will need to set up event tracking and connect GrowthBook to your data source.\n\nWe support many different rendering strategies in Next.js, not just server components. Check out our [example Next.js app](https://github.com/growthbook/examples/tree/main/next-js), which demonstrates static rendering, client components, streaming server components, and more.\n\nOnce you do the initial integration work, it only takes a few seconds to wrap your code in feature flags. Once you realize how easy and stress-free deploys and experimentation can be, there's no going back.",
    "title": "GrowthBook and Next.js (App Router) | GrowthBook Docs",
    "description": "This guide walks you through using GrowthBook with Next.js App Router.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/nextjs-and-growthbook",
    "markdown": "# GrowthBook and Next.js (Pages Router)\n\nNote: If you are using the newer Next.js App Router, check out [our dedicated App Router guide](https://docs.growthbook.io/guide/nextjs-app-router) instead.\n\nThis document is a guide on how to add GrowthBook feature flags to your Next.js application. It assumes you are starting from scratch, so if you already have a Next.js application, you can skip to step 2.\n\nHere is a video version similar to the steps below:\n\n## 1\\. Create your Next.js App[​](#1-create-your-nextjs-app \"Direct link to 1. Create your Next.js App\")\n\nLet's start by getting a basic Next.js app running:\n\nThen cd into the newly create directory and run:\n\n```\ncd my-appyarn dev -p 4000\n```\n\nNote: Both GrowthBook and Next.js run on port 3000 by default, so we're making our Next.js app use 4000 instead to avoid conflicts.\n\nVisit `http://localhost:4000` and you should see the application running!\n\n## 2\\. GrowthBook Account[​](#2-growthbook-account \"Direct link to 2. GrowthBook Account\")\n\nYou will need a GrowthBook account. You can either run GrowthBook locally or using the cloud hosted GrowthBook at [https://app.growthbook.io](https://app.growthbook.io/). If you are using the GrowthBook cloud, you can skip to step 3. If you are installing it locally, here is the quick start instructions - or you can follow the [self hosting](https://docs.growthbook.io/self-host) instructions.\n\n```\ngit clone https://github.com/growthbook/growthbook.gitcd growthbookdocker-compose up -d\n```\n\nAfter that, visit `http://localhost:3000` and create your first user account.\n\n![GrowthBook Signup Screen](https://docs.growthbook.io/images/guides/nextjs-1-growthbook-signup-screen.jpeg)\n\n## 3\\. Integrate the GrowthBook React SDK into our Next.js app[​](#3-integrate-the-growthbook-react-sdk-into-our-nextjs-app \"Direct link to 3. Integrate the GrowthBook React SDK into our Next.js app\")\n\nGrowthBook will generate some integration code for you, including a unique SDK Client Key to load your features from.\n\n![GrowthBook Integration Code](https://docs.growthbook.io/images/guides/nextjs-2-feature-flag-key.png)\n\nCreate the file `.env.local` if it doesn't exist yet and add your generated key there:\n\n```\nNEXT_PUBLIC_GROWTHBOOK_API_HOST=https://cdn.growthbook.ioNEXT_PUBLIC_GROWTHBOOK_CLIENT_KEY=# Below is only required if you enabled encryptionNEXT_PUBLIC_GROWTHBOOK_DECRYPTION_KEY=\n```\n\nWe first need to install the GrowthBook React SDK in our Next.js app:\n\n```\nyarn add @growthbook/growthbook-react\n```\n\nThen we can modify the generated React code to work with the Next.js framework. Modify the file `pages/_app.js` with the following contents:\n\n```\nimport \"../styles/globals.css\";import { GrowthBook, GrowthBookProvider } from \"@growthbook/growthbook-react\";import { useEffect } from \"react\";// Create a GrowthBook instanceconst growthbook = new GrowthBook({  apiHost: process.env.NEXT_PUBLIC_GROWTHBOOK_API_HOST,  clientKey: process.env.NEXT_PUBLIC_GROWTHBOOK_CLIENT_KEY,  decryptionKey: process.env.NEXT_PUBLIC_GROWTHBOOK_DECRYPTION_KEY,  trackingCallback: (experiment, result) => {    console.log(\"Viewed Experiment\", {      experimentId: experiment.key,      variationId: result.key    });  },});// Start downloading feature definitionsgrowthbook.init();export default function MyApp({ Component, pageProps, router }) {  // Refresh features and targeting attributes on navigation  useEffect(() => {    gb.setURL(window.location.href);    growthbook.setAttributes({      id: \"123\",      loggedIn: true,      deviceId: \"abcdef123456\",      employee: true,      company: \"acme\",      country: \"US\",      browser: navigator.userAgent,      url: router.pathname,    });  }, [router.pathname]);  return (    <GrowthBookProvider growthbook={growthbook}>      <Component {...pageProps} />    </GrowthBookProvider>  );}\n```\n\nIn a real application, you would pull some of the targeting attributes from your authentication system or an API, but let's just leave them hard-coded for now.\n\n## 4\\. Create a Feature in GrowthBook[​](#4-create-a-feature-in-growthbook \"Direct link to 4. Create a Feature in GrowthBook\")\n\nBack in the GrowthBook application, we can create a new feature. For this tutorial, we'll make a simple on/off feature flag that determines whether or not we show a welcome banner on our site.\n\n![GrowthBook Create Feature](https://docs.growthbook.io/images/guides/nextjs-3-create-feature.png)\n\nThe key we chose (welcome-message) is what we will reference when using the GrowthBook SDK.\n\nWe can now edit `pages/index.js` and conditionally render a welcome message based on the state of the feature:\n\nAdd an import statement:\n\n```\nimport { IfFeatureEnabled } from \"@growthbook/growthbook-react\";\n```\n\nAnd then put your welcome message somewhere on the page:\n\n```\n<IfFeatureEnabled feature=\"welcome-message\">  <p>I hope you enjoy this site and have a great day!</p></IfFeatureEnabled>\n```\n\nIf you refresh your Next.js app, you'll notice the welcome message is not rendered. This is because when creating the feature, we set the default value to off. At this point, we could safely deploy our change to production and not worry about breaking anything.\n\n## 5\\. Turn on the feature for your team[​](#5-turn-on-the-feature-for-your-team \"Direct link to 5. Turn on the feature for your team\")\n\nNow we can add rules to the feature to turn it on for specific groups of users.\n\nIn the hard-coded targeting attributes we set in pages/\\_app.js, we designated ourselves as an internal employee. Let's use this attribute to turn on the feature for the whole internal team:\n\n![GrowthBook Targeting Rule](https://docs.growthbook.io/images/guides/nextjs-4-employee-rule.png)\n\nRefresh your Next.js app and you should now see the welcome message appearing! (Note: it might take up to 30 seconds for the API cache to refresh).\n\n![Next.js app with feature](https://docs.growthbook.io/images/guides/nextjs-5-nextjs-title.png)\n\nIf you change employee to false in pages/\\_app.js, you should see the welcome message disappear.\n\nThe best part about targeting attributes in GrowthBook is that they are evaluated entirely locally. Sensitive user data is never sent over the network and there is no performance penalty. Some other libraries require an HTTP request to evaluate a feature for a user and this is often a deal breaker.\n\n## 6\\. Gradually roll out to your users[​](#6-gradually-roll-out-to-your-users \"Direct link to 6. Gradually roll out to your users\")\n\nAfter you test the new feature within your team, you probably want to start rolling it out to real users.\n\nWe can do that with another rule in GrowthBook:\n\n![GrowthBook Rollout Rule](https://docs.growthbook.io/images/guides/nextjs-6-rollout-rule.png)\n\nIn the targeting attributes in pages/\\_app.js, make sure employee is set to false. That will ensure you skip the first rule we made and fall into the second rollout rule.\n\nnote\n\nThe GrowthBook SDK uses deterministic hashing to figure out whether or not someone is included in a rollout (or A/B test). The SDKs hash together the selected targeting attribute (id) and the feature key (welcome-message) and coverts it to a float between 0 and 1. If that float is less than or equal to the rollout percent, the user is included. This ensures a consistent UX and prevents one user from constantly switching between ON and OFF as they navigate your app.\n\nTry changing the user id in the targeting attributes in `pages/_app.js` to a few different random strings and see what happens. You should notice about half of the time the welcome message shows up and half of the time it doesn't.\n\n## Conclusion and Next Steps[​](#conclusion-and-next-steps \"Direct link to Conclusion and Next Steps\")\n\nWe showed here how to do a targeted rule, and how to do a rollout rule. It's also just as easy to make an A/B test in the same manner. You will need to set up an event tracking and connect GrowthBook to your data source.\n\nYou can look at the [GrowthBook React SDK](https://docs.growthbook.io/lib/react) docs for more ways to use feature flags in your code besides the `<IfFeatureEnabled>` component. Once you do the initial integration work, it only takes a few seconds to wrap your code in feature flags. Once you realize how easy and stress-free deploys and experimentation can be, there's no going back.",
    "title": "GrowthBook and Next.js (Pages Router) | GrowthBook Docs",
    "description": "This guide walks you through using GrowthBook with Next.js Pages Router.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/create-react-app-and-growthbook",
    "markdown": "# GrowthBook and BigQuery | GrowthBook Docs\n\n## GrowthBook and Create React App\n\n## 1\\. Set up Create React App[​](#1-set-up-create-react-app \"Direct link to 1. Set up Create React App\")\n\nCreate React App is simple to get a new project started. This guide does the standard process with one extra command to install the GrowthBook SDK and the nanoid library:\n\n```\nnpx create-react-app my-appcd my-appnpm install --save @growthbook/growthbook-react nanoidnpm start\n```\n\nThen open `http://localhost:3000/` and make sure the app is working\n\n## 2\\. Set up GrowthBook[​](#2-set-up-growthbook \"Direct link to 2. Set up GrowthBook\")\n\nIn this tutorial assume you are using the cloud-hosted version of GrowthBook, which is free for small teams, but you can also use the open source version and host it yourself if you prefer.\n\nnote\n\nGrowthBook uses the concept of Feature Flagging to run A/B tests. Basically, you wrap the code you want to test in a conditional check\n\nif (feature.on) ...\n\nand then you run an A/B test within GrowthBook to turn the feature on for 50% of users and off for the other 50% (or whatever\n\npercentage you like).\n\nTo start, go to [https://app.growthbook.io](https://app.growthbook.io/) and register a new account. Then there are a couple steps required before you can run an experiment.\n\n## 3\\. Install and configure the SDK[​](#3-install-and-configure-the-sdk \"Direct link to 3. Install and configure the SDK\")\n\nNext, click on Step 1: Install our SDK and you should see API keys for dev/production as well as sample code.\n\nSince you already ran the npm i command at the start, you can skip that part. I'll walk through the different parts below:\n\nFirst, in `src/index.js`, import the GrowthBook SDK and nanoid library:\n\n```\n// ... after existing importsimport { GrowthBook, GrowthBookProvider } from \"@growthbook/growthbook-react\";import { nanoid } from \"nanoid\";\n```\n\nThen you will need to generate an anonymous visitor id, which is used to assign an A/B test variation to a user. In this example we'll persist this id in localStorage so if the user refreshes our app they will get assigned the same variation as before.\n\n```\nlet visitor_id = localStorage.getItem(\"visitor_id\");if (!visitor_id) {  visitor_id = nanoid();  localStorage.setItem(\"visitor_id\", visitor_id);}\n```\n\nThen, you create a GrowthBook instance with our visitor id and a tracking callback when a user is put into an experiment.\n\n```\nconst growthbook = new GrowthBook({  attributes: {    id: visitor_id,  },  trackingCallback: (experiment, result) => {    console.log({      experimentId: experiment.key,      variationId: result.variationId,    });  },});\n```\n\nAfter that, you can fetch the list of features from the GrowthBook API and pass them into the SDK:\n\n```\nconst FEATURES_ENDPOINT = \"https://cdn.growthbook.io/api/features/...\";fetch(FEATURES_ENDPOINT)  .then((res) => res.json())  .then((json) => {    growthbook.setFeatures(json.features);  });\n```\n\nMake sure to swap out the `FEATURES_ENDPOINT` constant above with your own dev API key you see in the GrowthBook application.\n\nLastly, you'll need to wrap the app in a GrowthBookProvider component which will let us run A/B tests from anywhere in the app.\n\n```\nReactDOM.render(<React.StrictMode>  <GrowthBookProvider growthbook={growthbook}>    <App />  </GrowthBookProvider></React.StrictMode>, document.getElementById('root'));\n```\n\n## 4\\. Create and use a feature[​](#4-create-and-use-a-feature \"Direct link to 4. Create and use a feature\")\n\nNow that the SDK is installed and fully integrated in our application, you can finally create the `show-logo` feature.\n\nBack in GrowthBook, Click on Step 2 of the quick start instruction or click on add new feature. Fill in the following info:\n\n*   Feature key: `show-logo`\n*   Dev: toggle on\n*   Prod: toggle off\n*   Value Type: boolean (on/off)\n*   Behavior: A/B Experiment\n*   Tracking Key: `show-logo`\n*   Sample Users based on attribute: `id`\n*   Variations and Weights: leave default (OFF/ON, 50/50 split)\n*   Fallback Value: `OFF`\n\nThere's a lot of fields there, but hopefully it's pretty straight forward what's happening. We setup a new boolean feature called show-logo, that's only enabled in dev and running an A/B test where 50% get ON and 50% get OFF\n\nNow you can switch back to our React app and reference this feature in our code.\n\nIn src/App.js, we currently have the following code:\n\n```\n<img src={logo} className=\"App-logo\" alt=\"logo\" />\n```\n\nLet's add an import at the top of the file:\n\n```\nimport { IfFeatureEnabled } from \"@growthbook/growthbook-react\";\n```\n\nAnd wrap the img element in an IfFeatureEnabled component:\n\n```\n<IfFeatureEnabled feature=\"show-logo\">  <img src={logo} className=\"App-logo\" alt=\"logo\" /></IfFeatureEnabled>\n```\n\nNow, if you refresh your app, the A/B test should be running! If you're part of the lucky 50% that are in the B variation (no logo), it should be pretty obvious. If you happen to be in the A variations, you can verify you're in the test by looking in DevTools for our trackingCallback console.log.\n\nYou can test out different variations by deleting the visitor\\_id from localStorage and refreshing your app. Repeat a few times and you should see each version of the page about half of the time. If you want an easier and faster way to QA the variations, you can download the GrowthBook Chrome DevTools Extension.\n\n## 5\\. Analyze Results[​](#5-analyze-results \"Direct link to 5. Analyze Results\")\n\nBefore you can analyze the results, you will need to connect GrowthBook to the event tracking and a data source. In the trackingCallback in `src/index.js`, instead of doing a `console.log`, you could use [Mixpanel](https://docs.growthbook.io/guide/mixpanel), Rudderstack, Jitsu, Segment or another event tracking system.\n\nThen, throughout your app, you can similarly track events when users do something you care about, like sign up, convert, or buy something.\n\nOnce you do that, GrowthBook can connect to your event tracking system, query the raw data, run it through a stats engine, and show you the results. Follow the directions for the data source you're using.\n\n## Next Steps[​](#next-steps \"Direct link to Next Steps\")\n\nThere's so much more you can do with GrowthBook beyond a simple on/off A/B test...\n\n*   Add complex targeting and override rules for your features\n*   Read the full [React SDK Docs](https://docs.growthbook.io/lib/react) for more details and ways to use feature flags\n*   Install the [Chrome DevTools Extension](https://chrome.google.com/webstore/detail/growthbook-devtools/opemhndcehfgipokneipaafbglcecjia) to test different variations and scenarios\n*   Read about the [powerful statistics engine](https://docs.growthbook.io/statistics/overview) that is used to analyze experiment results.",
    "title": "GrowthBook and BigQuery | GrowthBook Docs",
    "description": "This guide walks you through installing GrowthBook SDK into your Create React App",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/integrations/wordpress",
    "markdown": "# Wordpress Integration | GrowthBook Docs\n\nUnleash the power of experimentation with GrowthBook to supercharge your Wordpress site—no coding skills required!\n\nNote\n\nThis guide walks you through creating experiments using the GrowthBook Visual Editor, which requires a `Pro` subscription. [Learn More](https://www.growthbook.io/pricing).\n\n## Let's Get Started[​](#lets-get-started \"Direct link to Let's Get Started\")\n\n### Step 1: Create a GrowthBook SDK Connection[​](#step-1-create-a-growthbook-sdk-connection \"Direct link to Step 1: Create a GrowthBook SDK Connection\")\n\nTo connect your GrowthBook account to Wordpress, you'll need to create a new SDK Connection and select the `Wordpress` option. Before saving, confirm that you've enabled the toggles for `Include visual experiments in endpoint's response?` and `Include draft experiments`.\n\n![](https://docs.growthbook.io/assets/images/wordpress-sdk-connection-3672690cdd1f8e34628a5b0f731ec595.png)\n\n### Step 2: Add GrowthBook to Your Wordpress Site[​](#step-2-add-growthbook-to-your-wordpress-site \"Direct link to Step 2: Add GrowthBook to Your Wordpress Site\")\n\nOnce the SDK Connection is created, you should see a code snippet that you need to add to your site.\n\nThe easiest way to do this is with the popular [Insert Headers and Footers Plugin](https://wordpress.org/plugins/.insert-headers-and-footers/) by WPCode. Install and activate this plugin if you don't have it already.\n\nOn the left-hand side of your dashboard, navigate to Code Snippets → Header & Footer.\n\nInsert the SDK Connection code snippet into your site's Head:\n\n![Add code to header](https://docs.growthbook.io/assets/images/add-code-to-header-3d9a174e8fba81dcbfebf79f71934473.png)\n\nHere's an example of how it should look:\n\n```\n<script async  data-client-key=\"YOUR_CLIENT_KEY\"  src=\"https://cdn.jsdelivr.net/npm/@growthbook/growthbook/dist/bundles/auto.min.js\"></script>\n```\n\nNote\n\nWhen a user views an experiment, this script will fire an event that tracks which variation the user saw. If you have Google Analytics 4 (GA4) or Segment installed on your site, you don't have to do any additional configuration. If, however, you need to use a different analytics provider, you can follow our guide [here](https://docs.growthbook.io/lib/script-tag).\n\nOnce added, navigate back to GrowthBook.\n\n### Step 3: Install the GrowthBook Chrome Extension[​](#step-3-install-the-growthbook-chrome-extension \"Direct link to Step 3: Install the GrowthBook Chrome Extension\")\n\nThe GrowthBook Chrome Extension allows you to use the Visual Editor to update your Wordpress site's content. It's free, and you can download it [here](https://chromewebstore.google.com/detail/growthbook-devtools/opemhndcehfgipokneipaafbglcecjia).\n\n### Step 4: Create a GrowthBook Visual Editor Experiment[​](#step-4-create-a-growthbook-visual-editor-experiment \"Direct link to Step 4: Create a GrowthBook Visual Editor Experiment\")\n\nNow that GrowthBook is installed on your Wordpress site and you've installed the Chrome Extension, you can create a new experiment using the Visual Editor.\n\nFirst, navigate to \"Experiments\" on the left-hand navigation menu and then click \"Create Experiment\", before selecting \"Design a New Experiment\" and following the on-screen prompts.\n\nOnce you've created your experiment, Add a Visual Editor change and enter the URL of your Wordpress site.\n\nYou'll then be redirected to your site, where you can use the Visual Editor to make changes.",
    "title": "Wordpress Integration | GrowthBook Docs",
    "description": "Unleash the power of experimentation with GrowthBook to supercharge your Wordpress site—no coding skills required!",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/integrations/shopify",
    "markdown": "# Shopify Integration | GrowthBook Docs\n\nUnleash the power of experimentation with GrowthBook to supercharge your Shopify store—no coding skills required!\n\nNote\n\nThis guide walks you through creating experiments using the GrowthBook Visual Editor, which requires a `Pro` subscription. [Learn More](https://www.growthbook.io/pricing).\n\n## Let's Get Started[​](#lets-get-started \"Direct link to Let's Get Started\")\n\n### Step 1: Create a GrowthBook SDK Connection[​](#step-1-create-a-growthbook-sdk-connection \"Direct link to Step 1: Create a GrowthBook SDK Connection\")\n\nTo connect your GrowthBook account to Shopify, you'll need to create a new SDK Connection and select the `Shopify` option. Before saving, confirm that you've enabled the toggles for `Include visual experiments in endpoint's response?` and `Include draft experiments`.\n\n![](https://docs.growthbook.io/assets/images/shopify-sdk-connection-cd28566e1765b63e2677649127df1700.png)\n\n### Step 2: Add GrowthBook to Your Shopify Theme[​](#step-2-add-growthbook-to-your-shopify-theme \"Direct link to Step 2: Add GrowthBook to Your Shopify Theme\")\n\nOnce the SDK Connection is created, you should see a code snippet that you need to add to your store.\n\nLog into your Shopify account, navigate to your online store, and edit your store's code.\n\n![](https://docs.growthbook.io/assets/images/growthbook-shopify-edit-code-f26e82f53104efa715b96662855a70f0.png)\n\nOnce you're in the code editor, locate the `theme.liquid` file and add the snippet exactly as shown just before the closing `</head>` tag. Here's an example of how it should look:\n\n![](https://docs.growthbook.io/assets/images/shopify-theme-editor-01bf614f9426d26f63d9eb765e7dc79b.png)\n\nNote\n\nWhen a user views an experiment, this script will fire an event that tracks which variation the user saw. If you have Google Analytics 4 (GA4) or Segment installed on your store, you don't have to do any additional configuration. If, however, you need to use a different analytics provider, you can follow our guide [here](https://docs.growthbook.io/lib/script-tag).\n\nOnce added, click \"Save\" and navigate back to GrowthBook.\n\n### Step 3: Install the GrowthBook Chrome Extension[​](#step-3-install-the-growthbook-chrome-extension \"Direct link to Step 3: Install the GrowthBook Chrome Extension\")\n\nThe GrowthBook Chrome Extension allows you to use the Visual Editor to update your Shopify store's content. It's free, and you can download it [here](https://chromewebstore.google.com/detail/growthbook-devtools/opemhndcehfgipokneipaafbglcecjia).\n\n### Step 4: Create a GrowthBook Visual Editor Experiment[​](#step-4-create-a-growthbook-visual-editor-experiment \"Direct link to Step 4: Create a GrowthBook Visual Editor Experiment\")\n\nNow that GrowthBook is installed on your Shopify store and you've installed the Chrome Extension, you can create a new experiment using the Visual Editor.\n\nFirst, navigate to \"Experiments\" on the left-hand navigation menu and then click \"Create Experiment\", before selecting \"Design a New Experiment\" and following the on-screen prompts.\n\nOnce you've created your experiment, select \"Visual Editor\" as the editor type and enter the URL of your Shopify store.\n\n![](https://docs.growthbook.io/assets/images/growthbook-shopify-open-visual-editor-f072a9027330bae106caff5a7a062585.png)\n\nYou'll then be redirected to your store, where you can use the Visual Editor to update your store's content.",
    "title": "Shopify Integration | GrowthBook Docs",
    "description": "Unleash the power of experimentation with GrowthBook to supercharge your Shopify store—no coding skills required!",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/rudderstack-and-nextjs-with-growthbook",
    "markdown": "# GrowthBook, Rudderstack, and Next.js | GrowthBook Docs\n\n## A/B Testing with Rudderstack and Next.js\n\nThis document is a guide on how to add GrowthBook feature flags and A/B testing to your existing Next.js application using Rudderstack for event tracking.\n\n## 1\\. Create a GrowthBook Account[​](#1-create-a-growthbook-account \"Direct link to 1. Create a GrowthBook Account\")\n\nYou will need a GrowthBook account. You can either run GrowthBook locally or using the cloud hosted GrowthBook at [https://app.growthbook.io](https://app.growthbook.io/). If you are installing it locally, you can follow the self-hosting quick start instructions here: [self hosting instructions](https://docs.growthbook.io/self-host).\n\n## 2\\. Create a JS source in Rudderstack[​](#2-create-a-js-source-in-rudderstack \"Direct link to 2. Create a JS source in Rudderstack\")\n\nFrom within your Rudderstack account, create a new JS source.\n\n![Add Rudderstack JS source](https://docs.growthbook.io/images/guides/rudderstack-7-create-source.png)\n\nName the source whatever you like, in this example I'm using `GrowthBook JS`. When the source is created, connect it to your BigQuery data warehouse (or whatever destination you're using for GrowthBook experiment data). You can read more about how to connect to your data destination [here](https://docs.growthbook.io/guide/rudderstack).\n\n![Add BigQuery destination](https://docs.growthbook.io/images/guides/rudderstack-8-source-w-destination.png)\n\nOnce you have it connected, copy the write key, as we'll need it for the next step.\n\nUnder connections, you should now see the JS source connected to the BigQuery destination. You will also need the `Data plane URL` which appears near the top of the page.\n\n![Add BigQuery destination](https://docs.growthbook.io/images/guides/rudderstack-9-connected-js.png)\n\n## 3\\. Integrate Rudderstack into your Next.js application[​](#3-integrate-rudderstack-into-your-nextjs-application \"Direct link to 3. Integrate Rudderstack into your Next.js application\")\n\nWhile there is plenty of documentation on how to add Rudderstack to your Next.js application out there, none of those implementations are very Next.js like, and limit the ability of Rudderstack to integrate more deeply into your code- including using GrowthBook. Below is the integration code that we came up with to address these concerns.\n\n### install the Rudderstack Analytics package[​](#install-the-rudderstack-analytics-package \"Direct link to install the Rudderstack Analytics package\")\n\nInstall the javascript SDK for Rudderstack with yarn,\n\nor npm:\n\n```\nnpm install --save rudder-sdk-js\n```\n\n### Create Rudderstack loader[​](#create-rudderstack-loader \"Direct link to Create Rudderstack loader\")\n\nCreate a `rudder.js` file in your Next.js project. This file will load Rudderstack's SDK in a reusable and asynchronous way.\n\n```\nlet rudder;async function getInstance() {  if (!rudder) {    rudder = await import(\"rudder-sdk-js\");    rudder.load(      process.env.NEXT_PUBLIC_RUDDERSTACK_KEY,      process.env.NEXT_PUBLIC_RUDDERSTACK_HOST,      { integrations: { All: true } }    );    await new Promise((resolve) => rudder.ready(resolve));  }  return rudder;}const rudderObj = {  init: getInstance,  track: (...args) => getInstance().then((r) => r.track(...args)),  getAnonymousId: async () => getInstance().then((r) => r.getAnonymousId()),};export default rudderObj;\n```\n\nIf you want to add other methods, like `identify`, you can extend the rudderObj.\n\nYou'll also have to add the Rudderstack Key and Host to your environment variables, or add to your `.env.local` file:\n\n```\nNEXT_PUBLIC_RUDDERSTACK_KEY=<your key>NEXT_PUBLIC_RUDDERSTACK_HOST=https://<rudderstack host>\n```\n\nThe key is the `write key` from the JS source we made in step 2, and the HOST is the `data plane URL`.\n\n### Integrate Rudderstack into your Next.js application[​](#integrate-rudderstack-into-your-nextjs-application \"Direct link to Integrate Rudderstack into your Next.js application\")\n\nIn your `_app.js`, add the Rudderstack integration we just created\n\n```\nimport rudder from \"./rudder\";\n```\n\nThis will allow you add `rudder.track()` in your app anywhere you import rudder.js while sharing the same Rudderstack object.\n\n## 4\\. Integrate the GrowthBook React SDK into our Next.js app[​](#4-integrate-the-growthbook-react-sdk-into-our-nextjs-app \"Direct link to 4. Integrate the GrowthBook React SDK into our Next.js app\")\n\nWe first need to install the GrowthBook React SDK in our Next.js app:\n\n```\nyarn add @growthbook/growthbook-react\n```\n\nGet the API key from GrowthBook (under settings → API or from the top of the implementation instructions) and add to your environment variables (.env.local)\n\n```\nNEXT_PUBLIC_GROWTHBOOK_FEATURES_URL=<GrowthBook API url>\n```\n\nThen we can modify the code to work with GrowthBook. Modify the file `pages/_app.js` to add GrowthBook and Rudderstack. Import GrowthBook (and Rudderstack, if you haven't):\n\n```\nimport {  GrowthBook,  GrowthBookProvider,  useFeature,} from \"@growthbook/growthbook-react\";import rudder from \"./rudder\";\n```\n\nthen create your GrowthBook instance:\n\n```\n// Create a GrowthBook instanceconst growthbook = new GrowthBook({  trackingCallback: (experiment, result) => {    rudder.track(\"Experiment Viewed\", {      experimentId: experiment.key,      variationId: result.variationId,    });  },});\n```\n\nnote\n\nThe names `experiment Viewed`, `experimentId` and `variationId` will be mapped to `experiment_id` and `variation_id` columns in the `experiment_viewed` table within BigQuery\n\nThen add a `useEffect` hook to update Rudderstack and GrowthBook when the page changes.\n\n```\nexport default function MyApp({ Component, pageProps }) {  useEffect(() => {    // Load feature definitions from API    fetch(process.env.NEXT_PUBLIC_GROWTHBOOK_FEATURES_URL)      .then((res) => res.json())      .then((json) => {        growthbook.setFeatures(json.features);      });    // TODO: replace with real targeting attributes    growthbook.setAttributes({      company: \"foo\",      browser: \"foo\",      url: \"foo\",    });    // Add in Rudderstack anonId when loaded    rudder.getAnonymousId().then((id) => {      growthbook.setAttributes({ ...growthbook.getAttributes(), id });    });  }, []);  //...}\n```\n\nThis code adds the `id` with in GrowthBook to the Rudderstack anonymous\\_id. If you want to load user\\_id as well as anonymous\\_id you'll have to add this id to the setAttribute, and also call the `rudder.identify()` with the user\\_id info.\n\nFinally, wrap your Next.js project in the GrowthBookProvider component, so we can use the GrowthBook methods throughout the codebase without doing addition instantiation.\n\n```\nreturn (  <GrowthBookProvider growthbook={growthbook}>    <Component {...pageProps} />  </GrowthBookProvider>);\n```\n\nAll together, your `_app.js` should look something like this:\n\n```\nimport \"../styles/globals.css\";import {  GrowthBook,  GrowthBookProvider,  useFeature,} from \"@growthbook/growthbook-react\";import { useEffect } from \"react\";import rudder from \"./rudder\";// Create a GrowthBook instanceconst growthbook = new GrowthBook({  trackingCallback: (experiment, result) => {    rudder.track(\"Experiment Viewed\", {      experimentId: experiment.key,      variationId: result.variationId,    });  },});export default function MyApp({ Component, pageProps }) {  useEffect(() => {    // Load feature definitions from API    fetch(process.env.NEXT_PUBLIC_GROWTHBOOK_FEATURES_URL)      .then((res) => res.json())      .then((json) => {        growthbook.setFeatures(json.features);      });    // TODO: replace with real targeting attributes    growthbook.setAttributes({      company: \"foo\",      browser: \"foo\",      url: \"foo\",    });    // Add in Rudderstack anonId when loaded    rudder.getAnonymousId().then((id) => {      growthbook.setAttributes({ ...growthbook.getAttributes(), id });    });  }, []);  return (    <GrowthBookProvider growthbook={growthbook}>      <Component {...pageProps} />    </GrowthBookProvider>  );}\n```\n\nOnce you have data flowing into Rudderstack, you can set it up to work with GrowthBook by following the [Rudderstack guide](https://docs.growthbook.io/guide/rudderstack)",
    "title": "GrowthBook, Rudderstack, and Next.js | GrowthBook Docs",
    "description": "Learn how to use GrowthBook with Rudderstack to easily add A/B testing to your application running on Next.js",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/kb/experiments/aa-tests",
    "markdown": "# A/A Testing in GrowthBook | GrowthBook Docs\n\n## What is an A/A Test?[​](#what-is-an-aa-test \"Direct link to What is an A/A Test?\")\n\nA/A tests are a form of A/B test where there is no difference between variations (each \"variation\" is labeled as \"A\"). They are used to test whether your experimentation set up and methodology is working as expected.\n\nUsers who are placed into your A/A test receive the same user experience regardless of which variation they view. Thus, you'll expect to see almost identical results for each \"variation\" since all users are viewing the same thing. This helps to ensure that you've integrated the GrowthBook SDK correctly, that traffic is flowing as expected, and that your Metrics are defined properly, all _before_ you begin experimenting on features that matter!\n\nBecause all users get the same user experience, any variation in traffic flows or Metric values can be attributed either to errors in your experiment or SDK setup, or to random chance. Metric variations in A/A tests are covered in more detail below.\n\n## When should I run an A/A test in GrowthBook?[​](#when-should-i-run-an-aa-test-in-growthbook \"Direct link to When should I run an A/A test in GrowthBook?\")\n\nThere are two scenarios in which it is a good idea to run an A/A test:\n\n**You've set up a new SDK connection.** Once your SDK is connected and you configure the trackingCallback method, you can validate that the experiment data is being sent correctly to your data warehouse.\n\n**There are changes to any part of the GrowthBook integration**, such as changes to your data warehouse, the tracking libraries (Google Analytics \\[GA4\\], Segment, Amplitude, etc.), or changes to the GrowthBook-related code within your application.\n\n## How do I run an A/A test in GrowthBook?[​](#how-do-i-run-an-aa-test-in-growthbook \"Direct link to How do I run an A/A test in GrowthBook?\")\n\nAn A/A test is run just as an A/B test would be run. Follow the usual instructions for creating an experiment and ensure the \"variations\" are serving _the same values_.\n\nThe feature for your A/A test will look something like this:\n\n![A/A Feature Rule](https://docs.growthbook.io/assets/images/aa-feature-rule-e926211d6ee6c61d3930f53ae5ec159f.png)\n\nThen, start your experiment just as you would any other experiment. Wait until it has been live for a few hours or days, depending on how much traffic you get, then take a look at the results.\n\n## What problems can an A/A test reveal?[​](#what-problems-can-an-aa-test-reveal \"Direct link to What problems can an A/A test reveal?\")\n\nA/A tests are a low-risk approach to help ensure that your experiment is set up correctly.\n\n### Problem: No traffic, incorrect metric values, or SRM errors (imbalanced traffic)[​](#problem-no-traffic-incorrect-metric-values-or-srm-errors-imbalanced-traffic \"Direct link to Problem: No traffic, incorrect metric values, or SRM errors (imbalanced traffic)\")\n\nFor these errors, check our [troubleshooting guide](https://docs.growthbook.io/kb/experiments/troubleshooting-experiments).\n\n### Problem: Metrics show statistically significant lifts in the A/A test[​](#problem-metrics-show-statistically-significant-lifts-in-the-aa-test \"Direct link to Problem: Metrics show statistically significant lifts in the A/A test\")\n\nOne goal of an A/A test is to confirm that all of the Metrics appear balanced across the two variations. In an ideal world, there would be no statistically significant Metric movements between the two variations, because if everything is set up correctly the two variations should have produced identical results (or nearly so, due to random chance).\n\nIt's important to remember the uncertainty that underpins all experiments. In order to state that an experiment is a \"winner\" without collecting data forever, we often accept some level of uncertainty when declaring that a Metric is clearly positive or clearly negative.\n\nThe default level of uncertainty that is used in GrowthBook's Bayesian statistics engine is:\n\nnote\n\nThe probability of a variation being higher or lower than the baseline is greater than 95% or less than 5%.\n\nThis means that some percentage of the time, your variations will be identical but still yield statistically significant effects.\n\nIn other words, about 10% of the time, you may see a statistically significant effect in an A/A Metric even if the test is set up correctly. You can lower this value by lowering the \"Chance to Win Threshold\" in your Organization settings, but that just means it will also take longer for actual A/B experiments to reach a significance level.\n\nSo, how do we use this information about statistical significance?\n\n*   If you have an A/A test with 10 Metrics that are different from one another, and 7 of them are different in a statistically significant way, and the differences are large (e.g. not 96% chance to win, but 99.9+), then you can plausibly state that something is wrong and you may want to dig into your set up. Use the general solutions in the trouble shooting guide as hints for where to begin looking for errors.\n*   If you have an A/A test with 10 Metrics and 1 of them is statistically significant, or even 2 of them, then this is very plausibly due to chance and likely can be ignored and deemed a successful A/A test. You can restart your A/A test with re-randomization to confirm this if you want to. You should see a similar number of metrics reaching statistical significance, and they should not always be the same ones.\n*   Things get more complicated when you have 10 Metrics and 3-4 of them show statistically significant differences. In these cases, you should consider whether the Metrics are related to one another. If you have three \"purchase\" Metrics that are highly correlated with one another, then it's plausible that one \"unlucky\" draw caused this statistical significance and the A/A test is working fine. In this situation, you should consider restarting your A/A test to confirm this theory. If all three Metrics are quite different from one another, then it's stronger evidence that something may be wrong in your set up.\n\n## Restarting an A/A test[​](#restarting-an-aa-test \"Direct link to Restarting an A/A test\")\n\nIf you found some issues with your set up and want to re-run your A/A test, or if you had a Metrics imbalance that you are still uncertain about, you should usually restart the A/A test and run it again.\n\nThe easiest way to do this while still guaranteeing you have a clean test is to use the \"Make Changes\" flow in the A/A experiment page.\n\nUse this flow to \"Start a New Phase\" and make sure you \"re-randomize traffic\" to ensure that users returning to your test will be re-randomized into variations.\n\n![New Phase](https://docs.growthbook.io/assets/images/new-phase-23dcf77f0ae9ecdd01184c5386ec73aa.png) ![New Phase, Re-Randomize](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4MAAADzCAMAAAALgzOUAAACfFBMVEX////39/eKiorKysre4uZ8ReqGhoYXEyGEhocHBQ2jqMLv7/BsdX2Egob8/P309PWSkJX29vaedvDh4eJ3enz+/f4aFSR6eIDz8vMbFyV9R+qEhYfMzMyvrrFua3Pl5efW1ti+vcCNi5FAIX/T0tTEw8a0s7dKR1HMy87bzfqIVu3p6OkfGyns7e09OUUjHitTUVr4+Pnq6uvQ0NJNSlNBPUjl2vt3d3jGxsjBwcSJh40vKzcmIi6pp6uIj5ViYGj6+vri4+TPztC7vL8zMDvx8PHZ2Nl3dH3x7P1jZGZGQ03e3+EeGSazlPTn5+iGhIppZm9dW2NOS1X69/77+/yWlJllYmo7N0PTwPltd39sbGw3PUDg1Pvt7/Hf3uCmpKmioKWEhIfYyPm4trqZmJ1XVF5DQEnApvafnqKBTevN0NJPUVQsKTUoJDHu5v29ovXc3N7a2tyrqq6QjpRbWGH39P6QY+6FUuy5ubyKWe1oZ2n18f6zuLywsrY3ND81MT2prrODgYhQTlhIR0r7+v7IyMt+fIJxb3dfXWYqJzCTZ+7Q09UBQIpwb3FaV2AfHiSphvKjfvHi5OqdnKGbmqB3f4ZxeoJZWFvV1NZHZIl8eoAMCRLPvPixkfPn6O6BiY+BgIN0cXqhevGYbe+NXu6xsLOkqq+Olpt7g4piYWM6N0Dq4/zCqvaujPOvtMqtrLCLkphndYdjVIPMt/fGr/fFyNiaoKWTm6Dn3fu3mPSbcfDJzc+epKlycXIxLje6nfTc3ujY2uXT1eLO0d6/wtW6vtHJsveEjJLp4fzw8PXKzNu2uc6qrsdzbIWHh4cSEBfo3/ynq8WiqK0kUoqihh6aAAAbm0lEQVR42uzaPWvbQADGcfkxWDyDSQtZMnVp0y0NVOFS8NKQ5aAUuuag7VBMQR07aT0IeDAeBdWiVf4O9kewv1LvfAKH0IYscaE8P/RyGu62P0IvGe5pWOJhCy7Rq8jORLdYkXOIyGMYt88sS+GMKr/23b7B2vsxcFwvl7UB0HofT8b79sZvufBl3+A+vL7Btptel3FQ7pazvkzzRhCRqLT9wTqDIGMRE5wxWo/7BmuyA6qGkQUMWaXkjs8ZnfylwV85Iw+ccQZgQrZAwQ8QkZ0yphc2OIcoI2tgzaaoioY+NdiRn4BVw1nXzdjM7zZobM6Zrf7cYLtgXldn3K3RbDBOCa85hYgkFtY5F44GUfaaExyT57FP5pvY4E0Tu8QF8xYY51zebfD+8+BkHY1Sg11q8po52jisOIn5bWkhIj3rShN2JJknRx15i17DH1sWCN7wDMGUi4caTMapQc8TBDauN+E5PG+a3ewxRCQwBtjlZ5zZXSAjuSrY4Nvp5VBEntir73M4i8BZ65wBss7atia/Xn0ciMiTe3/1xZUArLPGxkGGYMWLt0cDETmAo5dzZ2FKhyQr8sVms332eSAiB/Hi1LrAIMnIn8D8nW6DIgfy/BLWplczUbawCIYDETmQIWD6j/VBBqhBkYMa9v+LGqhBkcNLDVoEalDknxgiUIMij6UGRf4zv9mrY9a2oSgMwxw6fIOGW+PBylDLDqpzIcgFpwa7bobapgG3JJBFWzLYNV0MCungKdBCarpn6OohS5f+xZ4rtaYhgyI8hIjvWY7gCh0tL5cNEhXCBolKhg0SFcIGiUqGDRIVwgaJSoYNEhXCBolKhg0SFcIGiUqGDRIVwgaJSma7Bs35rWzD1GdSULRZTFQKD20wGXetOIdXE9nw0Jb7vnZTU8mVIJZcZ9eB/GVXY8S1KFtMVAoPbfA9cCTOBK/yGqyj/VqNJF/vQnK9waFkGgvMV23M37FBekrMvmSCLRtEpNMibdCErd6/68hYa0SikTWbBpdZoda6cGzHtw0JR5E45rrv6Ti2Va/fMPan6KEZTvfFbzajuy/4vaE+hCvsWl+Uf4WZnq+xmy5uTD9kW1oHvrjPVMK+ESdsRh2bpNUug+z3Wy87QvQozO+bY3FGz5OtGhzgXGcNA20w+ATgRy9NobLCpcjlDrB4drdB8w23knyMvSpOa8DOjYg03+rDZ5EXqMU4CbAnergGBgddYJz8/8L3CTC/kD2otLYhTis6gi9rt/gEcBek/aVzUnWfOQIGUz1v65y5a/ssBlA34tV1LpZC9BiSP+zczUsicRzHcT7s4XOYw4wEo3NwNxfdgjIzDcqUyLWENnyCHNhDCj3gIWGrPXQqDKrt0kUPy57q0KVL/+J+f9ruuJG7RLBG/N4gPn356eXFMOOMltWZABCyrLtnGfQnK4CRPhsTg0X7fbjOsa7BFFvAPsuJ+YWLpXuDByEpgNG1I6PEiPiwKzftmH2K0djRfHbbDgkx+20w2zNon80v0knNl5nqH3DWDy9pIXHO1FwAUo0t3GfQroaKjJlIxoJhP1tqmfOQn5fANqsft2JicHnW2R89Ywo3zM+M51z9r6m6oRT/rhAqghnzeQZrDIu1hBjs5doBMdig3weUWVBGgvcGu70DLFbph/hw5ElHNKzzg1orj6DSgp7BHJDgDnDKxf6Bqno52bc/eMWGZ9AxgFvuQTXCabldmDCbTjRq50Tse+bxhmeALzeFDvNR6HTDKh4WhEEh6MO/DX7u9rjBaKyF6TEog2a9NHZLGgYl5cBmLpcjW/cGrXkpIHOrXIgqI6sAxoVYiTK4IPKCLP42WAH2uA18Z7l/IAUE6PYZbLDoGXQBVJnAxMG3VYeV3jI44ac3XARwyLzM977VzJJLJ2m9g043nBTCAVtBMfi5v79uB3G9m2BdDCpl1fZdz+Ask4Jtl8FgMBMc798flKLHdEaVQSUmwhLOmVKDm4rYYwa9gUcMnvIrpEA9A4NTPYOB28l8vc2kZ7AHviYGM6x0v5WB5Q/+I7rL0OmGU3xLDBae+9uEXwxMTc4og+bagg9GTBnM+apsASUKtUJk44FBP9ftE1N82AngihYarAuiSGKQQW+g32AH3YwmbwB0eO0ZPBXYmOs3iBwz5hdXDIbVexiPYCVrwKwwAZ1uOM1bUnvm2QYxy3OIQfWgmJl2aCgKhWMhF1lzG/UpJ3tvcPutNNfd8vnZEB/NXKvE9B6WjmIH+1/ZGGTQG/AMhnj0PgpVxJmsWlWmw57BJabbDfcPg3MOYyyJQfMb83c/WMU6y4f7zV19TEY3pCKWVTu1rMbMsw1uMdIzmHUZa+z0DGLO2R3B5qpN9xD9x2TuDHdyA4VmbEN87Ke5GlLrbE+yuY5BBr0Bz6CZv+UIum2eOLQrK/AMItPk8Yf+/UFZolOMhOiXqbcXdK6jCBTTtJNh6HRDSREMxBOCMPpkg4MrmHjQTAGDEh/eqQLLIz4MaOCA92HRrIE/8717MF5ry0iLNUjmiNkbGjGg0w2nFUUQiGctKzOs6yaUwf9XkTv+acfVh0F1L6T4R0VQIdyaGJbBQvkK/y9fZnH2sqhPTdO9mOLmr/u4vn5Qp3txaYM63ZPSBnW6V5Y2qNM9KW1Qp3tlaYM63ZPSBnW6V9ZP9umYCAAQgIEY/lVjgKULw1/iIQ7CxEGIcRAmDkKMgzBxEGIchImDEOMgTByEGAdh4iDEOAgTByHmfRD45X3wAJ84CJd9OzaBEAqiKBouk29TtrQFLBgZCnagxWhLYiwi8sDgc04PN5hh5hENQmNODf76ftEgBMIGx6pBg3BFg9AYDcIjGoTGaBBedN/gX4MQyBucNAiBvMH1aPCjQQiE82BXVRqEQNjgV4OQyO9FNw1CIG+w0yAk8r+J2V4U7vhdglZoEHb26961qSiM4/hveXiGQNQjNzQXfGm5aXNTtWjjoZKIWt+CGEHrS5AMJUFjoSQqJkWCiFKrZrLoJO2gtVMbHOqgXbo6+ifZY0zSvBhTrKG9OZ8pZHim3xfu2RTdoKY5jG5Q0zZFN6hpDqMb1LRN2eENyowImGZAZCQ0rf3NkJNH08kGbUEVwoamtbMZx4+mgw1GqUYUmvbXzXTBaDrWYFZQHZGFprXeTDeMpmMNCmogoGktCOqK0XSqwSgp3fBloW3dZrpjNB1q0KamnPnG1rZoM10ymg41KKgpgX/yYrwXZe49UKyHe6E5gqCqqU2PJjGbRksG2hRZiaPeDmxQ0h9IlL07/tt5tKuPvRdRkrwZ9gy8M9R//dCcQFYDjGURSZlNRrOay+UKxRiaKFIMLcRyZi5Rc2d1LdE8S5vmUW8HNpihP8igbDwYvMvhYDDYfoOhy4Mo6WfPnf0h3u/WDTpGZTPmEhLLaSw3GU2AxMcCUQqN8ra7ZeAfY8JMV+8UFqaI5p3coKB6osl3hcWPAAxaVwAcsA6ftu7jga8Hyi6f5UbZrhH/UcA1zE+tM1AuXPYOA64BHlEN7vGNHsU614uzew3gjNVz/sQVKNf9fvcVy7Xh3vWDSes0tG1IVKaCOaJPiFCZ2NDgmGpkwgAQSSwB+C7HAEhppGUWQNaWBjAm00BeRoCIzEP5QnHYFNt4x5ABSqFyaFp+xw87W2nQkIl86bL6/RXYaQ0GqE4KgpRAY4M+vgrgEVuD/HyG2XsPwG4v8+thlNzwMh86iSSv+wDlHvdh3cjVcfTxjRDzpfPAviFmfnka7/ltmD2n3IA/zHztGfdX7x0YYOa7+gW5HVU2kyvmiMzpLJUFahvEY1rC9CwRFfL4RitAhAqIUgLImERTEnlzAUjRGyBKcShfzfnpNxPp2jtxyqFyKEILUSLzy+8G7Qkis2hgQR2I0+x/bPD2L1veoNmQYIp+MRsbdIcu70KP9wgG2fM8OT7kGcUivzo4cm7yGJR9PODrveXxufwcGi3l85J7q2/E8OfkJX4L19AR//Ad7sV7nnyyeIRH4ZrkPt+Ml/ur92b4Yc/i0EVo20/tZtYwR2VmbYNpmjJQpLWlFXMVUuWxQstQDc7RT/bt5LWJMAwD+CPy8kHEWCOpOmCtgqmJteKKS0URl6FuxbQyh1GDWx2wiVaTMQQRS3DJQRLxIFJEk3iy1YMR2l7cg9tB/yPfWch8alQKig3kOTzTLzN5W8r8mCRkiuPhiKmipGQRsA7LGdnaK10zHIz6ZYMwKVkbpJJS0iqGotsG3xuGphf5r6hSAnhB2j80ONvOPzQoE6xvEFfFJZwQLWxw4UrnGndDzAKGGA+HF+3AJjEffnEFTjrEec9gC9jYQ9i5LC6wwRgQE5v5OW0ATomQN++wGPLjp/h8PgSt8vt8X53q8/k+Y7tVq916grm1mlOrD259cuqIW++cui/XW6luu/VcqpdyfXTqlVtvpHrt1mup3rj1SqqPbr106rlct6V669Z9qd7JdcSpT259cOqJW3NqNbdWq/HZre1W9eGrz+d3iv/NQav+cM7kg6pZ1+D+ibzBLIJGDkCeVKSMKAoUtw0WKWOB1BiNnjXGaDyqFGAnniN2GqcByAYnaUNtEBvMABVK2AZHqQIklTIySg7W72g8g5G6BOu/FuXNHuwRR9lgj706jFaxc+dOIQ7Cys1OZrNS9EgGe8Uyz+BloF30AucPnjotGPA9a+dGNntSnAGwWYS8eTNXie4bQ803hNMx8jlTyKopqvta1DQVxoQvROl0mtjdAB3PGpOwDSrOgxPQqaJT3OCqOgTN1HhB0cKkyQZ5k6kNUomx2ZdVNsgodbA9yrBrNU55AI1mMEBOArpMsP5nMkDXlr4tHWCDXQCWizZsEaFQ6GloLaxcaV0NLBbDnkHWdRKcxceWscGQY3D3qp1Lh9pkg5dtxNdFSJo3a+v1bnEdzUy/BKiWYlbNEf3iM5mEJSJOpGnaiBbnn/aH6ZljMOI8uAFZI59IoVAYpcewMso7o5NKmcZlg4+p7A1SeQHGm7cNjlEYQFmJQqNqlZ+NhjOYIDe6LhHkJOoZ7BcxccYy2NoOHBT96BXnmMvyxe5FbxMwJK5KBneI7nmAv1c8qhlkl8d4kmxwXuvg3eCyThHy5t1t523nIJqZfkl45uSrICcB2WDSVMYRNNNZlqgngVJ6v5JxDObpPZDR40AxPbkfFaOQhp0Ji1SSSIFkMJOjCW+QSjyWDxywDVbpBRtVckDUKBbNbAMa3EAeQpkgbahncJ4QrQcsg4NXDrZZvGZ2dsW2di1sB4cXW/qXdg+elwwyuLPz+w+J0zM8gydEz9OWbtkg7gjRvWqbCHnztomry/r54GamX2rnTCkKdYRTlk4a2c4oFa0KjAwYaV5WySjAMagb5eqzlGWpQrx8TzQGOzqln4UHvFERyudLChX83iCVzPREnoy4bVAtKxOjKRoBMEa8RuMZRMBDKBMMoJ5BDItTsAwOLxoUPSwISzpaRdcmcJzFwuEdkA2if70QnW1z4Bn0P+gUwzHZILCjpWUeH+DNW3N4Hz9tFpqZhgmQE9cNStJJIxuMRigMDJR5z2MAGYU01yCO5xQq85b5KUkgzXucHE8TmXk9Yn5x5xBFCpUsUBukUmnEpFwYtkHEAwalngHWknSgAQ1O6Tvb/nUi5BiEfxec7JKhLJiDn7Jidx++z/YfbO2KLeLuEHvleX0H/GhmWmaq39lWo/g5yQzqJ6MCvxvEBhFMwks24/KlVBBA4xmcyr1LQ6dEj981+FczLG5d6xGH0Uxj5L/eu8QG6z48ZpIGoBENTuEe3vkd13aBM+vGVfzVzG25uL431rzufWPnjm0ABKEoirKLm7mG2xA7Ozu300CrickvBDlnh1u+140vN7xLPtKNbc1zunTZoC8LfFm8b9CnE20Y8dOpNujbkEYM+G1YG/TxSzOG+/itDfq6h4BQg3uhQQgINTgVGoQnGoSfOdmvgxOAYRgIgoW4uhScnoL9FCigl+GYcQ3LWaXB99Ag/HAPQhJ/URjRIITRIFxVG3wODULPDkIUDcKIBiGMexBGNAhhaoNrPw1Cyw5CltLg2uwgtDQIYTQIIxqEj307Zo0TjOM4/pNCKdwfRa5CtkuHjg65Kbc8RI5MQqYuz3BvwCnZOii4ZHJWurlFRydv0D17XlHP50IaCqG1V1rQ32eQ58/zrF8QHp6JYYNEo7BBoolhg0SjsEGiifmpwQ8GGyT6Z959fI0NEv1r7z68xgaJfoENEk0MGyQahQ0STQwbJBqFDRJNDBskGoUNEk0MGyQahQ0STcxfbTAKMJYT7UA0Z3/eYPx40Hd4RVKMFUoEojn78wYfJI7TWmI2SPQXG/xo/GaDNuCVhQ3ACt0fDS5CGwMnXJmFvTruwl4u8Gy3wC60Xxrc3foeYK8d78YH0az89HbpvfH7DSKRNewnLbq3jw06jUixARBrkTwElrXWegvgcyGirmGo6rBd3B8bdFsRaa7hStKIVAsQzci796+NbtB7zD0kOnKyIjEN2k29dGLJcFtsnaBWQKPcqzhf41wnZ0GpPAyU3gfLSi9Ng9v8m5NJAleKzv8kGxDNyCkNxnFa6g2QpwDS2jR4IxGAxx5Goq9QNy4GfQkgkvVzgy6wkNg0aKgKrvSAV1cgmpFTGlSqlg7w5bBSIouhwU70MJTAbbJvRCzc66LaLgBzSj8npxQO6tY06HUPeyUKrsQA9iWIZuS0f9FAHoCFVFmWRZk1NBhJPAzniHR7mSmxgLPLXudr5GJO+RgoE1p+bDDVaZdJwwZplk5rEL1eAXUPwLnxhgbXcglg56PNbaAVy/Yt4E4u8VTbwMWNhYHSPrCS7dCgV7SAnbNBmqcTG1zrPbCReBnVFYYGvba4DzY6RiKb4Gsh1lX+GPqpBAiL9vauyh0MVK66rizWQ4OHIQv7gg3SPJ3UoPneAdtSdOuYBnH1lEsR23D2Wp4SsbBUWuoIwPlh0QQwVNXlos5hGlyVUmwqNkjz9EaDY519wQvv2sbAusDRhYMj18IzVcF28MKxQTRTJzR4CsULCKL/2mCagIjebJDvB4newgaJJoYNEn1n745tGAahKIqm8ArezC0bUdHReAdmyUKRqGPF8UsUKTpnhyvgg8RbNAh/5lmDQ4MQiBvsVYMQSBvstWsQAlGDM0HnQQiEDfbazWQgEDY4E7QXhUDWYO1mMhCIG5wJupuAQD6TGefOg2tpC3ColfVCg/dax7mZzLqX7QYc2sq+XmhwjJNv1Yq/WiCoJH8v2qyC8MLWvtngcgOCTA4aHJMG4VcN1kmD8BGLvSg82Lt/nzTCOI7jH9vhGS45IJbzSPghBH8kdwiCJCoYDig0oRf8EcANTADTARIBB5ZibNKqi4sOplMdunTxX+zzcCBXhKTaNNbmeQ8md/nyvWd5RdBEHxU3yOP9X3GDPN7j4gZ5vBeRkxvk8R4VN8jj/V9xgzze4+IGfy2TXsXfypa2TXvqxwJ+v8h3AZhdPMLnLHi8F2Cw80kGbTk6g6l1SDS69MUPzJMw/lZJUsbkXOQGE1OOJpzVcVnGgmOpi14JPN4LMDhHbkFbIDZMic1Uq7W1eOqZDGp+OyZmzeFBJzUAt+cAZsPg8V6CQYl07w3aj9hXiwAgIwMIzBgzu6BF3cygljWwzmTDYBVaHkNI5j3MKVph3mZsHCVYUA4DYnlWNK48AvrJWc0waC8LMI4QOBIhHuWZQcWOsMLS2FVLHG7bjioyG1XKw52riuRSNKU+p9ggyP3NLQ083j9tMGFtKAODrpiq72jwxkVg6RKwOVImg50TanAxrkpFAEWHSvYCQDX+Vl9KAvKxQz3ZwH2r5KBJ/MONw0KnS+QK3oYuxSL0avtSdewEANFNX7zIDN7FVGkvD/hCp0FST+ZUktCwTCxo6rruICnYT4NqvDjYJhH9Gx39SkrDnV2dOPSILkl6G5ebQIYeS62Bx5tsUHZmMcjjfD6Dhb1ze9/ga3WxkDycg8XhhxJULVhoiiaDl7vU4HHAZiXv4Y8tiMmVU1jUNmZKc8BuXVn9EC+bDK6kNHGwcWQw/tFWsK3UNMGdY1cbYiRWATYvIqK/R9jnOJcWLuVW4dMPxFazsY6Uw8sMDo4hohibF9eDH03vRX0OX2C0E5IXwO42wAza62tJrUtX8HhTDA4RZp1O+dkM4n2w0jf47hbARlBE/QNc7roXnZ3BzJogzPskFzW4DMiORfTr7CFPqmAlySyAtWuTwTYw2jg0eIZB68SGkJuNHAPMIdrU4C27I5AUfD0ApRKAw9rQ4F1PAHps7WbCbPCtaeeYwVmSZfcj4PEmGoSHIpQNgh78qcE3/Z5iEFtqmRkkJJFIRMkRaiWcua6/od4ezBDafgXUoALgZAvwW3eOiQqcSkubfqBKEjTiNhlcB0Yb93XaLEId0PJXZ+eEZIyrq0OECUOSpQajNdD2D+ALAXC/Y66LA4M3zRsgQBrsOZLZYMi0c8xgNcj/Wz5vokEzQqcsOxnBJxh8Yw6v+j3JIEprXmowFkqn0920gPmm1gi39mf0/GAm6vEEgOHvJnpbSKtzro1EFICnkpCs6JIufW01NWbwfqM/RVs11CUb5xVvjQj3BgWSYsaowVwRzHhlgkGhdwfQUR97jnfc4HDnmEGvzn8gw5ti0IzQIPgEg6/M/ZHBcKPJ3ou6AYhhEfbY1hr7dncImD4Pmg26SwDe5aDJAIoNeEgLQEYeM3i/0chQV7koAC6TQZxcAzggZeMweeJ/aFDc/QrWjwoAmzAwGDUMjnaOGcyTZQDVz+DxphmExyD4zAaRJtRgRK0pSfehSO3ErMCX2PZUg5ux+Uz7IkdvbM0IpXNgJxfJpOOL8FiVkcHRRrPBDVK1fI6aDdaCXSHdI2U6X1RuQvXCQ4O+w7wgCAUcxNOCP/cF/bzSQoaOjnaOG4R7ZTmwRfgfPv7Z3h2zNAwFUBS+gvCGQtQhNQ5WHNoMtkPARVSsYnEp1KHiFHF0iJurq3Tu2KHgPzW2YGMlpE8tTR/n21qSux1CCCHIbXAa4YFW3qB20wZ1GFbNy6WkhrlKf5l6boOVQdXUtkPp/HSve3EkbbwnJnmUGs1o1uBsMdug12ua8DVzPyi/l5iwnjaok+Pq2W1HPxtsmtTn5t296Y4iTUS157f00MzmfIPRTWKu9wUov0EFgVbQYI7Ojha0FWiq0taE1/IlbQ8WWGxXNMf7+ifwVKDVz5zn5Wxml4GiZ/QlavDPak8CSsz9BkcPAkrM/QaBcqNBwA4NAm6hQWBN0CBghwYBt9AgYIcGAbfQIGBnrRrkW9hAkf5wmQ3GsQAUVLLMBv1xzJUQUL5+PPaX2aD8eLgJINcw9vXbBnllHPgXNAiUHw0CVmgQcAwNAlZoEHAMDQJWaBBwDA0CVmgQcAwNAlZoEHAMDQJWaBBwDA0CVmgQcAwNAlZoEHAMDQJWaBBwDA0CVmgQcMz3Bj8A7Se/oX8B+/4AAAAASUVORK5CYII=)",
    "title": "A/A Testing in GrowthBook | GrowthBook Docs",
    "description": "A/A Testing in GrowthBook",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/importing",
    "markdown": "# Migrate from LaunchDarkly | GrowthBook Docs\n\nLooking to migrate from LaunchDarkly to GrowthBook? We have a dedicated importer tool that lets you get up and running in minutes.\n\n## Create an API Token for LaunchDarkly[​](#create-an-api-token-for-launchdarkly \"Direct link to Create an API Token for LaunchDarkly\")\n\nGrowthBook uses the LaunchDarkly REST API to access the relevant resources and import them.\n\nYou must create an access token in your [LaunchDarkly account authorization settings](https://app.launchdarkly.com/settings/authorization) .\n\n## Run the Import[​](#run-the-import \"Direct link to Run the Import\")\n\nGo to the [GrowthBook dashboard's Importing section](https://app.growthbook.io/importing) and choose LaunchDarkly.\n\nThen, enter your LaunchDarkly access token and begin the 2-step process.\n\n### Step 1: Fetch from LaunchDarkly[​](#step-1-fetch-from-launchdarkly \"Direct link to Step 1: Fetch from LaunchDarkly\")\n\nThis will fetch all projects, environments, and feature flags from LaunchDarkly. For large accounts with many feature flags, this may take several minutes to complete. If you run into rate limiting issues, you can adjust the default settings in the UI.\n\nWhen this completes, you will see a preview of everything that will be imported. Carefully review this before proceeding to step 2. Only items marked as \"pending\" will be imported when you proceed.\n\nnote\n\nFor feature flags, we do our best to accurately import everything from LaunchDarkly - fallback values, targeting rules, rollouts, and prerequisite features. This should cover most standard use cases, however for advanced set ups, there are likely some scenarios that we won't be able to handle properly.\n\nYou can click the \"open\" link next to a feature flag to view a detailed JSON view of exactly what will be added/updated. Please review these carefully. If something doesn't look right, you can skip importing individual feature flags by clicking the \"skip\" link.\n\n### Step 2: Import to GrowthBook[​](#step-2-import-to-growthbook \"Direct link to Step 2: Import to GrowthBook\")\n\nIn this step, all of the \"pending\" resources will be imported into GrowthBook. This should take about 1 second per feature flag on average, although this can vary greatly. The import window must be left open during the entire process.\n\nIf you are importing a feature that already exists in GrowthBook, a new revision will be created with any changes to the default value or override rules. All of the changes will be published to all environments immediately, bypassing any draft/review process.\n\n## Next Steps[​](#next-steps \"Direct link to Next Steps\")\n\nAfter the import is complete, you will need to replace the LaunchDarkly SDK in your application with the equivalent [GrowthBook SDK](https://docs.growthbook.io/lib).",
    "title": "Migrate from LaunchDarkly | GrowthBook Docs",
    "description": "Import all of your existing LaunchDarkly flags into GrowthBook",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/kb/experiments/carryover-bias",
    "markdown": "# Carryover Bias | GrowthBook Docs\n\n## What is Carryover Bias?\n\nIn most experimentation systems, such as GrowthBook, users are randomly assigned to different variations (A, B, C, etc.) in a way that ensures that past experiments do not affect one variation more than any other.\n\nHowever, if an experimenter creates a new phase of an experiment without re-randomizing user assignment to variations the new phase of the experiment will be affected by **carryover bias**. This happens when restarting an experiment and when creating an analysis using the last few days or weeks of an experiment. In short, without re-randomization, the effects of the first phase of the experiment can contaminate the second phase of the experiment if any users return to the experiment in the second phase.\n\nThe rest of this document provides an example of carryover bias and how to avoid it in GrowthBook.\n\n## Example of Carryover bias[​](#example-of-carryover-bias \"Direct link to Example of Carryover bias\")\n\nImagine an experiment with two variations (A and B) that runs for 3 days before you realize that there is a bug in variation B that is causing users to churn at a high rate. Let's call this Phase 1.\n\nTo mitigate this issue, you fix the bug and now want to restart your experiment. Furthermore, you don't want to re-randomize users because you want returning users in Phase 2 to get the same variation that they saw in Phase 1. So, you restart the experiment without re-randomizing users (let's call this Phase 2).\n\nHowever, **this choice to not re-randomize will lead to carryover bias**!\n\nHow so? Well, consider what will happen after you restart the experiment. Let's say in Phase 2 each variation gets 100 totally new users. However, we also have some users returning to the app who were exposed to the experiment in Phase 1. In variation A, there are 50 returning users and in variation B, where the bug was causing churn, there are 10 returning users.\n\nThen, your experiment has 150 users in A and 110 users in B! This imbalance is caused because the effects of first phase of the experiment is _carrying over_ to the second phase of the experiment.\n\nThe best way to deal with carryover bias is to prevent it from happening in the first place, because this kind of bias can **unpredictably affect your results** and is **hard to detect**.\n\n#### The effects of carryover bias can be unpredictable[​](#the-effects-of-carryover-bias-can-be-unpredictable \"Direct link to The effects of carryover bias can be unpredictable\")\n\nCarryover bias works to affect your results in many different ways:\n\n*   It could cause B to look **better** than it is; if the 10 people that returned in variation B are particularly persistent power users, then B will look good not because of the feature you're testing, but because you're getting power users bucketed into variation B.\n*   It could cause B to look **worse** than it is because the bad taste of the buggy experience from Phase 1 could cause returning users in B to be less engaged. That \"bad taste\" won't be spread across variations in Phase 2 because you did not re-randomize users.\n\n#### Carryover bias can be hard to detect[​](#carryover-bias-can-be-hard-to-detect \"Direct link to Carryover bias can be hard to detect\")\n\nIn the above example, the discrepancy in users in variations B and A will eventually trigger a Sample Ratio Mismatch (SRM) warning, alerting you to some issue with your experiment. However, SRM warnings will not always fire in cases where there is carryover bias, because either (1) the discrepancy is too small or the total user count is too low; or (2) the carryover bias doesn't actually come from differences in user return rates, but comes from other differences in user behavior across variations that was caused by the first phase of the experiment.\n\n## What causes carryover bias and how can I prevent it?[​](#what-causes-carryover-bias-and-how-can-i-prevent-it \"Direct link to What causes carryover bias and how can I prevent it?\")\n\nIn short, anything that causes users in an experiment analysis to not be randomly assigned to a variation can cause bias. For carryover bias specifically, common causes are:\n\n### 1\\. Creating a new \"Phase\" to restart an experiment without re-randomizing[​](#1-creating-a-new-phase-to-restart-an-experiment-without-re-randomizing \"Direct link to 1. Creating a new \"Phase\" to restart an experiment without re-randomizing\")\n\nIn this case, carryover bias is best prevented by re-randomizing users whenever you restart an experiment — either by starting an entirely new experiment or choosing to \"re-randomize\", which is an option we provide in GrowthBook's SDKs. We provide specific guidance on when you should re-randomize users in GrowthBook as part of our [\"Make Changes\" flow](https://docs.growthbook.io/app/making-experiment-changes).\n\n### 2\\. Manually restarting a new experiment with the same experiment key[​](#2-manually-restarting-a-new-experiment-with-the-same-experiment-key \"Direct link to 2. Manually restarting a new experiment with the same experiment key\")\n\nSimilarly, if you also manually restart an experiment with the same experiment key, the randomization from the previous experiment will carry over to the new experiment. It's best in these cases to change the experiment key to ensure users are re-randomized into groups.\n\n### 3\\. Creating a new \"Phase\" for analysis[​](#3-creating-a-new-phase-for-analysis \"Direct link to 3. Creating a new \"Phase\" for analysis\")\n\nSuppose you create a new phase with the last 7 days of an experiment. Doing this will mean that GrowthBook cannot deduplicate users across the full history of the experiment and the users that show up in the last 7 days of an experiment won't be randomly assigned across variations. If any variation causes more return users, then you'll get carryover bias.\n\nIn this case, rather than utilize a \"Phase\" to analyze a particular date range in an experiment, you should instead focus on your **Metric** date windows (not **Experiment** date windows, which are controlled by Phases). There will be more work in the future to make this easier to achieve within GrowthBook, but for now you can:\n\n*   Add a \"metric delay\". You can use the **metric delay** setting in GrowthBook to delay tracking metric data until a number of hours or days after an exposure to prevent novelty effects.\n*   Use a \"lookback window\". In your metric settings, choose a \"lookback window\" and set it to 7 days.",
    "title": "Carryover Bias | GrowthBook Docs",
    "description": "Carryover Bias",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/quantile",
    "markdown": "# Quantile Testing | GrowthBook Docs\n\nnote\n\nQuantile Testing is a GrowthBook Pro and Enterprise feature. It is incompatible with Mixpanel or MySQL integrations.\n\n## What is a quantile test?[​](#what-is-a-quantile-test \"Direct link to What is a quantile test?\")\n\nQuantile tests compare quantiles across variations. In contrast, standard GrowthBook A/B tests compare means across variations. For example, suppose that treatment increases user spend. Suppose that 90% of users in control spend at most 50pervisit,and9050 per visit, and 90% of users in treatment spend at most 55 per visit. Then the quantile treatment effect at the 90th percentile (i.e., P90) is 55−55 - 50 = $5. Quantiles are commonly used in many applications where very large or small values are of interest (webpage latency, birth weight, blood pressure).\n\n## When should I run quantile tests?[​](#when-should-i-run-quantile-tests \"Direct link to When should I run quantile tests?\")\n\nBelow are two scenarios where you should run quantile tests.\n\nScenario 1: your website has low latency for most users, but for 1% of users it takes a long time for the page to load. You have a potential solution that targets improvements for this small fraction, and run an A/B test to confirm. Mean differences across variations may be noisy and provide uncertain conclusions, as your solution does not improve latency for most users. Running a quantile test at the 99th percentile can be more informative, as it helps detect if users that would have experienced the largest latency had their latency reduced.\n\nScenario 2: you have a new ad campaign designed to increase customer spend. You run an A/B test, and while the lift is positive, it is not statistically significant. Quantile tests can help you deep dive which subpopulations were positively affected by treatment. For example, you may see no improvement at P50, but moderate improvement at P99. This would indicate that the new campaign did not affect most users, but had a strong affect on your top spending users. In summary, quantile tests can complement mean tests.\n\n## How do I interpret quantile test results?[​](#how-do-i-interpret-quantile-test-results \"Direct link to How do I interpret quantile test results?\")\n\nSuppose you are running an A/B test designed to reduce website latency. Your effect estimate and 95% confidence interval (in milliseconds) for latency at P99 is -7 ms (-9 ms, -5 ms). How do you interpret this?\n\nConsider one universe where **all** customers received control (not just the customers assigned to control). In this universe, website latency for 99% of customers is no more than 145 ms. That is, P99 for control is 145 ms.\n\nConsider another universe where **all** customers are assigned to treatment. In the treatment universe, website latency for 99% of customers is no more than 139 ms. So the true effect at P99 is 139 ms - 145 ms = -6 ms.\n\nA quantile test tries to estimate this difference. You interpret the interval above as “There is a 95% chance that the difference in P99 latencies across the groups is in (-9ms, -5ms)”.\n\n## Should I aggregate by experiment user before taking quantile?[​](#should-i-aggregate-by-experiment-user-before-taking-quantile \"Direct link to Should I aggregate by experiment user before taking quantile?\")\n\nBelow we describe how quantile testing differs in event- vs user-level analyses. Suppose that your new feature is designed to lower webpage request times. If you want to reduce the largest request times across all web sessions, then use quantile testing for event-level data. This can help you learn if your new feature reduced the 99th percentile of request times. If you want to reduce total request times for your most frequent customers, then use quantile testing for user-level data. Here GrowthBook sums the total request times for all events within a customer, then compares percentiles of these sums across variations. Sometimes it can be hard to choose whether or not to aggregate.  \nAnother consideration is how the metric is typically conceptualized.  \nAggregation is usually correct if your metric is often conceptualized at the customer level (e.g., customer spend during a week). Aggregation is usually inappropriate if your metric is often conceptualized at the event level (e.g., spend per order).\n\nTo illustrate the mathematics behind the two approaches, consider an experiment where we collected the following data for all users in a variation.\n\n| user\\_id | value |\n| --- | --- |\n| 123 | 0   |\n| 123 | 0   |\n| 456 | 2   |\n| 456 | 3   |\n| 789 | 99  |\n\nDifferent quantile settings would yield different results:\n\n| Quantile Type | Quantile Value | Ignore Zeros? | Result |\n| --- | --- | --- | --- |\n| Event | 0.5 | False | `APPROX_PERCENTILE([0, 0, 2, 3, 99], 0.5) = 2` |\n| Event | 0.5 | True | `APPROX_PERCENTILE([2, 3, 99], 0.5) = 3` |\n| Per-User | 0.5 | False | `APPROX_PERCENTILE([0, 5, 99], 0.5) = 5` |\n| Per-User | 0.5 | True | `APPROX_PERCENTILE([5, 99], 0.5) = 52` |\n\nNotice that for the Per-User quantiles, we sum at the user level first before passing values to the percentile function. `NULL` values will always be ignored.\n\n## How do I run a quantile test in GrowthBook?[​](#how-do-i-run-a-quantile-test-in-growthbook \"Direct link to How do I run a quantile test in GrowthBook?\")\n\nRunning a quantile test is just as easy as running a mean test. Currently, quantile testing is available only for .\n\n1.  Navigate to your [Fact Table](https://docs.growthbook.io/app/fact-tables#quantile-metrics) and select \"Add Metric\".\n2.  Select “Quantile” from “Type of Metric”.\n3.  Toggle “Aggregate by Experiment User before taking quantile” if you want to compare quantiles across variations at the user granularity, after summing row values at the user level. The default is at the event granularity.\n4.  Pick your quantile level from the defaults (p50, p90, p95, p99) or use a custom value. Guidance describing the range of available values is in our [FAQ](#faq).\n5.  Decide whether you want zeros to be included in the analysis (see [FAQ](#faq) below).\n6.  Select your metric window as you would for a mean test.\n7.  Submit!\n\n![User interface for quantile metrics](https://docs.growthbook.io/assets/images/quantile-7db8e19e10b18ddb5afeb074e801d42d.png)\n\n## FAQ[​](#faq \"Direct link to FAQ\")\n\nFrequently asked questions:\n\n1.  Can I pick any quantile level (e.g., P99.999)? No - the maximum range available is \\[0.001, 0.999\\], and that is only for experiments with large sample sizes (i.e., n > 3838). This is because inference can become unreliable for extreme quantile levels and small sample sizes. In general, if you want to compare quantiles at some value p∈(0,1)p \\\\in (0, 1), and you want a 95% confidence interval, your sample size nn must be bigger than 4p/(1−p)4p/(1-p). Similarly, if you want extreme and small quantiles, you need n≥4(1−p)/pn \\\\geq 4(1-p)/p. For p\\=0.99p=0.99 and p\\=0.01p=0.01, this corresponds to n≥380n \\\\geq 380.\n2.  Should I include zeros in my quantile test? This depends upon the population that you care about, and what you want to learn. If zero is a common value for your metric, then P90 including zeros can be much less than P90 without zeros. If your metric is typically conceptualized and reported with zeros included, then it will probably makes sense to include zeros in your quantile test metric. If you are using quantile tests to deep dive mean test results, then use the same configuration for both tests.\n3.  Can I get quantile test results inside of a Bayesian framework? Yes - GrowthBook puts a prior on the quantile treatment effect, and combines this prior with the effect estimate to obtain a posterior distribution for the quantile treatment effect. So “Chance to Win” and other helpful Bayesian concepts are available.\n4.  How does quantile inference connect to mean inference? If you average the quantiles of a distribution, you get the distributional mean. That is, the average of {P1,P2,...,P98,P99}\\\\left\\\\{P1, P2, ..., P98, P99\\\\right\\\\} equals the mean of the distribution. Similarly, the average of the treatment effects at P1, P2, etc. equals the mean treatment effect. So quantile inference can be viewed as a decomposition of mean inference.\n5.  How should I conduct quantile inference in the presence of percentile capping? We have disabled percentile capping for quantile testing. For example, if you picked P99 for your quantile level, then your results could be biased, as capping at P98 ignores all information beyond the 98th percentile. Percentile capping at P98 does not affect estimates at any quantile level below P98 (e.g., P50, P90), so percentile capping will either do nothing or potentially bias quantile test results.\n6.  How does Quantile Testing intersect with [CUPED](https://docs.growthbook.io/statistics/cuped), [Multiple Testing Corrections](https://docs.growthbook.io/statistics/multiple-corrections), and [Sequential Testing](https://docs.growthbook.io/statistics/sequential)? Currently CUPED and Sequential Testing are not implemented for Quantile Testing. Multiple Testing Corrections is implemented for Quantile Testing.\n7.  What is cluster adjustment? Data are clustered when randomization happens at a coarser granularity than the metrics of interest. For example, suppose we are trying to reduce webpage latency. We randomize customers (perhaps due to engineering constraints or testing purposes). A customer may have multiple sessions, i.e., a session is clustered within customer. Latencies for two sessions from the same customer are likelier to be more similar than latencies for two sessions from different customers. Cluster adjustment ensures that we do not overstate the amount of information in the experiment, i.e., uncertainty estimates are valid.\n\n## GrowthBook implementation[​](#growthbook-implementation \"Direct link to GrowthBook implementation\")\n\nHere we describe technical details of our implementation.\n\nGrowthBook implements the approach first introduced in [Deng, Knoblich and Yu (2018)](https://alexdeng.github.io/public/files/kdd2018-dm.pdf). This clever approach has two key advantages. First, it constructs valid confidence intervals for quantiles that uses only sample quantiles, rather than all of the data. This permits estimation using only a single pass through the data. Second, it provides quantile inference for clustered data. This is helpful when randomization occurs at the user level, but our metrics are measured at the session level (described [here](#should-i-aggregate-by-experiment-user-before-taking-quantile)). Our implementation is based upon Algorithm 1 of [Yao, Li and Lu (2024)](https://arxiv.org/pdf/2401.14549.pdf). Define ν∈(0,1)\\\\nu \\\\in (0, 1) as the quantile level of interest. Define α∈(0,1)\\\\alpha \\\\in (0,1) as the false positive rate, and let Z1−α/2Z\\_{1-\\\\alpha/2} be its associated critical value. Without loss of generality we focus on the control variation. Let nn be the control sample size. Define YijY\\_{ij} as the webpage latency for the jthj^{\\\\text{th}} session for the ithi^{\\\\text{th}} user (i.e., cluster) in control, j\\=1,2,…,Nij=1,2,…, N\\_{i}, i\\=1,2,…,Ki=1,2,…,K. Define the observed control outcomes as {Y1,Y2,...,Yn}\\\\left\\\\{Y\\_{1}, Y\\_{2}, ..., Y\\_{n}\\\\right\\\\}, where n\\=∑i\\=1KNin=\\\\sum\\_{i=1}^{K}N\\_{i}. Define the ordered (from smallest to largest) control outcomes as {Y(1),Y(2),...,Y(n)}\\\\left\\\\{Y\\_{(1)}, Y\\_{(2)}, ..., Y\\_{(n)}\\\\right\\\\}.\n\n1.  Compute L, U = n(ν±Z1−α/2ν(1−ν)/n)n\\\\left(\\\\nu \\\\pm Z\\_{1-\\\\alpha/2}\\\\sqrt{\\\\nu(1-\\\\nu)/n} \\\\right).\n2.  Fetch Ynν,YL,YUY\\_{n\\\\nu}, Y\\_{L}, Y\\_{U}.\n3.  Compute Iij\\=1{Yij≤Ynν}I\\_{ij} = 1\\\\left\\\\{Y\\_{ij}\\\\leq Y\\_{n\\\\nu}\\\\right\\\\}. Define Iˉ\\=n−1∑i\\=1K∑j\\=1NiIij\\\\bar{I} = n^{-1}\\\\sum\\_{i=1}^{K}\\\\sum\\_{j=1}^{N\\_{i}}I\\_{ij}.\n4.  Compute σI,iid2\\=ν(1−ν)/n\\\\sigma\\_{I, \\\\text{iid}}^{2} = \\\\nu(1-\\\\nu)/n, an estimate of the variance of Iˉ\\\\bar{I} assuming independent and identically distributed (iid) errors.\n5.  Define σI,c2\\=Var(Iˉ)\\\\sigma\\_{I, c}^{2} = \\\\text{Var}(\\\\bar{I}) using the variance of ratios of means described below.\n6.  Compute σiid2\\=(YU−YL2Z1−α/2)2\\\\sigma\\_{iid}^{2} = \\\\left(\\\\frac{Y\\_{U}-Y\\_{L}}{2Z\\_{1-\\\\alpha/2}}\\\\right)^{2} .\n7.  The cluster-adjusted variance is σiid2(σI,iid2/σI,c2)\\\\sigma\\_{\\\\text{iid}}^{2} \\\\left(\\\\sigma\\_{I,\\\\text{iid}}^{2}/\\\\sigma\\_{I,c}^{2}\\\\right). The term in parentheses adjusts the variance for clustering. If there is no clustering (i.e., inference is at the user level), then use σiid2\\\\sigma\\_{iid}^{2}.\n\nTo further speed this algorithm, instead of finding the exact (L,U)(L, U), which requires pre-computing nn inside of SQL, we instead construct a sequence of logarithmically increasing sample sizes N⋆\\={n1,n2,...nM}N^{\\\\star}=\\\\left\\\\{n\\_{1}, n\\_{2}, ... n\\_{M}\\\\right\\\\} and their associated intervals{(L1,U1),(L2,U2),...,(LM,UM)}\\\\left\\\\{(L\\_{1}, U\\_{1}), (L\\_{2}, U\\_{2}), ..., (L\\_{M}, U\\_{M}) \\\\right\\\\}. We then output the quantiles associated with each interval, as well as nn. We then find n⋆n^{\\\\star}, defined as the largest element of N⋆N^{\\\\star} such that n⋆≤nn^{\\\\star}\\\\leq n. We then adjust the variance outputted by the algorithm above by a factor of n⋆/nn^{\\\\star}/n. Currently we use 20 different values of N⋆N^{\\\\star}, where the kthk^{\\\\text{th}} value is equal to 100∗2k−1100 \\* 2 ^{k-1}.\n\nIn this paragraph we describe the variance of a ratio of means, as described in step 5. above. Additionally, this is the standard formula used to calculate variance of a mean for a variation in GrowthBook t-tests. Here we define the user outcome in terms of random variable XiX\\_{i}, as the formula below can be used for any outcome (e.g., YijY\\_{ij}, IijI\\_{ij}, etc.). For the ithi^{\\\\text{th}} user define the sum of outcomes Si\\=∑j\\=1NiYijS\\_{i} = \\\\sum\\_{j=1}^{N\\_{i}}Y\\_{ij}. Then the mean outcomes across users is Xˉ\\=∑i\\=1KSi∑i\\=1KNi\\\\bar{X}=\\\\frac{\\\\sum\\_{i=1}^{K}S\\_{i}}{\\\\sum\\_{i=1}^{K}N\\_{i}}. Define the mean sum of latencies across users as Sˉ\\=K−1∑i\\=1KSi\\\\bar{S} = K^{-1}\\\\sum\\_{i=1}^{K}S\\_{i}. Define the mean sum of sessions across users as Nˉ\\=K−1∑i\\=1KNi\\\\bar{N} = K^{-1}\\\\sum\\_{i=1}^{K}N\\_{i}. A formula for the variance of Xˉ\\\\bar{X} is\n\nVar(Xˉ)\\=1KNˉ2\\[Var(S)−2SˉNˉCov(S,N)+Sˉ2Nˉ2Var(N)\\]\\\\text{Var}\\\\left(\\\\bar{X}\\\\right) = \\\\frac{1}{K\\\\bar{N}^{2}}\\\\left\\[\\\\text{Var}(S)-2\\\\frac{\\\\bar{S}}{\\\\bar{N}}\\\\text{Cov}(S,N)+\\\\frac{\\\\bar{S}^2}{\\\\bar{N}^2}\\\\text{Var}(N)\\\\right\\].\n\nThis is similar to the delta method approximation of the variance we use for ratio metrics and for relative effects.\n\nLet μ^C,nν\\\\hat{\\\\mu}\\_{C,n\\\\nu} be the νth\\\\nu^{\\\\text{th}} sample quantile for control, and let its associated variance be σ^C,nν2\\\\hat\\\\sigma^2\\_{C,n\\\\nu}. Analogously define μ^T,nν\\\\hat{\\\\mu}\\_{T,n\\\\nu} and σ^C,nν2\\\\hat\\\\sigma^2\\_{C,n\\\\nu} for treatment. These quantities are plugged into our lift estimators as described in the [Statistical Details](https://docs.growthbook.io/statistics/details) page. The result from step 7 is our estimate of the variance and the sample quantile is directly computed in the SQL query.",
    "title": "Quantile Testing | GrowthBook Docs",
    "description": "Quantile Testing",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/cuped",
    "markdown": "# Regression Adjustment (CUPED) | GrowthBook Docs\n\nnote\n\nRegression Adjustment (CUPED) is a premium feature.\n\nGrowthBook aims to unlock high-velocity, enterprise-scale experimentation. Regression adjustment (also known as CUPED, short for Controlled-experiment Using Pre-Experiment Data) is one way to increase the velocity of experimentation by reducing the uncertainty in estimates of experiment uplift.\n\n### Why use CUPED?[​](#why-use-cuped \"Direct link to Why use CUPED?\")\n\nCUPED decreases the variance of experiment uplift, increasing the accuracy of your experimental results and therefore the speed at which you can see the effects of an experiment. In the right conditions, CUPED can equate to getting 20% or more traffic during your experiment!\n\n*   In 2016, Netflix reported that CUPED reduced variance by rougly ~40% for some key engagment metrics ([source](https://www.kdd.org/kdd2016/papers/files/adp0945-xieA.pdf)).\n*   In 2022, Microsoft reported that, for one product team, CUPED was akin to adding 20% more traffic to analysis of a majority of metrics ([source](https://www.microsoft.com/en-us/research/group/experimentation-platform-exp/articles/deep-dive-into-variance-reduction/)).\n\n### How does it work?[​](#how-does-it-work \"Direct link to How does it work?\")\n\nRegression adjustment (RA) in general uses data correlated with a metric to reduce our uncertainty about that metric and the statistics we compute. Any data correlated with the metric of interest, but uncorrelated with variation assignment can be used. GrowthBook (and many others) use pre-experiment data, as metrics collected before an experiment will not be affected by said experiment. In fact, the very name CUPED embeds this concept of using pre-experiment data. Using this pre-experiment data, we can fit a simple model to predict our outcome metric and use those predictions to adjust our metric. The adjusted metric then tends to have lower variance.\n\nThe more correlated the pre-experiment data is with your metric of interest, the more variance reduction you can achieve. For example, the following plot demonstrates the difference in the distribution of a metric before adjustment (\"Normal\") and after adjustment (\"Adjusted\"). In both panels, the green, adjusted metric is distributed less widely (e.g. it is more tightly spaced out around the mean). However, the adjusted distribution is even tighter in the right plot, showing that variance reduction will be greater the more correlated your pre-experiment data is with your post-experiment data.\n\n![Variance Reduction by Correlation](https://docs.growthbook.io/images/statistics/cuped-corr.png)\n\nIn simpler terms, if we know a particular user tends to buy a lot of products on your website before you launch an experiment, we can use that information to understand whether purchase behavior after an experiment is driven by that customer's innate tendency to buy a lot of products or whether it was due to the experiment.\n\nThe concept of regression adjustment has been around for a long time, but you should feel free to read more in the original CUPED paper ([Deng et al. 2013](https://exp-platform.com/Documents/2013-02-CUPED-ImprovingSensitivityOfControlledExperiments.pdf)), a more general purpose paper on the underpinnings of regression adjustment from a sampling perspective ([Lin 2013](https://projecteuclid.org/journals/annals-of-applied-statistics/volume-7/issue-1/Agnostic-notes-on-regression-adjustments-to-experimental-data--Reexamining/10.1214/12-AOAS583.full)), and any of the many blog posts on the topic (e.g. [Booking.com](https://booking.ai/how-booking-com-increases-the-power-of-online-experiments-with-cuped-995d186fff1d), [Microsoft](https://www.microsoft.com/en-us/research/group/experimentation-platform-exp/articles/deep-dive-into-variance-reduction/)).\n\n## GrowthBook's implementation[​](#growthbooks-implementation \"Direct link to GrowthBook's implementation\")\n\nGrowthBook takes a transparent, simple approach to CUPED.\n\nFor each metric you analyze, we use the metric itself from the pre-exposure period as the correlated data. This tends to be very powerful for metrics that are frequently produced by users (e.g. engagement measures), but can be less powerful if your metric is rare, or if you are measuring behavior for new users. In general, CUPED is more powerful the more you know about your units of interest and the longer they have been able to generate the metric that you are analyzing as a part of your experiment.\n\nWe then use the standard CUPED estimator for each variation mean,\n\nYˉadjusted\\=Yˉpost−θ∗Yˉpre\\\\bar{Y}\\_{adjusted} = \\\\bar{Y}\\_{post} - \\\\theta \\* \\\\bar{Y}\\_{pre}\n\nwhere Yˉpost\\\\bar{Y}\\_{post} is the post-exposure metric average, Yˉpre\\\\bar{Y}\\_{pre} is the pre-exposure metric average, and θ\\\\theta is essentially a regression coefficient from a regression of the post-experiment data on the pre-experiment data (pooled across both the control and treatment variation of interest), θ\\=Cov(Ypre,Ypost)/Var(Ypre)\\\\theta = \\\\text{Cov}(Y\\_{pre}, Y\\_{post}) / \\\\text{Var}(Y\\_{pre}).\n\nAs discussed above, we could use any correlated data instead of YpreY\\_{pre}. For example, we could use some model that includes all pre-exposure metrics added to your experiment, or auxiliary dimension information you have configured per user. However, one downside of these approaches is that your results for metric A will depend on whether or not you add a metric B to your experiment and our analysis pipeline would lose its modularity, where each metric can be processed in parallel. Nonetheless, we anticipate continuing to build methods that leverage additional data to improve variance reduction from CUPED.\n\n### Regression Adjustment lookback window[​](#regression-adjustment-lookback-window \"Direct link to Regression Adjustment lookback window\")\n\nGrowthBook defaults to using 14 days of pre-exposure data, but this is customizable at the organization, metric, and metric-experiment level.\n\nWhy use a longer lookback window?\n\n*   A longer window can be better if your metric is low frequency and a longer window is needed to capture meaningful user behavior that will be correlated across the pre- and post-exposure time periods\n\nWhy use a shorter lookback window?\n\n*   Shorter lookback windows will yield more performant queries (fewer days to scan from your metric source)\n*   Behavior in the days just before a user enters an experiment is likely to be more highly correlated with behavior during an experiment, as users change over time. Of course, this is mostly true for metrics that are observed at a higher frequency (e.g. simple engagement metrics).\n\n### Availability[​](#availability \"Direct link to Availability\")\n\nCUPED works for all metrics except for:\n\n*   Ratio metrics where the denominator is a count metric\n*   Quantile metrics\n*   Metrics with custom user value aggregations\n*   Metrics from a MixPanel data sources\n\n## Configuring CUPED[​](#configuring-cuped \"Direct link to Configuring CUPED\")\n\n### Organization-level settings[​](#organization-level-settings \"Direct link to Organization-level settings\")\n\nYou can turn CUPED on for all analyses under Settings → General. CUPED can be turned on or off by default for all analyses and you can set the default number of days to use for a lookback window. This setting will set the default for all of your metrics, which will then flow through to all analyses that use those metrics.\n\n![Organization-level CUPED Setting](https://docs.growthbook.io/images/statistics/cuped-org.png)\n\n### Metric-level settings[​](#metric-level-settings \"Direct link to Metric-level settings\")\n\nYou can also override these organization-level defaults at the Metric level. When creating or editing a Metric, go to the \"Behavior\" panel, click \"Show advanced options\" and scroll to the bottom. From there, you will see the following settings. These settings will allow you to disable CUPED for a metric, even if it is set at the organization or experiment level.\n\n![Metric-level CUPED Setting](https://docs.growthbook.io/images/statistics/cuped-metric.png)\n\nYou might want to disable CUPED for a particular metric if that metric never collects values for a user before they enter an experiment. You might want to adjust metric-specific lookback windows for any of the reasons listed in the section above.\n\nFinally, you could also, if you wanted, override these metric-level settings for a particular experiment using metric overrides on the experiment page.\n\n### Experiment settings and results[​](#experiment-settings-and-results \"Direct link to Experiment settings and results\")\n\nBy default, each experiment will use your organization-level defaults, unless they are overriden by a metric. However, you can always toggle CUPED on or off using the toggle added to the top of the results table. You may need to re-run your analysis if you change this setting.\n\n*   If the toggle is Off, then CUPED will not be applied to any metrics.\n*   If the toggle is On, then it will be applied for all metrics that:\n    *   (a) it can be applied to\n    *   (b) do not have a metric setting or metric override turning it off\n\nThe following screenshot shows the results with CUPED on. However, you can see that there is an icon showing that CUPED is disabled for Average Order Value (because it is a ratio metric). So even if CUPED is toggled on, we will always show you any metrics for which GrowthBook did not use CUPED using that small CUPED icon with a red x.\n\n![Experiment Results with CUPED toggle](https://docs.growthbook.io/images/statistics/cuped-results.png)\n\nFurthermore, if you mouse over the icon showing CUPED wasn't applied, you will get an explanation why.\n\n![Metric Icon showing CUPED Disabled Reason](https://docs.growthbook.io/images/statistics/cuped-icon.png)\n\nIf you mouse over the metric name itself, you get the final CUPED status for each metric (on/off, number of lookback days).\n\n![Metric Tooltip with CUPED status](https://docs.growthbook.io/images/statistics/cuped-tooltip.png)",
    "title": "Regression Adjustment (CUPED) | GrowthBook Docs",
    "description": "Regression Adjustment (CUPED)",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/sequential",
    "markdown": "# Sequential Testing | GrowthBook Docs\n\nnote\n\nSequential Testing is only implemented for the Frequentist statistics engine, and is a premium feature.\n\n## Why use sequential testing?[​](#why-use-sequential-testing \"Direct link to Why use sequential testing?\")\n\nSequential testing allows you to look at your experiment results as many times as you like while still keeping the number of false positives below the expected rate. In other words, it is the frequentist solution to the peeking problem in AB testing.\n\nSequential testing not only reduces the risk of false positives in online experimentation; it can also increase the velocity of experimentation. Although sequential testing produces wider confidence intervals than fixed-sample testing, traditional frequentist inference requires an experimenter to wait until a pre-determined sample size is collected. With sequential testing, decisions can be made as soon as significance is reached, without fear of inflating the false positive rate.\n\n### The peeking problem[​](#the-peeking-problem \"Direct link to The peeking problem\")\n\nWhat is peeking? First, some background on frequentist testing.\n\nWhen running a frequentist analysis, the experimenter sets a confidence level, often written as α\\\\alpha. Many people, and GrowthBook, default to using α\\=5%\\\\alpha = 5\\\\% (sometimes it is written as α\\=0.05\\\\alpha = 0.05). These all mean the same thing: for a correctly specified frequentist analysis, you will only reject the null hypothesis 5% of the time when the null hypothesis is true. Usually in online experimentation, our null hypothesis is that metric averages in two variations are the same. In other words, α\\\\alpha controls the _False Positive Rate_.\n\nHowever, experimenters often violate a fundamental assumption underpinning frequentist analysis: that one must wait until for some pre-specified time (or sample size) before looking at and acting upon experiment results. If you violate this assumption, and _peek_ at your results, you will end up with an inflated _False Positive Rate_, far above your nominal 5% level. In other words, if we check an experiment as it runs, we are essentially increasing the number of times we can get a positive, even if there is no experiment effect, just through random noise.\n\nWe have two options:\n\n1.  Stop checking early. This is possible, but in a lot of cases it can make decision making worse! It is powerful to be able to see bad results and shut a feature down early; or conversely to see a great feature do well right away, end the experiment, and ship to everyone.\n2.  Use an estimator that returns our control over false positive rates.\n\nSequential testing provides estimators for the second option; it allows peeking at your results without fear of inflating the false positive rate beyond your specified α\\\\alpha.\n\n## Configuring sequential testing[​](#configuring-sequential-testing \"Direct link to Configuring sequential testing\")\n\nYou can enable or disable sequential testing, as well as select your tuning parameter, both in your organization settings (as a default for all future experiments) or on an individual experiment's page.\n\nYou can also play with the settings in an ad-hoc report.\n\n### Setting the tuning parameter[​](#setting-the-tuning-parameter \"Direct link to Setting the tuning parameter\")\n\nThe tuning parameter (written as N∗N^\\* in the [implementation notes below](#growthbooks-implementation)), should be set to the number of observations at which you tend to make decisions. It can be thought of as an \"estimated sample size\" for the two arms you are comparing. You want to set N∗N^\\* to be the number of observations at which you tend to make decisions, because it is at that sample size that the loss in experiment power from using sequential testing will be smallest relative to the traditional confidence intervals.\n\nThe following figure shows how the increased CI width in sequential analysis is minimized when the sample size is approximately N∗N^\\*. The y-axis is the ratio of the sequential CIs to the regular CIs; all lines are well above 1.0, showing that sequential analysis results in uniformly wider confidence intervals. On the x-axis is the sample size at which the analysis was executed. As you can see, the ratio is lowest when N∗N^\\* is as close to sample size used in the analysis.\n\n![Effect of Tuning Sequential Statistics on CI Width](https://docs.growthbook.io/images/statistics/sequential-tuning.png)\n\nWe default to using 5,000, but the general advice is to set this parameter to the sample size you expect to get when you are most likely to make a decision on this experiment. Note, this number reflects the total sample size across the two variations you are comparing. If you have an experiment with 3 variations, and you want the smallest confidence intervals after 3,000 users in each variation, you should set the tuning parameter to 6,000 following the above logic. This is because while the total number of users will be 9,000, there will be 6,000 total in each comparison of arms (e.g. A vs B, B vs C, and A vs C).\n\nNote that the tuning parameter should remain fixed for an experiment.\n\n### Organizational defaults[​](#organizational-defaults \"Direct link to Organizational defaults\")\n\nTo set the default usage of sequential testing and the tuning parameter for new experiments, navigate to the Organization Settings page and select your preferred defaults.\n\n![Sequential Statistics Organization Settings](https://docs.growthbook.io/images/statistics/sequential-settings.png)\n\n### Experiment settings[​](#experiment-settings \"Direct link to Experiment settings\")\n\nYou can also turn sequential testing on and off for an individual experiment, as well as set a specific tuning parameter for that experiment. Navigate to the Experiment page, click Edit Experiment Settings, and choose your preferred settings.\n\n![Sequential Statistics Experiment Settings](https://docs.growthbook.io/images/statistics/sequential-exp-settings.png)\n\n## GrowthBook's implementation[​](#growthbooks-implementation \"Direct link to GrowthBook's implementation\")\n\nThere are many approaches to sequential testing, several of which are well explained and compared in [this Spotify blogpost](https://engineering.atspotify.com/2023/03/choosing-sequential-testing-framework-comparisons-and-discussions/).\n\nFor GrowthBook, we selected a method that would work for the wide variety of experimenters that we serve, while also providing experimenters with a way to tune the approach for their setting. To that end, we implement Asymptotic Confidence Sequences introduced by [Waudby-Smith et al. (2023)](https://arxiv.org/pdf/2103.06476v7.pdf); these are very similar to the Generalized Anytime Valid Inference confidence sequences described by Spotify in the above post and introduced by [Howard et al. (2022)](https://arxiv.org/pdf/1810.08240.pdf), although the Waudby-Smith et al. approach more transparently applies to our setting.\n\nSpecifically, GrowthBook's confidence sequences, which take the place of confidence intervals, become:\n\n(μ^±σ^∗N∗2(Nρ2+1)N2ρ2log⁡(Nρ2+1α))\\\\left(\\\\hat{\\\\mu} \\\\pm \\\\hat{\\\\sigma}\\*\\\\sqrt{N}\\*\\\\sqrt{\\\\frac{2(N\\\\rho^2 + 1)}{N^{2}\\\\rho^2}\\\\log\\\\left(\\\\frac{\\\\sqrt{N\\\\rho^2 + 1}}{\\\\alpha}\\\\right)}\\\\right)\n\nρ\\=−2log(α)+log(−2log(α)+1)N∗\\\\rho = \\\\sqrt{\\\\frac{-2\\\\text{log}(\\\\alpha) + \\\\text{log}(-2 \\\\text{log}(\\\\alpha) + 1)}{N^\\*}}\n\nIn the above, μ^\\\\hat{\\\\mu} is our estimated uplift, σ^\\\\hat{\\\\sigma} is the estimated standard error of the uplift, α\\\\alpha is our significance level (defaults to 0.05), and NN is the sum of the two variation's sample sizes.\n\nIn the above N∗N^\\* is a tuning parameter that lets us control how tight these confidence sequences are relative to the standard, fixed-time confidence intervals. You can read more about how to set it in the [Configuring Sequential Testing](#setting-the-tuning-parameter) section.",
    "title": "Sequential Testing | GrowthBook Docs",
    "description": "Sequential Testing",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/aggregation",
    "markdown": "# Aggregate Data | GrowthBook Docs\n\n## Aggregate Data and the Statistics Engine\n\nGrowthBook never collects user-level events or PII. To power our statistics engine, contained within the `gbstats` Python library, GrowthBook works solely with aggregate level data that is sufficient to conduct analyses of interest.\n\n## Working with sums[​](#working-with-sums \"Direct link to Working with sums\")\n\nSpecifically, GrowthBook mostly relies on queries that run on your data warehouse and return data aggregated across users. We aggregate data at the level of the experiment variation (or dimension-variation, if you have dimensions specified). We rely on sums, sums of squares, and sums of cross products to power our statistics engine. These simple quantities allow us to easily re-aggregate over different dimensions while still containing sufficient information to compute experiment statistics.\n\nNote that these are the aggregations at the experiment variation level---they are computed across users. These often follow an aggregation at the user level, which defaults to SUM for non-binomial metrics, or a 1 for binomial metrics. You may have overriden the user-level aggregation in your metric definition with some other function. However, when we then go to aggregate at the variation level, we sum across those user-level aggregations.\n\n### Aggregate fields[​](#aggregate-fields \"Direct link to Aggregate fields\")\n\nYou can view the aggregate data we use for any metric in your experiment by selecting the three dots in the top right of the experiment table and clicking \"View Queries\". There, you can see the actual queries we build and the aggregate results they contain. The following image is an example of those aggregate values.\n\n![View Query - SQL and aggregate statistics](https://docs.growthbook.io/assets/images/view-query-aggregate-3b33717c83055e8d2cb956dc69151a53.png)\n\nThe potential fields the queries will return are as follows, with all sums aggregating at the variation-dimension level:\n\n*   `variation` - the name of the experiment variation\n*   `dimension` - the name of the dimension we aggregate to; defaults to \"All\" if there is no dimensional analysis specified\n*   `users` - the number of users in the variation-dimension that are part of the denominator for that metric; normally this is all users in the variation-dimension, but for ratio metrics or activation metrics it will only include users that are in the ratio denomitor or in the set of activated users.\n*   `count` - deprecated; duplicate of users\n*   `statistic_type` - one of \"mean\" or \"ratio\"; this indicates to the statistics engine how to process the data as the formulae for the variance is different across these statistic types\n*   `main_metric_type` - the metric type of the main metric (e.g. the metric itself or the numerator for ratio metrics)\n*   `main_sum` - the summed value of the user-level main metric\n*   `main_sum_squares` - the sum of the squared values of the user-level main metric\n\nIf the metric is a ratio metric, you will additionally see the following fields:\n\n*   `denominator_metric_type` - the metric type of the denominator metric\n*   `denominator_sum` - the summed value of the user-level denominator metric\n*   `denominator_sum_squares` - the sum of the squared values of the user-level denominator metric\n*   `main_denominator_sum_product` - the sum of the product of the user-level main and denominator metric",
    "title": "Aggregate Data | GrowthBook Docs",
    "description": "Aggregate Data",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/multiple-corrections",
    "markdown": "# Multiple Testing Corrections | GrowthBook Docs\n\nnote\n\nMultiple testing corrections are only implemented for the Frequentist statistics engine.\n\nIf you test a bunch of things at once, you will naturally get some results that look good, but aren't real! This page explains this problem in detail and how you can control it with GrowthBook.\n\n## What is the multiple testing problem?[​](#what-is-the-multiple-testing-problem \"Direct link to What is the multiple testing problem?\")\n\nIn the frequentist framework, testing more than one hypothesis at a time increases the probability that you find a false positive, beyond the user's specified rate of α\\\\alpha, often 0.05. This is often known as the [multiple testing](https://en.wikipedia.org/wiki/Multiple_comparisons_problem), or multiple comparisons, problem.\n\nIn online AB testing, experimenters will often be running hundreds of tests, if not tens of thousands, of tests, at the same time. In this setting, a \"test\" tends to be the comparison of variation A vs variation B, for one group, for one metric. If you are running 10 experiments with 2 variations, each with 10 metrics, you are running 100 tests at one time. Even if the test had no effect on any metric, having this many tests will dramatically increase the chance of seeing a false positive.\n\n### Error rates[​](#error-rates \"Direct link to Error rates\")\n\nTo understand approaches to solving this issue, let's first define two the False Discovery Rate (FDR) and the Family Wise Error Rate (FWER).\n\nIn plain English, the FDR is proportion of your significant results that are false. If you control your FDR at 0.05 (or 5%), and you get 20 significant results, on average only 1 of these should be a false positive.\n\nThe FWER is the probability of at least one test being a false positive. This tends to be much stricter as the number of tests grows.\n\nWe can write both as follows, where VV is the number of tests that are statistically significant but are false positives and RR are the number of tests that are statistically signficant.\n\nFalse Discovery Rate\\=FDR\\=E\\[VV+R\\]\\\\text{False Discovery Rate} = \\\\text{FDR} = \\\\text{E}\\[\\\\frac{V}{V+R}\\]\n\nFamily-wise Error Rate\\=FWER\\=Pr(V≥1)\\\\text{Family-wise Error Rate} = \\\\text{FWER} = \\\\text{Pr}(V \\\\geq 1)\n\n## Corrections in GrowthBook[​](#corrections-in-growthbook \"Direct link to Corrections in GrowthBook\")\n\n### Statistical methods[​](#statistical-methods \"Direct link to Statistical methods\")\n\nGrowthbook allows you to choose no multiple testing correction, a correction that controls the Family-wise Error Rate (Holm-Bonferroni), and a correction that controls the False Discovery Rate (Benjamini-Hochberg).\n\nWhich you choose depends on your tolerance for false positives, the number of tests you are running, and your comfort with each procedure. General guidance would be that if your analysis is more exploratory, controlling the FDR and having a slightly higher false positive rate may be better, while controlling the FWER will give you more guarantees that your results are reliable. However, with enough tests, controlling the FWER may completely undermine your test power.\n\nYou can set this for your organization in the Organization → Settings page, as seen below:\n\n![Org-level Multiple Testing Correction Settings](https://docs.growthbook.io/images/statistics/pvals-adjustment-org.png)\n\nOnce you make a selection, adjustments will happen on-the-fly in experiment results and reports. For now, these adjusted p-values are only available in the UI or in downloadable CSVs and not exportable via the API.\n\ntip\n\nThe corrections we implement do not have directly analogous confidence intervals. Nonetheless, we do construct confidence intervals in an ad-hoc manner after adjusting p-values. We take the adjusted p-values and we back out what the experiment effect standard deviation would need to be to produce that adjusted p-value. We then construct CIs using this adjusted standard deviation. In this way, adjusted p-values below your p-value threshold should always coincide with confidence intervals that do not cross zero.\n\nSome adjusted p-values are 1, in which case the ad-hoc confidence interval constructed in this way is undefined.\n\nUnadjusted confidence intervals are available in the metric tooltip.\n\n#### Holm-Bonferroni (controlling FWER)[​](#holm-bonferroni-controlling-fwer \"Direct link to Holm-Bonferroni (controlling FWER)\")\n\nTo control the FWER, we implement the [Holm-Bonferroni method](https://en.wikipedia.org/wiki/Holm%E2%80%93Bonferroni_method). This method is an adaptation of the well known Bonferroni method, which simply multiplies p-values by the number of tests in the family.\n\nThe Holm-Bonferroni does just as well as the Bonferroni method to control the FWER, but it is less conservative. The main trade-off is that the implementation is slightly more complex, and one cannot adjust the confidence intervals in a meaningful way. There are other approaches that are even less conservative, but they require making assumptions about the dependence between tests to guarantee FWER control.\n\n#### Benjamini-Hochberg (controlling FDR)[​](#benjamini-hochberg-controlling-fdr \"Direct link to Benjamini-Hochberg (controlling FDR)\")\n\nTo control the FDR, we implement the [Benjamini-Hochberg procedure](https://en.wikipedia.org/wiki/False_discovery_rate#Benjamini%E2%80%93Hochberg_procedure). This method does assume that the tests are independent or positively correlated. There are methods that make fewer assumptions (such as the Benjamini-Yekutieli method), but they can be even more conservative than Bonferroni corrections.\n\nTherefore, in order to provide a reasonably powered approach that controls the FDR in some conditions, and to select an approach that has widespread adoption, we implemented the Benjamini-Hochberg procedure.\n\n### Defining a family of tests[​](#defining-a-family-of-tests \"Direct link to Defining a family of tests\")\n\nControlling for multiple comparisons across all of the tests one can run in GrowthBook, even within the context of one experiment, is impractical and can be prohibitively costly in terms of statistical power. Instead, GrowthBook corrects across all metrics, variations, (and dimension values, if available) in a particular result view.\n\ntip\n\nWe correct using all p-values that you can see on one experiment results page, _excluding guardrail metrics_\n\n#### On overall results[​](#on-overall-results \"Direct link to On overall results\")\n\nOn the _experiment results overall page_, we collect all tests across non-guardrail metrics and variations to be part of a family, and correct within those values. The following image circles the p-values that we collect and adjust for on the overall results page for an experiment.\n\n![Demonstrating Correction in Results](https://docs.growthbook.io/images/statistics/pvals-adjusted.png)\n\n#### Within dimensional slices[​](#within-dimensional-slices \"Direct link to Within dimensional slices\")\n\nIf you look within dimensional slices, to account for the additional increase in tests from dimensional splits, we collect correct within the family of tests across all dimension groups, non-guardrail metrics, and variations. The following video scrolls through a corrected set of dimension results; the ones that are adjusted are the non-guardrail metrics, and we include all adjusted p-values in this video (across dimensions and metrics) in one family for correction.\n\ntip\n\nWe never correct across overall _and_ dimension splits at the same time.",
    "title": "Multiple Testing Corrections | GrowthBook Docs",
    "description": "Multiple Testing Corrections",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/details",
    "markdown": "# Statistical Details | GrowthBook Docs\n\nBoth our Bayesian and our Frequentist engines begin with a similar foundation for estimating experiment effects. We estimate the experiment effect (either the **relative** lift or the **absolute** effect), and its standard error. We create decision making tools from those estimates (e.g., frequentist confidence intervals and p-values, or Bayesian credible intervals and risks) to help you make rollout/rollback decisions.\n\nOur estimates compare an experimental variation (henceforth the treatment) to some baseline variation (henceforth control). Define μC\\\\mu\\_{C} as the population control mean, and define μT\\\\mu\\_{T} as the population treatment mean.\n\nThe absolute treatment effect is Δa\\=μT−μC\\\\Delta\\_{a} = \\\\mu\\_{T}-\\\\mu\\_{C}.\n\nThe relative treatment effect (or lift) is Δr\\=(μT−μC)/μC\\\\Delta\\_{r} = (\\\\mu\\_{T}-\\\\mu\\_{C})/\\\\mu\\_{C} if μC≠0\\\\mu\\_{C}\\\\ne 0 and is undefined otherwise.\n\nThroughout for any population parameter γ\\\\gamma denote its sample counterpart as γ^\\\\hat{\\\\gamma}. For example, the sample absolute effect is Δ^a\\\\hat{\\\\Delta}\\_{a}.\n\n### Lift (Relative Effects)[​](#lift-relative-effects \"Direct link to Lift (Relative Effects)\")\n\nBy default, we estimate lift (i.e. relative effects or percentage changes) from the control to the treatment variations. No matter which engine we use, the statistics we leverage are\n\nΔ^r\\=μ^T−μ^Cμ^Cσ^Δr2\\=σ^C2μ^T2μ^C4nC+σ^T2μ^C2nT\\\\begin{align} \\\\hat{\\\\Delta}\\_r &= \\\\frac{\\\\hat\\\\mu\\_T - \\\\hat\\\\mu\\_C}{\\\\hat\\\\mu\\_C} \\\\\\\\ \\\\hat{\\\\sigma}^2\\_{\\\\Delta\\_r} &= \\\\frac{\\\\hat\\\\sigma^2\\_C \\\\hat\\\\mu^2\\_T}{\\\\hat\\\\mu^4\\_C n\\_C} + \\\\frac{\\\\hat\\\\sigma^2\\_T}{\\\\hat\\\\mu^2\\_C n\\_T} \\\\end{align}\n\nwhere μ^C\\\\hat\\\\mu\\_C and μ^T\\\\hat\\\\mu\\_T are the estimates of our variation means, σ^C2\\\\hat\\\\sigma^2\\_C and σ^T2\\\\hat\\\\sigma^2\\_T are the estimated variances of those means, and nCn\\_C and nTn\\_T are the sample sizes. The variance σ^Δr2\\\\hat{\\\\sigma}^2\\_{\\\\Delta\\_r} is a delta method estimator, as Δ^r\\\\hat{\\\\Delta}\\_r is a ratio.\n\nWe cover how we estimate the variation means and their standard errors below, depending on metric type.\n\n### Absolute Effects[​](#absolute-effects \"Direct link to Absolute Effects\")\n\nThe math for absolute effects is simpler, as our estimator is no longer a ratio.\n\nΔ^a\\=μ^T−μ^Cσ^Δa2\\=σ^C2nC+σ^T2nT\\\\begin{align} \\\\hat{\\\\Delta}\\_a &= \\\\hat\\\\mu\\_T - \\\\hat\\\\mu\\_C \\\\\\\\ \\\\hat{\\\\sigma}^2\\_{\\\\Delta\\_a} &= \\\\frac{\\\\hat\\\\sigma^2\\_C}{n\\_C} + \\\\frac{\\\\hat\\\\sigma^2\\_T}{n\\_T} \\\\end{align}\n\n## Bayesian Engine[​](#bayesian-engine \"Direct link to Bayesian Engine\")\n\nOur Bayesian engine synthesizes the above estimates with information external to the experiment to estimate lift. This synthesis combines the experimental data with the prior distribution, which contains information about the treatment effect before the experiment began.\n\nWe specify the following prior\n\nΔprior∼N(μprior,σprior2).\\\\Delta\\_{prior} \\\\sim N(\\\\mu\\_{prior}, \\\\sigma\\_{prior}^{2}).\n\nThis information is represented by the prior mean μprior\\\\mu\\_{prior} and the prior variance σprior2\\\\sigma\\_{prior}^{2}. The prior mean is your best guess for the treatment effect before the experiment starts. The prior variance determines your confidence in this best guess. A small prior variance corresponds to high confidence, and vice versa. GrowthBook's default prior is an improper prior (i.e., σprior2\\=∞\\\\sigma\\_{\\\\text{prior}}^{2}=\\\\infty) that has no impact.\n\nAs of GrowthBook 3.0, you can specify a prior that overrides the default. As stated above, the prior distribution represents your knowledge of the treatment effect before the experiment begins. GrowthBook uses priors on lift, as this is often easier to conceptualize (e.g., 95% chance the true lift is between -50% and 50%). This knowledge can be weak or strong, and we outline a few examples below.\n\n1.  Weak knowledge: suppose you have little information about your treatment effect, and do not have past data about treatment effects or experiments for this metric. Then use a weak prior, with mean 0 and large variance (e.g., 0.520.5^ 2 or 1).\n2.  Moderate knowledge: perhaps you have run multiple experiments on this metric. Suppose the average lift for these experiments was 0.01, and the variance of lifts was 0.05. Then a prior with mean 0.01 and variance 0.05 can be appropriate. As another example, suppose you believe that your feature impact will be relatively moderate. A N(0,0.32)N(0, 0.3^2) prior, our default when proper priors are enabled, encodes the prior belief that 68% of all experiments have a lift between -30% and 30%, and 95% of all experiments have a lift between -60% and 60%.\n3.  Strong knowledge: suppose you ran a similar experiment last year on the same feature, or you ran this experiment last quarter on a different segment, and your treatment effect estimate was 0.02 and its variance was 0.01. Then a prior with mean 0.02 and variance 0.01 can be appropriate.\n\nIn summary, picking the right prior can add information to your results. If you use a moderately informative or strongly informative prior, conduct a sensitivity analysis by comparing your results to those using a weak prior, to see how sensitive your results are to prior selection. For any proper prior, the effect of the prior diminishes as the sample size increases.\n\nThese priors are normally distributed and our effect estimates above are asymptotically normally distributed via the Central Limit Theorem. Therefore, combining them to compute our posterior beliefs, which will themselves be normally distributed, we get the following mean and variance for our posterior effect estimates:\n\nΔposterior\\=μpriorσprior2+Δ^σ^Δ21σprior2+1σ^Δ2σposterior2\\=11σprior2+1σ^Δ2\\\\begin{align} \\\\Delta\\_{posterior} &= \\\\frac{ \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}} + \\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}^2\\_{\\\\Delta} }}{ \\\\frac{1}{\\\\sigma^2\\_{prior}} + \\\\frac{1}{\\\\hat{\\\\sigma}^2\\_{\\\\Delta}}} \\\\\\\\ \\\\sigma^2\\_{posterior} &= \\\\frac{1}{\\\\frac{1}{\\\\sigma^2\\_{prior}} + \\\\frac{1}{\\\\hat{\\\\sigma}^2\\_{\\\\Delta}}} \\\\end{align}\n\nFor relative effects, we simply plug in the values for our prior and the Δ^r\\\\hat\\\\Delta\\_r and σ^Δr2\\\\hat{\\\\sigma}^2\\_{\\\\Delta\\_r} values from equations (1) and (2).\n\nFor absolute effects, we first rescale the prior so that your prior beliefs represent the same amount of uncertainty for both relative and absolute effects. So we recompute your prior as the following:\n\nμprior,a\\=μprior∣μ^C∣σprior,a2\\=σprior2μ^C2\\\\begin{align\\*} \\\\mu\\_{prior,a} &= \\\\mu\\_{prior} \\\\left|\\\\hat\\\\mu\\_C\\\\right| \\\\\\\\ \\\\sigma^2\\_{prior,a} &= \\\\sigma^2\\_{prior} \\\\hat\\\\mu^2\\_C \\\\\\\\ \\\\end{align\\*}\n\nwhere μprior,a\\\\mu\\_{prior, a} is the prior mean and σprior,a2\\\\sigma\\_{prior,a}^{2} is the prior variance on the absolute scale.\n\nFrom the posterior, we can compute the following quantities of interest\n\n### Chance To Win[​](#chance-to-win \"Direct link to Chance To Win\")\n\nChance to Win is the percentage of the posterior that is greater than 0 in favor of the treatment variation\n\nCTW\\=100%∗(1−Φposterior(0)),CTW = 100\\\\% \\* (1 - \\\\Phi\\_{p osterior}(0)),\n\nwhere Φposterior\\\\Phi\\_{posterior} is the CDF of the distribution N(Δposterior,σposterior2)N(\\\\Delta\\_{posterior}, \\\\sigma^2\\_{posterior}).\n\n### Confidence Interval[​](#confidence-interval \"Direct link to Confidence Interval\")\n\nOur “confidence interval” in the Bayesian engine is an interval from the 2.5th to the 97.5th percentile of the posterior distribution (e.g. Φposterior−1(0.025)\\\\Phi^{-1}\\_{posterior}(0.025) and Φposterior−1(0.975)\\\\Phi^{-1}\\_{posterior}(0.975)). We plot the posterior between these two points in the GrowthBook UI.\n\n## Frequentist Engine[​](#frequentist-engine \"Direct link to Frequentist Engine\")\n\nIn our frequentist engine, we directly use Δ^a\\\\hat\\\\Delta\\_a, Δ^r\\\\hat\\\\Delta\\_r, and their standard errors.\n\n**Sequential Testing** - if you have sequential testing enabled, we implement Asymptotic Confidence Sequences, which you can read more about in the [sequential testing documentation](https://docs.growthbook.io/statistics/sequential). Enabling sequential testing does not affect the mean Δ^\\\\hat\\\\Delta, but it inflates the standard error.\n\n### p-value[​](#p-value \"Direct link to p-value\")\n\nThe p-value is the probability of observing the value Δ^/σ^Δa\\\\hat{\\\\Delta}/\\\\hat{\\\\sigma}\\_{\\\\Delta\\_{a}}if the true Δ\\\\Delta was zero. We conduct two-tailed tests, so the p-value if\n\np\\=2(1−Ft(∣Δ^σ^Δ∣,ν))p = 2\\\\left(1 - F\\_t\\\\left(\\\\left|\\\\frac{\\\\hat\\\\Delta}{\\\\hat\\\\sigma\\_\\\\Delta}\\\\right|, \\\\nu\\\\right)\\\\right)\n\nwhere FtF\\_t is the CDF t-distribution with degrees of freedom ν\\\\nu estimated via the Welch-Satterthwaite approximation. This converges to using the Normal distribution as sample size increases.\n\n### Confidence Interval[​](#confidence-interval-1 \"Direct link to Confidence Interval\")\n\nWe return 95% confidence intervals. They are\n\n\\[Δ^−Ft−1(0.975,ν)σ^Δ,  Δ^+Ft−1(0.975,ν)σ^Δ\\]\\\\left\\[\\\\hat\\\\Delta - F^{-1}\\_t\\\\left(0.975, \\\\nu\\\\right) \\\\hat\\\\sigma\\_\\\\Delta,\\\\; \\\\hat\\\\Delta + F^{-1}\\_t\\\\left(0.975, \\\\nu\\\\right) \\\\hat\\\\sigma\\_\\\\Delta\\\\right\\]\n\n## Estimating variation means[​](#estimating-variation-means \"Direct link to Estimating variation means\")\n\nOur estimates of variation means and their variances (μC\\\\mu\\_C, μT\\\\mu\\_T, σC2\\\\sigma^2\\_C, and σT2\\\\sigma^2\\_T) are the same for both engines. In the following, we will focus on the control variation for simplicity. The math is the same for the treatment variation.\n\nWhile there is no difference across engines, there is a difference in our estimates depending on the metric type being analyzed.\n\n### Mean metrics[​](#mean-metrics \"Direct link to Mean metrics\")\n\nFor mean metrics (e.g. the average revenue per user) we use standard sample mean estimators. This is used for:\n\n*   Metrics that are of type `revenue`, `duration`, and `count` metrics and do not have denominators\n*   or, Fact Metrics of type `mean`\n\nIn these cases, we have, for both variations\n\nμ^C\\=∑i\\=1nCYinCσ^C2\\=1nC−1(∑i\\=1nCYi2−(∑i\\=1nCYi)2nC)\\\\begin{align} \\\\hat\\\\mu\\_C &= \\\\frac{\\\\sum^{n\\_C}\\_{i=1} {Y\\_{i}}}{n\\_C} \\\\\\\\ \\\\hat\\\\sigma^2\\_C &= \\\\frac{1}{n\\_C - 1}\\\\left(\\\\sum^{n\\_C}\\_{i=1} Y^2\\_i - \\\\frac{\\\\left(\\\\sum^{n\\_C}\\_{i=1} Y\\_i\\\\right)^2}{n\\_C}\\\\right) \\\\end{align}\n\nwhere YiY\\_i is the ithi^{\\\\text{th}} unit in the control variation's total metric value.\n\n### Proportion metrics[​](#proportion-metrics \"Direct link to Proportion metrics\")\n\nProportion metrics (e.g. the % of users who purchased a product) cover the following cases:\n\n*   regular Metrics of type `binomial`\n*   Fact Metrics of type `proportion`\n\nIn these cases, we have\n\nμ^C\\=∑i\\=1nCYinCσ^C2\\=μ^C(1−μ^C)\\\\begin{align} \\\\hat\\\\mu\\_C &= \\\\frac{\\\\sum^{n\\_C}\\_{i=1} {Y\\_{i}}}{n\\_C} \\\\\\\\ \\\\hat\\\\sigma^2\\_C &= \\\\hat\\\\mu\\_C (1 - \\\\hat\\\\mu\\_C) \\\\end{align}\n\nwhere YiY\\_i is either 0 or 1 for a user.\n\n### Ratio metrics[​](#ratio-metrics \"Direct link to Ratio metrics\")\n\nRatio metrics (e.g. the bounce rate for the number of bounced sessions over the number of total session) require a bit more care as the unit of analysis (e.g. the session) is not the same as the unit of randomization (e.g. the user).\n\nRatio metrics in GrowthBook are:\n\n*   regular Metrics with a denominator that is type `revenue`, `duration`, and `count`\n*   Fact Metrics of type `ratio`\n\nIn these cases, we have\n\nμ^C\\=∑i\\=1nCMi∑i\\=1nCDiσ^C2\\=1nCμ^D2(σ^M2−2μ^Mμ^Dσ^MD+σ^D2μ^M2μ^D2)\\\\begin{align} \\\\hat\\\\mu\\_C &= \\\\frac{\\\\sum^{n\\_C}\\_{i=1} {M\\_{i}}}{\\\\sum^{n\\_C}\\_{i=1} {D\\_{i}}} \\\\\\\\ \\\\hat\\\\sigma^2\\_C &= \\\\frac{1}{n\\_{C}\\\\hat\\\\mu^2\\_D}\\\\left(\\\\hat\\\\sigma^2\\_M - 2 \\\\frac{\\\\hat\\\\mu\\_M}{\\\\hat\\\\mu\\_D}\\\\hat\\\\sigma\\_{MD} + \\\\hat\\\\sigma^2\\_D\\\\frac{\\\\hat\\\\mu^2\\_M}{\\\\hat\\\\mu^2\\_D} \\\\right) \\\\end{align}\n\nwhere MiM\\_i and DiD\\_i are the ithi^{\\\\text{th}} units' values for the numerator and denominator of the metric, μ^M\\\\hat\\\\mu\\_M and σ^M2\\\\hat\\\\sigma^2\\_M are the estimated sample mean and variance of that metric, and σ^MD\\\\hat\\\\sigma\\_{MD} is the estimated covariance of M and D in the control variation.\n\n### Quantile metrics[​](#quantile-metrics \"Direct link to Quantile metrics\")\n\nThe statistics for quantile metrics are covered more in detail in the [Quantile documentation](https://docs.growthbook.io/statistics/quantile). But in the end we arrive at both a μ^\\\\hat\\\\mu and σ^2\\\\hat\\\\sigma^2 for the desired quantile and its variance and use those in our lift calculations.",
    "title": "Statistical Details | GrowthBook Docs",
    "description": "Statistical Details",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/firebase",
    "markdown": "# Setting up Firebase as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with Firebase. After choosing Firebase as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for Firebase has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-firebase) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up Firebase as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Firebase to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/clevertap",
    "markdown": "# Setting up CleverTap as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with CleverTap. After choosing CleverTap as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for CleverTap has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-clevertap) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up CleverTap as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your CleverTap to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/heap",
    "markdown": "# Setting up Heap as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with Heap. After choosing Heap as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for Heap has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-heap) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up Heap as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Heap to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/amplitude",
    "markdown": "# Setting up Amplitude as an event tracker\n\n## Exposure Tracking[​](#exposure-tracking \"Direct link to Exposure Tracking\")\n\nFor client side testing, you can fire a custom track event from the GrowthBook SDK's `trackingCallback` function, like so:\n\n```\n trackingCallback: (experiment, result) => {    amplitude.track('Experiment Viewed', {experimentId: experiment.key, variantId: result.key});  }\n```\n\nYou can also use Amplitudes own experiment javascript format:\n\n```\n trackingCallback: (experiment, result) => {    amplitude.track('$exposure', {flag_key: experiment.key, variant: result.key});  }\n```\n\nYou can read more about Amplitude's exposure event [here](https://www.docs.developers.amplitude.com/experiment/general/exposure-tracking/)\n\n## Integrating with Amplitude Data[​](#integrating-with-amplitude-data \"Direct link to Integrating with Amplitude Data\")\n\nFor GrowthBook to integrate with Amplitude you first must export your Amplitude data to the data warehouse of your choice. You can read more about it on [Amplitudes help pages](https://www.docs.developers.amplitude.com/data/destinations/).\n\nCurrently, Amplitude supports exporting to Redshift, Snowflake, BigQuery, and S3 (and use Athena). Once you have set up a data export to one of these destinations, you can connect GrowthBook to it.\n\nnote\n\nGrowthBook won't automatically create SQL queries for Amplitude, but you can follow the general instructions below. If you need any help, [reach out to us](https://slack.growthbook.io/) and we can help\n\n## Configuration Settings[​](#configuration-settings \"Direct link to Configuration Settings\")\n\nOnce you have chosen your event tracker and data source type and successfully connected, you will be given an opportunity to modify your configuration settings. For many applications GrowthBook will have chosen the correct configuration settings straight out of the box based upon which event tracker you choose. In some instances you may need to tweak them slightly, or in the case of using a custom datasource, define them more explicitly.\n\n### Identifier Types[​](#identifier-types \"Direct link to Identifier Types\")\n\nThese are all the types of identifiers you use to split traffic in an experiment and track metric conversions. Common examples are `user_id`, `anonymous_id`, `device_id`, and `ip_address`.\n\n### Experiment Assignment Queries[​](#experiment-assignment-queries \"Direct link to Experiment Assignment Queries\")\n\nAn experiment assignment query returns which users were part of which experiment, what variation they saw, and when they saw it. Each assignment query is tied to a single identifier type (defined above). You can also have multiple assignment queries if you store that data in different tables, for example one from your email system and one from your back-end.\n\nThe end result of the query should return data like this:\n\n| user\\_id | timestamp | experiment\\_id | variation\\_id |\n| --- | --- | --- | --- |\n| 123 | 2021-08-23-10:53:04 | my-button-test | 0   |\n| 456 | 2021-08-23 10:53:06 | my-button-test | 1   |\n\nThe above assumes the identifier type you are using is `user_id`. If you are using a different identifier, you would use a different column name.\n\nHere's an example query you might use:\n\n```\nSELECT  user_id,  received_at as timestamp,  experiment_id,  variation_idFROM  eventsWHERE  event_type = 'viewed experiment'\n```\n\nMake sure to return the exact column names that GrowthBook is expecting. If your table’s columns use a different name, add an alias in the SELECT list (e.g. `SELECT original_column as new_column`).\n\n#### Duplicate Rows[​](#duplicate-rows \"Direct link to Duplicate Rows\")\n\nIf a user sees an experiment multiple times, you should return multiple rows in your assignment query, one for each time the user was exposed to the experiment.\n\nThis helps us detect when users were exposed to more than one variation, and eventually may be useful in helping build interesting time series.\n\n#### Experiment Dimensions[​](#experiment-dimensions \"Direct link to Experiment Dimensions\")\n\nIn addition to the standard 4 columns above, you can also select additional dimension columns. For example, `browser` or `referrer`. These extra columns can be used to drill down into experiment results.\n\n#### Identifier Join Tables[​](#identifier-join-tables \"Direct link to Identifier Join Tables\")\n\nIf you have multiple identifier types and want to be able to auto-merge them together during analysis, you also need to define identifier join tables. For example, if your experiment is assigned based on `device_id`, but the conversion metric only has a `user_id` column.\n\nThese queries are very simple and just need to return columns for each of the identifier types being joined. For example:\n\n```\nSELECT user_id, device_id FROM logins\n```\n\n#### SQL Template Variables[​](#sql-template-variables \"Direct link to SQL Template Variables\")\n\nWithin your queries, there are several placeholder variables you can use. These will be replaced with strings before being run based on your experiment. This can be useful for giving hints to SQL optimization engines to improve query performance.\n\nThe variables are:\n\n*   **startDate** - `YYYY-MM-DD HH:mm:ss` of the earliest data that needs to be included\n*   **startYear** - Just the `YYYY` of the startDate\n*   **startMonth** - Just the `MM` of the startDate\n*   **startDay** - Just the `DD` of the startDate\n*   **startDateUnix** - Unix timestamp of the startDate (seconds since Jan 1, 1970)\n*   **endDate** - `YYYY-MM-DD HH:mm:ss` of the latest data that needs to be included\n*   **endYear** - Just the `YYYY` of the endDate\n*   **endMonth** - Just the `MM` of the endDate\n*   **endDay** - Just the `DD` of the endDate\n*   **endDateUnix** - Unix timestamp of the endDate (seconds since Jan 1, 1970)\n*   **experimentId** - Either a specific experiment id OR `%` if you should include all experiments\n\nFor example:\n\n```\nSELECT  user_id,  anonymous_id,  received_at as timestamp,  experiment_id,  variation_idFROM  experiment_viewedWHERE  received_at BETWEEN '{{ startDate }}' AND '{{ endDate }}'  AND experiment_id LIKE '{{ experimentId }}'\n```\n\n**Note:** The inserted values do not have surrounding quotes, so you must add those yourself (e.g. use `'{{ startDate }}'` instead of just `{{ startDate }}`)\n\n### Jupyter Notebook Query Runner[​](#jupyter-notebook-query-runner \"Direct link to Jupyter Notebook Query Runner\")\n\nThis setting is only required if you want to export experiment results as a Jupyter Notebook.\n\nThere is no one standard way to store credentials or run SQL queries from Jupyter notebooks, so GrowthBook lets you define your own Python function.\n\nIt needs to be called `runQuery`, accept a single string argument named `sql`, and return a pandas data frame.\n\nHere's an example for a Postgres (or Redshift) data source:\n\n```\nimport osimport psycopg2import pandas as pdfrom sqlalchemy import create_engine, text# Use environment variables or similar for passwords!password = os.getenv('POSTGRES_PW')connStr = f'postgresql+psycopg2://user:{password}@localhost'dbConnection = create_engine(connStr).connect();def runQuery(sql):  return pd.read_sql(text(sql), dbConnection)\n```\n\n**Note:** This python source is stored as plain text in the database. Do not hard-code passwords or sensitive info. Use environment variables (shown above) or another credential store instead.\n\n## Schema Browser[​](#schema-browser \"Direct link to Schema Browser\")\n\nWhen you connect a supported data source to GrowthBook, we automatically generate metadata that is used by our Schema Browser. The Schema Browser is a user-friendly interface that makes writing queries easier as you can easily explore information about the datasource such as databases, schemas, tables, columns, and data types.\n\n![GrowthBook Schema Browser](https://docs.growthbook.io/assets/images/growthbook-schema-browser-40e388a5759c12afef54296d9c0c1980.png)\n\nBelow are the data sources that currently support the Schema Browser:\n\n*   AWS Athena - _Requires a Default Catalog_\n*   BigQuery - _Requires a Project Name and Default Dataset_\n*   ClickHouse\n*   Databricks - _Currently only supported on version 10.2 and above with a Unity Catalog_\n*   MsSQL/SQL Server\n*   MySQL/MariaDB\n*   Postgres\n*   PrestoDB (and Trino) - _Requires a Default Catalog_\n*   Redshift\n*   Snowflake",
    "title": "Setting up Amplitude as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Amplitude to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/integrations/webflow",
    "markdown": "# Webflow Integration | GrowthBook Docs\n\nUnleash the power of experimentation with GrowthBook to supercharge your Webflow site—no coding skills required!\n\nNote\n\nThis guide walks you through creating experiments using the GrowthBook Visual Editor, which requires a `Pro` subscription. [Learn More](https://www.growthbook.io/pricing).\n\n## Let's Get Started[​](#lets-get-started \"Direct link to Let's Get Started\")\n\n### Step 1: Create a GrowthBook SDK Connection[​](#step-1-create-a-growthbook-sdk-connection \"Direct link to Step 1: Create a GrowthBook SDK Connection\")\n\nTo connect your GrowthBook account to Webflow, you'll need to create a new SDK Connection and select the `Webflow` option. Before saving, confirm that you've enabled the toggles for `Include visual experiments in endpoint's response?` and `Include draft experiments`.\n\n![](https://docs.growthbook.io/assets/images/webflow-sdk-connection-e862e170a41e8efc1a1496130070b738.png)\n\n### Step 2: Add GrowthBook to Your Webflow Site[​](#step-2-add-growthbook-to-your-webflow-site \"Direct link to Step 2: Add GrowthBook to Your Webflow Site\")\n\nOnce the SDK Connection is created, you should see a code snippet that you need to add to your site.\n\nIn a new window, log into your Webflow account, navigate to your site's settings, and select the `Custom Code` tab.\n\nFind the \"Head Code\" section, and paste in the code snippet from GrowthBook. It should look something like this:\n\n![](https://docs.growthbook.io/assets/images/growthbook-webflow-edit-code-dcc022bdb4a9b08cd5e3935fed740609.png)\n\nNote\n\nWhen a user views an experiment, the code above will fire an event that tracks which variation the user saw. If you have Google Analytics 4 (GA4) or Segment installed on your site, you don't have to do any additional configuration. If, however, you need to use a different analytics provider, you can follow our guide [here](https://docs.growthbook.io/lib/script-tag).\n\nOnce added, save and publish the changes and navigate back to GrowthBook.\n\n### Step 3: Install the GrowthBook Chrome Extension[​](#step-3-install-the-growthbook-chrome-extension \"Direct link to Step 3: Install the GrowthBook Chrome Extension\")\n\nThe GrowthBook Chrome Extension allows you to use the Visual Editor to update your Webflow site's content. It's free, and you can download it [here](https://chromewebstore.google.com/detail/growthbook-devtools/opemhndcehfgipokneipaafbglcecjia).\n\n### Step 4: Create a GrowthBook Visual Editor Experiment[​](#step-4-create-a-growthbook-visual-editor-experiment \"Direct link to Step 4: Create a GrowthBook Visual Editor Experiment\")\n\nNow that GrowthBook is installed on your Webflow site, you can create a new experiment using the Visual Editor.\n\nFirst, navigate to \"Experiments\" on the left-hand navigation menu and then click \"Create Experiment\", before selecting \"Design a New Experiment\" and following the on-screen prompts.\n\nOnce you've created your experiment, select \"Visual Editor\" as the editor type and enter the URL of your Webflow site.\n\n![](https://docs.growthbook.io/assets/images/growthbook-webflow-visual-editor-e79bf1f951f849da241d2dc67611168d.png)\n\nYou'll then be redirected to your site, where you can use the Visual Editor to update your site's content.",
    "title": "Webflow Integration | GrowthBook Docs",
    "description": "Unleash the power of experimentation with GrowthBook to supercharge your Webflow site—no coding skills required!",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/fullstory",
    "markdown": "# Setting up Fullstory as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with Fullstory. After choosing Fullstory as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for Fullstory has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-fullstory) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up Fullstory as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Fullstory to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/freshpaint",
    "markdown": "# Setting up Freshpaint as an event tracker\n\n## Event Tracker Setup[​](#event-tracker-setup \"Direct link to Event Tracker Setup\")\n\nFor JS, you can track the experiment exposure events by adding the following code the `trackingCallback` in the GrowthBook SDK.\n\n```\n trackingCallback: (experiment, result) => {    freshpaint.track('Experiment Viewed', {experimentId: experiment.key, variantId: result.key}); }\n```\n\n## Data Source Setup[​](#data-source-setup \"Direct link to Data Source Setup\")\n\nFreshpaint does not support direct data access, instead, to work with GrowthBook, you'll need to export your data to a data warehouse. You can read about the supported data destinations [here](https://documentation.freshpaint.io/destinations/warehouses). Freshpaint lets you export to BigQuery, Databricks, Postgres, Redshift, and Snowflake.\n\nnote\n\nGrowthBook will attempt automatically create SQL queries for Freshpaint, but this may require adjustments. General instructions for setting up SQL sources are below. If you need any help, [reach out to us](https://slack.growthbook.io/) and we can help\n\n## Configuration Settings[​](#configuration-settings \"Direct link to Configuration Settings\")\n\nOnce you have chosen your event tracker and data source type and successfully connected, you will be given an opportunity to modify your configuration settings. For many applications GrowthBook will have chosen the correct configuration settings straight out of the box based upon which event tracker you choose. In some instances you may need to tweak them slightly, or in the case of using a custom datasource, define them more explicitly.\n\n### Identifier Types[​](#identifier-types \"Direct link to Identifier Types\")\n\nThese are all the types of identifiers you use to split traffic in an experiment and track metric conversions. Common examples are `user_id`, `anonymous_id`, `device_id`, and `ip_address`.\n\n### Experiment Assignment Queries[​](#experiment-assignment-queries \"Direct link to Experiment Assignment Queries\")\n\nAn experiment assignment query returns which users were part of which experiment, what variation they saw, and when they saw it. Each assignment query is tied to a single identifier type (defined above). You can also have multiple assignment queries if you store that data in different tables, for example one from your email system and one from your back-end.\n\nThe end result of the query should return data like this:\n\n| user\\_id | timestamp | experiment\\_id | variation\\_id |\n| --- | --- | --- | --- |\n| 123 | 2021-08-23-10:53:04 | my-button-test | 0   |\n| 456 | 2021-08-23 10:53:06 | my-button-test | 1   |\n\nThe above assumes the identifier type you are using is `user_id`. If you are using a different identifier, you would use a different column name.\n\nHere's an example query you might use:\n\n```\nSELECT  user_id,  received_at as timestamp,  experiment_id,  variation_idFROM  eventsWHERE  event_type = 'viewed experiment'\n```\n\nMake sure to return the exact column names that GrowthBook is expecting. If your table’s columns use a different name, add an alias in the SELECT list (e.g. `SELECT original_column as new_column`).\n\n#### Duplicate Rows[​](#duplicate-rows \"Direct link to Duplicate Rows\")\n\nIf a user sees an experiment multiple times, you should return multiple rows in your assignment query, one for each time the user was exposed to the experiment.\n\nThis helps us detect when users were exposed to more than one variation, and eventually may be useful in helping build interesting time series.\n\n#### Experiment Dimensions[​](#experiment-dimensions \"Direct link to Experiment Dimensions\")\n\nIn addition to the standard 4 columns above, you can also select additional dimension columns. For example, `browser` or `referrer`. These extra columns can be used to drill down into experiment results.\n\n#### Identifier Join Tables[​](#identifier-join-tables \"Direct link to Identifier Join Tables\")\n\nIf you have multiple identifier types and want to be able to auto-merge them together during analysis, you also need to define identifier join tables. For example, if your experiment is assigned based on `device_id`, but the conversion metric only has a `user_id` column.\n\nThese queries are very simple and just need to return columns for each of the identifier types being joined. For example:\n\n```\nSELECT user_id, device_id FROM logins\n```\n\n#### SQL Template Variables[​](#sql-template-variables \"Direct link to SQL Template Variables\")\n\nWithin your queries, there are several placeholder variables you can use. These will be replaced with strings before being run based on your experiment. This can be useful for giving hints to SQL optimization engines to improve query performance.\n\nThe variables are:\n\n*   **startDate** - `YYYY-MM-DD HH:mm:ss` of the earliest data that needs to be included\n*   **startYear** - Just the `YYYY` of the startDate\n*   **startMonth** - Just the `MM` of the startDate\n*   **startDay** - Just the `DD` of the startDate\n*   **startDateUnix** - Unix timestamp of the startDate (seconds since Jan 1, 1970)\n*   **endDate** - `YYYY-MM-DD HH:mm:ss` of the latest data that needs to be included\n*   **endYear** - Just the `YYYY` of the endDate\n*   **endMonth** - Just the `MM` of the endDate\n*   **endDay** - Just the `DD` of the endDate\n*   **endDateUnix** - Unix timestamp of the endDate (seconds since Jan 1, 1970)\n*   **experimentId** - Either a specific experiment id OR `%` if you should include all experiments\n\nFor example:\n\n```\nSELECT  user_id,  anonymous_id,  received_at as timestamp,  experiment_id,  variation_idFROM  experiment_viewedWHERE  received_at BETWEEN '{{ startDate }}' AND '{{ endDate }}'  AND experiment_id LIKE '{{ experimentId }}'\n```\n\n**Note:** The inserted values do not have surrounding quotes, so you must add those yourself (e.g. use `'{{ startDate }}'` instead of just `{{ startDate }}`)\n\n### Jupyter Notebook Query Runner[​](#jupyter-notebook-query-runner \"Direct link to Jupyter Notebook Query Runner\")\n\nThis setting is only required if you want to export experiment results as a Jupyter Notebook.\n\nThere is no one standard way to store credentials or run SQL queries from Jupyter notebooks, so GrowthBook lets you define your own Python function.\n\nIt needs to be called `runQuery`, accept a single string argument named `sql`, and return a pandas data frame.\n\nHere's an example for a Postgres (or Redshift) data source:\n\n```\nimport osimport psycopg2import pandas as pdfrom sqlalchemy import create_engine, text# Use environment variables or similar for passwords!password = os.getenv('POSTGRES_PW')connStr = f'postgresql+psycopg2://user:{password}@localhost'dbConnection = create_engine(connStr).connect();def runQuery(sql):  return pd.read_sql(text(sql), dbConnection)\n```\n\n**Note:** This python source is stored as plain text in the database. Do not hard-code passwords or sensitive info. Use environment variables (shown above) or another credential store instead.\n\n## Schema Browser[​](#schema-browser \"Direct link to Schema Browser\")\n\nWhen you connect a supported data source to GrowthBook, we automatically generate metadata that is used by our Schema Browser. The Schema Browser is a user-friendly interface that makes writing queries easier as you can easily explore information about the datasource such as databases, schemas, tables, columns, and data types.\n\n![GrowthBook Schema Browser](https://docs.growthbook.io/assets/images/growthbook-schema-browser-40e388a5759c12afef54296d9c0c1980.png)\n\nBelow are the data sources that currently support the Schema Browser:\n\n*   AWS Athena - _Requires a Default Catalog_\n*   BigQuery - _Requires a Project Name and Default Dataset_\n*   ClickHouse\n*   Databricks - _Currently only supported on version 10.2 and above with a Unity Catalog_\n*   MsSQL/SQL Server\n*   MySQL/MariaDB\n*   Postgres\n*   PrestoDB (and Trino) - _Requires a Default Catalog_\n*   Redshift\n*   Snowflake",
    "title": "Setting up Freshpaint as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Freshpaint to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/keenio",
    "markdown": "# Setting up KeenIO as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with KeenIO. After choosing KeenIO as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for KeenIO has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-keenio) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up KeenIO as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your KeenIO to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/mixpanel",
    "markdown": "# Using GrowthBook with Mixpanel | GrowthBook Docs\n\ncaution\n\nUsing Mixpanel as a direct datasource is not advised and has been placed in maintenance mode. This is because because Mixpanel has placed JQL, their query language, in [maintenance mode](https://developer.mixpanel.com/reference/jql-overview) themselves. Therefore, our integration is limited and may unexpectedly break as they wind down support for JQL.\n\nIn order to ensure long term compatibility with GrowthBook and to receive the full set of features available in GrowthBook, we suggest you set up an export to a data warehouse following [Mixpanel's documentation](https://developer.mixpanel.com/reference/raw-data-export-api) and then use that separate data warehouse (e.g. Snowflake, BigQuery) as your Data Source in GrowthBook.\n\n## Configuring GrowthBook to work with Mixpanel\n\nGrowthBook supports Mixpanel as a data source for your A/B test reports.\n\n## 1\\. Create a Service Account in Mixpanel[​](#1-create-a-service-account-in-mixpanel \"Direct link to 1. Create a Service Account in Mixpanel\")\n\nTo add Mixpanel to GrowthBook you need to create a service account within Mixpanel.\n\n![Add Mixpanel service account](https://docs.growthbook.io/images/guides/mixpanel-2-add-service-account.png)\n\nClick on the add service account. This account needs at least analysis permissions.\n\n![Add Mixpanel service account specifics](https://docs.growthbook.io/images/guides/mixpanel-3-add-service-account-details.png)\n\nOnce you crete the account, you'll get the username and secret. This is the only time you'll see this information, so it's best to leave this page up while you do the next step to add that connection information to GrowthBook.\n\n![Service account details](https://docs.growthbook.io/images/guides/mixpanel-4-service-account-results.png)\n\n## 2\\. Connect GrowthBook to Mixpanel[​](#2-connect-growthbook-to-mixpanel \"Direct link to 2. Connect GrowthBook to Mixpanel\")\n\nFrom the Analysis → Data source section of the GrowthBook Platform, you can add a data source, and then choose Mixpanel from the avaliable options.\n\n![GrowthBook add Mixpanel data source form](https://docs.growthbook.io/images/new-data-sources-modal.png)\n\nThen you'll be asked to enter your Mixpanel connection information:\n\n![GrowthBook add Mixpanel data source form](https://docs.growthbook.io/images/guides/mixpanel-1-add-data-source.png)\n\nAdd the mixpanel information from the previous step here. The other information you'll need is the `project ID` from Mixpanel. You can find this in the the project settings overview from mixpanel\n\n![Get the Mixpanel project ID](https://docs.growthbook.io/images/guides/mixpanel-5-get-project-id.png)\n\n## 3\\. Experiment Tracking Information[​](#3-experiment-tracking-information \"Direct link to 3. Experiment Tracking Information\")\n\nAfter you successfully connect to mixpanel from GrowthBook you'll be asked to enter the experiment event information. These values need to match the names you choose when sending the experiment exposure information to Mixpanel (see step 4), but can be any values you choose. We suggest you use `$experiment started`, `Experiment name` and `Variant name` as in the example below.\n\n![Experiment event naming for GrowthBook](https://docs.growthbook.io/images/guides/mixpanel-6-add-exp-event-names2.png)\n\nThe naming here has to match the event names you pass with the SDK implementation (see step 4).\n\nWhen you've successfully connected GrowthBook to your Mixpanel account, you'll see the experiment tracking information as well as sample code.\n\n![Successful connection to Mixpanel](https://docs.growthbook.io/images/guides/mixpanel-8-successful-connection2.png)\n\n## 4\\. Implement GrowthBook SDK with Mixpanel[​](#4-implement-growthbook-sdk-with-mixpanel \"Direct link to 4. Implement GrowthBook SDK with Mixpanel\")\n\nWhen implementing the GrowthBook SDK there are two things that are needed that are specific to Mixpanel: tracking to Mixpanel when a user is placed into an experiment, and adding the Mixpanel user ID to the list of user attributes. You can find the implementation of the GrowthBook SDKs in many languages, the implementation is similar for each. Shown below is the typescript version:\n\n```\nimport mixpanel from \"mixpanel-browser\";// Create a GrowthBook instanceconst growthbook = new GrowthBook({  trackingCallback: (experiment, result) => {    mixpanel.track(\"$experiment_started\", {      \"Experiment name\": experiment.key,      \"Variant name\": result.variationId,      $source: \"growthbook\",    });  },});// Add the mixpanel user id to the GrowthBook attributes when it loads:mixpanel.init(\"[YOUR PROJECT TOKEN]\", {  debug: true,  loaded: function (mx) {    growthbook.setAttributes({      ...growthbook.getAttributes(),      id: mx.get_distinct_id(),    });  },});\n```\n\nThe project token can be found in the Mixpanel Project Settings.\n\n![Project Tokens from Mixpanel](https://docs.growthbook.io/images/guides/mixpanel-9-project-token.png)\n\nYou will still need to implement the feature flagging side of GrowthBook, where the feature JSON is fetched and other user attributes defined. This implementation instructions can be found for each specific language.\n\nnote\n\nBy default, Mixpanel stores all events as UTC time, but can be changed per project. If the timezones between GrowthBook and your Mixpanel don't match, it can cause results to not show data for the correct time period.",
    "title": "Using GrowthBook with Mixpanel | GrowthBook Docs",
    "description": "GrowthBook supports Mixpanel as a data source for your A/B test reports.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/rudderstack",
    "markdown": "# GrowthBook and RudderStack | GrowthBook Docs\n\n## Configuring GrowthBook to work with RudderStack\n\nGrowthBook supports RudderStack as an event source for easily adding A/B testing to your application. This document is a how-to guide for setting up RudderStack with your application, connecting RudderStack to BigQuery and then connecting GrowthBook to this data.\n\n## 1\\. Setup RudderStack[​](#1-setup-rudderstack \"Direct link to 1. Setup RudderStack\")\n\nIf you have already set up RudderStack, you can skip this step. RudderStack allows you to send events from your application to any data destination, including BigQuery, which is what we're going to use it for here.\n\nOnce you have a RudderStack account, you need to create a BigQuery bucket for the event data to be stored. You can follow the [directions from RudderStack](https://www.rudderstack.com/docs/destinations/storage-platforms/google-cloud-storage/), but the short version is:\n\n*   From the Google Cloud console for BigQuery, create a new bucket (or you can also use an already existing bucket).\n*   Create a new service account under [IAM & Admin → Service Accounts](https://console.cloud.google.com/iam-admin/serviceaccounts) for RudderStack to connect to this bucket.\n*   Give Storage `Object Admin` role access to the newly created service account.\n*   Under the `actions` menu on the service account you just created, click on manage keys to create a new key. Choose key type as JSON. This will cause a JSON key file to be downloaded to your computer.\n\nWith the bucket created, we can create a RudderStack warehouse destination.\n\n![Add a data warehouse destination for RudderStack](https://docs.growthbook.io/images/guides/rudderstack-1-addwarehouse.png) ![Select BigQuery from the list](https://docs.growthbook.io/images/guides/rudderstack-2-adddestination.png) ![Add the BigQuery account information](https://docs.growthbook.io/images/guides/rudderstack-3-addbucket.png)\n\nThe `Project` and `bucket name` needs to match the values you set up when creating the Google cloud project and bucket.\n\nOnce you've created the destination, you should see it successfully connect\n\n![Successfully added the BigQuery account information](https://docs.growthbook.io/images/guides/rudderstack-4-connection-completed.png)\n\nAnd it will show up as a connected destination on your RudderStack Connect dashboard.\n\n![BigQuery connection in rudderstack](https://docs.growthbook.io/images/guides/rudderstack-4.5-bigQueryDestination.png)\n\n## 2\\. Connect GrowthBook[​](#2-connect-growthbook \"Direct link to 2. Connect GrowthBook\")\n\nNow that we have data flowing into BigQuery, we need to have GrowthBook connect to it. It is best practice to create another service account for GrowthBook to connect to BigQuery. (We have a complete guide on how to do this here: [Setting up BigQuery as a data source](https://docs.growthbook.io/guide/bigquery))\n\nNavigate to Analysis → Data Sources from within GrowthBook and click on 'Add Data Source' Button. From the window that pops up, select RudderStack:\n\n![Choose RudderStack data schema](https://docs.growthbook.io/images/new-data-sources-modal.png)\n\nAfter choosing RudderStack you'll be presented with a connection window to connect to BigQuery.\n\n![Connect to your database](https://docs.growthbook.io/images/guides/rudderstack-add-bigquery.png)\n\nWhen successfully connected, you'll be redirected to the data source page. You'll see all the connection options for BigQuery as well as the queries used. By choosing RudderStack as you added the data source, GrowthBook will pre-populate the experiment exposure query which is need to determine which user saw which experiment variation. Depending on your needs, you may still need to adjust these queries - for instance if you're tracking both `anonymous_id` and `user_id`, you'll need to add the `user_id` query.\n\n## 3\\. Add Metrics[​](#3-add-metrics \"Direct link to 3. Add Metrics\")\n\nGrowthBook needs to know what metrics you want to use in your experiments, and how to query this data from BigQuery. This step depends on your needs as an organization. Keep in mind that metric queries will be generic, returning all users who do an event, but will be joined to the experiment exposure information when determining the impact of experiment results.\n\nMetrics are added from the Analysis → Metrics menu.\n\n![Choose RudderStack data schema](https://docs.growthbook.io/images/guides/metrics-addmetric.png) ![Choose RudderStack data schema](https://docs.growthbook.io/images/guides/metrics-metricoverview.png)",
    "title": "GrowthBook and RudderStack | GrowthBook Docs",
    "description": "Learn how to use GrowthBook with RudderStack to easily add A/B testing to your application",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/jitsu",
    "markdown": "# Setting up Jitsu as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with Jitsu. After choosing Jitsu as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for Jitsu has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-jitsu) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up Jitsu as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Jitsu to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/segment",
    "markdown": "# Setting up Segment as an event tracker\n\n## Configuring GrowthBook to work with Segment\n\nGrowthBook supports Segment as an event source for easily adding A/B testing to your application. This document is a how-to guide for setting up Segment with your application, connecting Segment to BigQuery and then connecting GrowthBook to this data.\n\n## 1\\. Setup Segment[​](#1-setup-segment \"Direct link to 1. Setup Segment\")\n\nIf you have already set up Segment, you can skip this step. Segment allows you to send events from your application to any data destination, and supports most data warehouse.\n\n## 2\\. Add Exposure Tracking Event[​](#2-add-exposure-tracking-event \"Direct link to 2. Add Exposure Tracking Event\")\n\nTo track when a user is exposed to an experiment from the client side, you'll want to add a Segment event call to your `trackingCallback` function. This function is called when a user is exposed to an experiment, and is passed the experiment name and variation name.\n\n```\nconst gb = new GrowthBook({  apiHost: \"https://cdn.growthbook.io\",  clientKey: \"sdk-abc123\",  trackingCallback: (experiment, result) => {    // Example using Segment    analytics.track(\"Experiment Viewed\", {      experimentId: experiment.key,      variationId: result.key,    });  }});\n```\n\n## 3\\. Connect GrowthBook to Your Warehouse[​](#3-connect-growthbook-to-your-warehouse \"Direct link to 3. Connect GrowthBook to Your Warehouse\")\n\nNow that we have data flowing into a data warehouse, we need to have GrowthBook connect to it. It is best practice to create another service account for GrowthBook to connect to your data warehouse.\n\n![Choose Segment data schema](https://docs.growthbook.io/images/new-data-sources-modal.png)\n\nAfter choosing Segment you'll be presented with a connection window to connect to your data warehouses. Enter the connection credentials for your data warehouse.\n\nWhen successfully connected, you'll be redirected to the data source page. GrowthBook will automatically create the experiment exposure query which is need to determine which user saw which experiment variation. Depending on your needs, you may still need to adjust these queries - for instance if you're tracking both `anonymous_id` and `user_id`, you'll need to add the `user_id` query.\n\n## 3\\. Add Metrics[​](#3-add-metrics \"Direct link to 3. Add Metrics\")\n\nGrowthBook needs to know what metrics you want to use in your experiments, and how to query this data from BigQuery. This step depends on your needs as an organization. Keep in mind that metric queries will be generic, returning all users who do an event, but will be joined to the experiment exposure information when determining the impact of experiment results.\n\nMetrics are added from the Analysis → Metrics menu.\n\n![Choose Segment data schema](https://docs.growthbook.io/images/guides/metrics-addmetric.png) ![Choose Segment data schema](https://docs.growthbook.io/images/guides/metrics-metricoverview.png)",
    "title": "Setting up Segment as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Segment to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/guide/matomo",
    "markdown": "# GrowthBook and Matomo | GrowthBook Docs\n\n## Configuring GrowthBook to work with Matomo\n\nGrowthBook makes it easy to do A/B testing using Matomo as an event source. This guide shows you how to set up GrowthBook to work with self-hosted Matomo and the MySQL/MariaDB that it runs on.\n\n## 1\\. Integrate GrowthBook's SDK with Matomo within your application[​](#1-integrate-growthbooks-sdk-with-matomo-within-your-application \"Direct link to 1. Integrate GrowthBook's SDK with Matomo within your application\")\n\nYou can follow the SDK integration guides depending on your language. We need to add the `TrackingCallback` call specifically for Matomo. For this guide, we'll use Javascript (Next.js).\n\nMatomo lets you track custom events, and you can adjust the `Event Category`, `Event Action`, `Event Name`, and `Event Value`. You can read more about the custom tracking call at [Matomo's documentation site](https://matomo.org/faq/reports/implement-event-tracking-with-matomo/).\n\nnote\n\nThere are a few caveats with Matomo's event schema that it is important to be aware of.\n\n*   **Event Category** cannot contain any spaces.\n    \n*   If **Event Name** is 0 or \"0\" it will record null.\n    \n*   **Event Value** must be an integer.\n    \n\nTo work with the default data schema in GrowthBook, we will encode the following:\n\n*   `Event Category`: will have the value `ExperimentViewed` to isolate the exposure events.\n*   `Event Action`: will store the experiment key.\n*   `Event Name`: will store the variation id (with a prefix of `v` or some other string)\n\n```\n// Create a GrowthBook instanceconst growthbook = new GrowthBook({  trackingCallback: (experiment, result) => {    window[\"_paq\"] = window._paq || [];    window._paq.push([      \"trackEvent\",      \"ExperimentViewed\",      experiment.key,      \"v\" + result.variationId,    ]);  },});\n```\n\nnote\n\nWe use the string prefix on the Event Name so that it is saved correctly, as `0` saves as `null`, but `v0` works correctly. This prefix is stripped with the SQL exposure query in step two.\n\nWith that set, we need to load the user id into the GrowthBook user attributes. The following code shows how to do this with the Matomo anonymous `visitor ID`\n\n```\n// add the Matomo anonId when loadedlet visitor_id;if (\"_paq\" in window) {  _paq.push([    function () {      visitor_id = this.getVisitorId();      growthbook.setAttributes({        ...growthbook.getAttributes(),        id: visitor_id,      });    },  ]);}\n```\n\nFor Next.js, we would need to do this in the useEffect and also detect the window in case of a server side render:\n\n```\n// Create a GrowthBook instanceconst growthbook = new GrowthBook({    trackingCallback: (experiment, result) => {        if (window) {            window[\"_paq\"] = window._paq || [];            window._paq.push(['trackEvent', 'ExperimentViewed', experiment.key, \"v\"+result.variationId]);        }    }});export default function MyApp({ Component, pageProps }) {    useEffect(() => {        // Load feature definitions from API        fetch(process.env.NEXT_PUBLIC_GROWTHBOOK_FEATURES_URL)            .then((res) => res.json())            .then((json) => {                growthbook.setFeatures(json.features);            });        // TODO: replace with real targeting attributes        growthbook.setAttributes({            \"company\": \"foo\",            \"browser\": \"foo\",            \"url\": \"foo\"        });        // add the Matomo anonId when loaded        let visitor_id;        if(\"_paq\" in window) {            _paq.push([function () {                visitor_id = this.getVisitorId();                growthbook.setAttributes({ ...growthbook.getAttributes(), id: visitor_id });            }]);        }    }, []);    ...\n```\n\n## 2\\. Add the Data Source for Matomo[​](#2-add-the-data-source-for-matomo \"Direct link to 2. Add the Data Source for Matomo\")\n\nFrom within the GrowthBook application, navigate to the `Data Sources` page from within the `Analysis` section. Click on `add data source` and select `Matomo` from the list of event sources.\n\n![Add Matomo data source](https://docs.growthbook.io/images/new-data-sources-modal.png)\n\nAfter you select Matomo, you will be prompted to connect to your MySQL/Maria database.\n\n![Add MySQL/MariaDB data source](https://docs.growthbook.io/images/guides/matomo-2-connect-to-db.png)\n\nOnce you've completed the connection GrowthBook will and then you can adjust some settings specific to your instance and how you implemented the Matomo tracking code.\n\n![Setting Matomo options](https://docs.growthbook.io/images/guides/matomo-3-matomo-options.png)\n\nWhen you save, you'll have the experiment exposure queries for anonymous and user\\_id set for you.\n\n![Default Matomo experiment exposure query](https://docs.growthbook.io/images/guides/matomo-4-matomo-anon.png)\n\nYou can test running this query directly against your database. It should return a list of experiments exposure events.\n\nYou will still need to define the metrics you want to test against from the metrics settings.",
    "title": "GrowthBook and Matomo | GrowthBook Docs",
    "description": "Configure GrowthBook to do A/B testing using Matomo Analytics",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/mparticle",
    "markdown": "# Setting up MParticle as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with MParticle. After choosing MParticle as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for MParticle has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-mparticle) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up MParticle as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your MParticle to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/custom",
    "markdown": "# Setting up a custom data source\n\nGrowthBook just needs you to write a couple SQL queries in order to query your data. Writing this SQL is a (mostly) one-time setup task. After building out this library of queries, they can easily be reused across many experiments.\n\nDon’t worry about the potentially huge number of rows returned by these raw queries. They are never run directly as-is and are instead combined, filtered, and aggregated as part of larger queries. Most of the final queries run by GrowthBook result in fewer than 10 rows returned.\n\nIn the spirit of transparency, any time a query is run, you should see a `View Queries` link in the app to view the raw SQL sent to the data warehouse. This can help with debugging or let you move a query into a tool like Mode Analytics for more advanced analysis.\n\nFind more info on what needs to be configured [here](https://docs.growthbook.io/app/datasources#configuration-settings).",
    "title": "Setting up a custom data source | GrowthBook Docs",
    "description": "This document outlines the steps needed to add a custom data source to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/event-trackers/snowplow",
    "markdown": "# Setting up Snowplow as an event tracker\n\nGrowthbook will modify its default sql settings to work as seamlessly as possible with Snowplow. After choosing Snowplow as your data source and filling in the connection info, you can proceed with any modifications of your [configuration settings.](https://docs.growthbook.io/app/datasources)\n\nUnfortunately a detailed guide for Snowplow has not been written yet. However we do have a thriving developer community on [Slack](https://slack.growthbook.io/?ref=docs-event-tracker-snowplow) that you can reach out to in order to get your implementation working. Once you get your implementation working please consider contributing back to the community by [creating this page](https://github.com/growthbook/growthbook/blob/main/CONTRIBUTING.md#working-on-docs).",
    "title": "Setting up Snowplow as an event tracker | GrowthBook Docs",
    "description": "This document outlines the steps needed to add your Snowplow to GrowthBook.",
    "languageCode": "en"
  },
  {
    "url": "https://docs.growthbook.io/statistics/power-technical",
    "markdown": "# Power Analysis Technical Details | GrowthBook Docs\n\nHere we document the technical details behind GrowthBook power calculations and minimum detectable effect (MDE) calculations for both [frequentist](#frequentist-engine-details) and [Bayesian](#bayesian-engine-details) engines.\n\n## Frequentist engine details[​](#frequentist-engine-details \"Direct link to Frequentist engine details\")\n\n### Frequentist power[​](#frequentist-power \"Direct link to Frequentist power\")\n\nBelow we describe technical details of our implementation. First we start with the definition of power.\n\n**Power** is the probability of a statistically significant result.\n\nWe use the terms below throughout. Define:\n\n1.  the false positive rate as α\\\\alpha (GrowthBook default is α\\=0.05\\\\alpha=0.05).\n2.  the critical values Z1−α/2\\=Φ−1(1−α/2)Z\\_{1- \\\\alpha / 2}= \\\\Phi^{-1}(1-\\\\alpha/2) and Z1−α\\=Φ−1(1−α)Z\\_{1-\\\\alpha}= \\\\Phi^{-1}(1-\\\\alpha) where Φ−1\\\\Phi^{-1} is the inverse CDF of the standard normal distribution.\n3.  the true relative treatment effect as Δ\\\\Delta, its estimate as Δ^\\\\hat{\\\\Delta} and its estimated standard error as σ^Δ\\\\hat{\\\\sigma}\\_{\\\\Delta}. Note that as the sample size nn increases, σ^Δ\\\\hat{\\\\sigma}\\_{\\\\Delta} decreases by a factor of 1/n1/\\\\sqrt{n}.\n\nWe make the following assumptions:\n\n1.  equal sample sizes across control and treatment variations. If unequal sample sizes are used in the experiment, use the smaller of the two sample sizes. This will produce conservative power estimates.\n2.  equal variance across control and treatment variations;\n3.  observations across users are independent and identically distributed;\n4.  all metrics have finite variance; and\n5.  you are running a two-sample t-test. If in practice you use CUPED, your power will be higher.\n\nFor a 1-sided test, the power is\n\nπ\\=P(Δ^σ^Δ\\>Z1−α)\\=P(Δ^−Δσ^Δ\\>Z1−α−Δσ^Δ)\\=1−Φ(Z1−α−Δσ^Δ).\\\\begin{align} \\\\pi = P\\\\left(\\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}\\_{\\\\Delta}} > Z\\_{1-\\\\alpha}\\\\right)=P\\\\left(\\\\frac{\\\\hat{\\\\Delta}-\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}} > Z\\_{1-\\\\alpha}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right)=1 - \\\\Phi\\\\left(Z\\_{1-\\\\alpha}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right). \\\\end{align}\n\nFor a 2-sided test (all GrowthBook tests are 2-sided), power is composed of the probability of a statistically significant positive result and a statistically significant negative result. Using the same algebra as in Equation 1 (except using Z1−0.5αZ\\_{1-0.5\\\\alpha} for the critical value), the probability of a statistically significant positive result is\n\nπpos\\=1−Φ(Z1−α/2−Δσ^Δ).\\\\begin{align} \\\\pi\\_{pos} &= 1 - \\\\Phi\\\\left(Z\\_{1-\\\\alpha/2}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right). \\\\end{align}\n\nThe probability of a statistically significant negative result is\n\nπneg\\=P(Δ^σ^Δ<Zα/2)\\=P(Δ^−Δσ^Δ<Zα/2−Δσ^Δ)\\=Φ(Zα/2−Δσ^Δ).\\\\begin{align} \\\\pi\\_{neg} &= P\\\\left(\\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}\\_{\\\\Delta}} < Z\\_{\\\\alpha/2}\\\\right)=P\\\\left(\\\\frac{\\\\hat{\\\\Delta}-\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}} < Z\\_{\\\\alpha/2}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right)=\\\\Phi\\\\left(Z\\_{\\\\alpha/2}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right). \\\\end{align}\n\nFor a 2-sided test, the power equals\n\nπ\\=1−Φ(Z1−α/2−Δσ^Δ)+Φ(Zα/2−Δσ^Δ).\\\\begin{align} \\\\pi = 1 - \\\\Phi\\\\left(Z\\_{1-\\\\alpha/2}-\\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}\\\\right) + \\\\Phi(Z\\_{\\\\alpha/2} - \\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}}). \\\\end{align}\n\n### Frequentist minimum detectable effect[​](#frequentist-minimum-detectable-effect \"Direct link to Frequentist minimum detectable effect\")\n\nSome customers want to know what effect size is required to produce at least π\\\\pi power.  \nThe **minimum detectable effect** is the smallest Δ\\\\Delta for which nominal power (e.g., 80%) is achieved.\n\nBelow we describe commonly used MDE calculations, though we do not use these at GrowthBook.  \nFor a 1-sided test there is a closed form solution for the MDE. Solving Equation 1 for Δ\\\\Delta produces\n\nMDE\\=σ^Δ(Φ−1(1−α)−Φ−1(1−π)).\\\\begin{align} \\\\text{MDE} &= \\\\hat{\\\\sigma}\\_{\\\\Delta}\\\\left(\\\\Phi^{-1}(1 - \\\\alpha)-\\\\Phi^{-1}(1 - \\\\pi)\\\\right). \\\\end{align}\n\nIn the 2-sided case there is no closed form solution.  \nOften in practice the MDE is defined as the solution to inverting Equation 2.  \nThis ignores the negligible term in Equation 3, and produces power estimates very close to π\\\\pi:\n\nMDEtwo-sided\\=σ^Δ(Φ−1(1−α/2)−Φ−1(1−π)).\\\\begin{align} \\\\text{MDE}\\_{\\\\text{two-sided}} &= \\\\hat{\\\\sigma}\\_{\\\\Delta}\\\\left(\\\\Phi^{-1}(1 - \\\\alpha/2)-\\\\Phi^{-1}(1 - \\\\pi)\\\\right). \\\\end{align}\n\nThis approach works when effects are defined on the absolute scale, where the uncertainty of effect estimate does not depend upon the true absolute effect. For relative inference, this does not hold, and so GrowthBook uses a different approach. The terms below are used to help define the variance of the sample lift.\n\n1.  Define ΔAbs\\\\Delta\\_{Abs} as the absolute effect.\n2.  Define μA\\\\mu\\_{A} as the population mean of variation AA and σ2\\\\sigma^{2} as the population variance.\n3.  For variation BB analogously define μB\\\\mu\\_{B}; recall that we assume equal variance across treatment arms.\n4.  Define NN as the per-variation sample size.\n5.  Define the sample counterparts as (μ^A\\\\hat{\\\\mu}\\_{A}, σ^A2\\\\hat{\\\\sigma}\\_{A}^{2}, μ^B\\\\hat{\\\\mu}\\_{B}, and σ^B2\\\\hat{\\\\sigma}\\_{B}^{2}).\n\nThen the variance of the sample lift is\n\nσ^Δ2\\=σ2N1μA2+σ2N∗μB2μA4\\=σ2N1μA2+σ2N∗(μA+ΔAbs)2μA4.\\\\begin{align} \\\\hat{\\\\sigma}\\_{\\\\Delta}^{2} &= \\\\frac{\\\\sigma^{2}}{N}\\\\frac{1}{\\\\mu\\_{A}^{2}} + \\\\frac{\\\\sigma^{2}}{N} \\*\\\\frac{\\\\mu\\_{B}^{2}}{\\\\mu\\_{A}^{4}} \\\\\\\\&= \\\\frac{\\\\sigma^{2}}{N}\\\\frac{1}{\\\\mu\\_{A}^{2}} + \\\\frac{\\\\sigma^{2}}{N} \\*\\\\frac{\\\\left(\\\\mu\\_{A}+\\\\Delta\\_{Abs}\\\\right)^{2}}{\\\\mu\\_{A}^{4}}. \\\\end{align}\n\nTherefore, when inverting the power formula above to find the minimum Δ\\\\Delta that produces at least 80% power, the uncertainty term σ^Δ\\\\hat{\\\\sigma}\\_{\\\\Delta} changes as Δ\\\\Delta changes.  \nTo find the MDE we solve for the equation below, where we make explicit the dependence of σ^Δ\\\\hat{\\\\sigma}\\_{\\\\Delta} on Δ\\\\Delta:\n\nΔσ^Δ(Δ)\\=Φ−1(1−α/2)−Φ−1(1−π).\\\\begin{align\\*} \\\\frac{\\\\Delta}{\\\\hat{\\\\sigma}\\_{\\\\Delta}(\\\\Delta)} = \\\\Phi^{-1}\\\\left({1-\\\\alpha/2}\\\\right) - \\\\Phi^{-1}(1 - \\\\pi). \\\\end{align\\*}\n\nDefine the constant k\\=Φ−1(1−α/2)−Φ−1(1−π)k = \\\\Phi^{-1}\\\\left({1-\\\\alpha/2}\\\\right) - \\\\Phi^{-1}(1 - \\\\pi). We solve for μB\\\\mu\\_{B} in:\n\n(μB−μA)/μAVar(Δ^)\\=k  ⟺  (μB−μA)2\\=k2μA2Var(Δ^)\\=k2μA2(σ2N1μA2+σ2N∗μB2μA4).\\\\frac{(\\\\mu\\_{B}-\\\\mu\\_{A})/\\\\mu\\_{A}}{\\\\sqrt{\\\\text{Var}(\\\\hat{\\\\Delta})}} = k \\\\iff (\\\\mu\\_{B}-\\\\mu\\_{A})^{2} =k^{2}\\\\mu\\_{A}^{2}\\\\text{Var}(\\\\hat{\\\\Delta}) = k^{2}\\\\mu\\_{A}^{2}\\\\left(\\\\frac{\\\\sigma^{2}}{N}\\\\frac{1}{\\\\mu\\_{A}^{2}} + \\\\frac{\\\\sigma^{2}}{N} \\*\\\\frac{\\\\mu\\_{B}^{2}}{\\\\mu\\_{A}^{4}}\\\\right).\n\nRearranging terms shows that μB2(1−σ2Nk2μA2)+μB(−2μA)+(μA2−k2σ2N)\\=0.\\\\mu\\_{B}^{2}\\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right) + \\\\mu\\_{B}\\\\left(-2\\\\mu\\_{A}\\\\right) + \\\\left(\\\\mu\\_{A}^{2}-k^{2}\\\\frac{\\\\sigma^{2}}{N}\\\\right) = 0.\n\nThis is quadratic in μB\\\\mu\\_{B} and has solution\n\nμB\\=2μA±4μA2−4(1−σ2Nk2μA2)(μA2−k2σ2N)2(1−σ2Nk2μA2)\\=μA±μA2−(1−σ2Nk2μA2)(μA2−k2σ2N)(1−σ2Nk2μA2).\\\\mu\\_{B} = \\\\frac{2 \\\\mu\\_{A} \\\\pm \\\\sqrt{4 \\\\mu\\_{A}^{2}-4\\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right)\\\\left(\\\\mu\\_{A}^{2}-k^{2}\\\\frac{\\\\sigma^{2}}{N}\\\\right)}}{2\\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right)} = \\\\frac{\\\\mu\\_{A} \\\\pm \\\\sqrt{\\\\mu\\_{A}^{2}-\\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right)\\\\left(\\\\mu\\_{A}^{2}-k^{2}\\\\frac{\\\\sigma^{2}}{N}\\\\right)}}{\\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right)} .\n\nThe discriminant reduces to\n\nk2∗σ2N(2−σ2N∗k2μA2).k^{2} \\* \\\\frac{\\\\sigma^{2}}{N} \\\\left(2 - \\\\frac{\\\\sigma^{2}}{N} \\* \\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right).\n\nso a solution for μB\\\\mu\\_{B} exists if and only if\n\n2−σ2N∗k2μA2\\>0  ⟺  2\\>σ2N∗k2μA2  ⟺  N\\>σ2k22μA2.\\\\begin{align} 2 - \\\\frac{\\\\sigma^{2}}{N} \\* \\\\frac{k^{2}}{\\\\mu\\_{A}^{2}} > 0 &\\\\iff 2 > \\\\frac{\\\\sigma^{2}}{N} \\* \\\\frac{k^{2}}{\\\\mu\\_{A}^{2}} \\\\iff N > \\\\frac{\\\\sigma^{2}k^{2}}{2\\\\mu\\_{A}^{2}}. \\\\end{align}\n\nSimilarly, the MDE returned can be negative if the denominator is negative, which is nonsensical.  \nWe return cases only where the denominator is positive, which occurs if and only if:\n\n(1−σ2Nk2μA2)\\>0  ⟺  (1−σ2Nk2μA2)\\>0  ⟺  N\\>σ2k2μA2.\\\\begin{align} \\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right) > 0 \\\\iff \\\\left(1-\\\\frac{\\\\sigma^{2}}{N}\\\\frac{k^{2}}{\\\\mu\\_{A}^{2}}\\\\right) > 0 \\\\iff N > \\\\frac{\\\\sigma^{2}k^{2}}{\\\\mu\\_{A}^{2}}. \\\\end{align}\n\nThe condition in Equation 10 is stricter than the condition in Equation 9.\n\nIn summary, there will be some combinations of (μA,σ2)(\\\\mu\\_{A}, \\\\sigma\\_{2}) where the MDE does not exist for a given NN. If α\\=0.05\\\\alpha=0.05 and π\\=0.8\\\\pi=0.8, then k≈2.8k\\\\approx 2.8. Therefore, a rule of thumb is that NN needs to be roughly 9 times larger than the ratio of the variance to the squared mean to return an MDE. In these cases, NN needs to be increased.\n\n### Sequential testing[​](#sequential-testing \"Direct link to Sequential testing\")\n\nTo estimate power under sequential testing, we adjust the variance term σ^δ\\\\hat{\\\\sigma}\\_{\\\\delta} to account for sequential testing, and then input this adjusted variance into our power formula. We assume that you look at the data only once, so our power estimate below is a lower bound for the actual power under sequential testing. Otherwise we would have to make assumptions about the temporal correlation of the data generating process.\n\nIn sequential testing we construct confidence intervals as\n\nΔ^±σ^∗N∗2(Nρ2+1)N2ρ2log⁡(Nρ2+1α)\\\\begin{align\\*} \\\\hat{\\\\Delta} &\\\\pm \\\\hat{\\\\sigma}\\*\\\\sqrt{N} \\* \\\\sqrt{\\\\frac{2(N\\\\rho^2 + 1)}{N^2\\\\rho^2}\\\\log\\\\left(\\\\frac{\\\\sqrt{N\\\\rho^2 + 1}}{\\\\alpha}\\\\right)} \\\\end{align\\*}\n\nwhere\n\nρ\\=−2log(α)+log(−2log(α)+1)N∗\\\\rho = \\\\sqrt{\\\\frac{-2\\\\text{log}(\\\\alpha) + \\\\text{log}(-2 \\\\text{log}(\\\\alpha) + 1)}{N^\\*}}\n\nand N⋆N^{\\\\star} is a tuning parameter. This approach relies upon asymptotic normality. For power analysis we rewrite the confidence interval as\n\nΔ^±σ^∗N∗2(Nρ2+1)N2ρ2log⁡(Nρ2+1α)Z1−α/2Z1−α/2\\=Δr^±σ~Z1−α/2\\\\begin{align\\*} \\\\hat{\\\\Delta} &\\\\pm \\\\hat{\\\\sigma}\\*\\\\sqrt{N} \\* \\\\sqrt{\\\\frac{2(N\\\\rho^2 + 1)}{N^2\\\\rho^2}\\\\log\\\\left(\\\\frac{\\\\sqrt{N\\\\rho^2 + 1}}{\\\\alpha}\\\\right)}\\\\frac{Z\\_{1-\\\\alpha/2}}{Z\\_{1-\\\\alpha/2}} \\\\\\\\&=\\\\hat{\\\\Delta\\_{r}} \\\\pm \\\\tilde{\\\\sigma}Z\\_{1-\\\\alpha/2} \\\\end{align\\*}\n\nwhere\n\nσ~\\=σ^∗N2(Nρ2+1)N2ρ2log⁡(Nρ2+1α)1Z1−α/2\\\\tilde{\\\\sigma} = \\\\hat{\\\\sigma}\\*\\\\sqrt{N}\\\\sqrt{\\\\frac{2(N\\\\rho^2 + 1)}{N^2\\\\rho^2}\\\\log\\\\left(\\\\frac{\\\\sqrt{N\\\\rho^2 + 1}}{\\\\alpha}\\\\right)}\\\\frac{1}{Z\\_{1-\\\\alpha/2}}.\n\nWe use power analysis described above, except we substitute σ~2\\\\tilde{\\\\sigma}^{2} for σ^Δ2\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}.\n\n## Bayesian engine details[​](#bayesian-engine-details \"Direct link to Bayesian engine details\")\n\n### Bayesian power[​](#bayesian-power \"Direct link to Bayesian power\")\n\nFor Bayesian power analysis, we let users specify the prior distribution of the treatment effect. We then estimate Bayesian power, which is the probability that the (1−α)(1 - \\\\alpha) credible interval does not contain 0.\n\nWe assume a conjugate normal-normal model, as follows:\n\nΔ∼N(μprior,σprior2)Δ^∣Δ∼N(Δ,σ^Δ2).\\\\begin{align\\*} \\\\Delta &\\\\stackrel{}{\\\\sim}\\\\mathcal{N}\\\\left(\\\\mu\\_{prior}, \\\\sigma\\_{prior}^{2}\\\\right) \\\\\\\\ \\\\hat{\\\\Delta}|\\\\Delta &\\\\stackrel{}{\\\\sim}\\\\mathcal{N}\\\\left(\\\\Delta, \\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\right). \\\\end{align\\*}\n\nIn words, the model has two parts: 1) the normal prior for the treatment effect, which is specified by you; and 2) conditional upon the treatment effect, the estimated effect is normally distributed. The normal prior has several advantages, including: 1) bell-shaped distribution around the prior mean, so that extreme estimates will be shrunk more towards the prior than moderate estimates; 2) the ability to specify two moments, which is often the right amount of information for a prior; and 3) simplicity.  \nThe conditional normality of the effect estimate is motivated by the central limit theorem.\n\nWe use the normal distribution below to approximate the posterior:\n\nΔ∣Δ^∼N(Ω−1ω,Ω−1)Ω\\=1/σprior2+1/σ^Δ2ω\\=μprior/σprior2+Δ^/σ^Δ2.\\\\begin{align\\*} \\\\Delta|\\\\hat{\\\\Delta} &\\\\stackrel{}{\\\\sim}\\\\mathcal{N}\\\\left(\\\\Omega^{-1}\\\\omega, \\\\Omega^{-1}\\\\right) \\\\\\\\\\\\Omega &= 1/\\\\sigma\\_{prior}^{2} + 1/\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2} \\\\\\\\\\\\omega &= \\\\mu\\_{prior}/\\\\sigma\\_{prior}^{2} + \\\\hat{\\\\Delta}/\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}. \\\\end{align\\*}\n\nThis is an approximation to the posterior because Δ\\\\Delta affects σ^Δ2\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}. We tested this approximation through extensive simulations, and found it had comparable coverage and mean squared error to a posterior distribution empirically sampled using Metropolis Hastings.\n\nWe define rejection as the 100(1−α)100(1-\\\\alpha)% confidence interval not containing zero.  \nFor our posterior approximation, this occurs if the posterior mean for Δ∣Δ^\\\\Delta|\\\\hat{\\\\Delta} (i.e., Ω−1ω\\\\Omega^{-1}\\\\omega) divided by its posterior standard deviation(i.e., Ω−1)\\\\left(\\\\text{i.e., }\\\\sqrt{\\\\Omega^{-1}}\\\\right) is beyond the the appropriate critical threshold Z⋆Z^{\\\\star} (e.g., Φ−1(0.975)\\\\Phi^{-1}(0.975) for α\\=0.05\\\\alpha=0.05).\n\nInside of a Bayesian framework, it can help to permit the case where the prior model is misspecified.  \nThat is, the prior specified by the customer differs from the true prior that generates the treatment effect.  \nWe permit misspecification of the prior for Δ\\\\Delta, as we assume that the true data generating process (DGP) is Δ∼N(μ⋆,σ⋆2)\\\\Delta \\\\stackrel{}{\\\\sim}\\\\mathcal{N}\\\\left(\\\\mu\\_{\\\\star}, \\\\sigma\\_{\\\\star}^{2}\\\\right), while the specified DGP has Δ∼N(μprior,σprior2)\\\\Delta \\\\stackrel{}{\\\\sim}\\\\mathcal{N}\\\\left(\\\\mu\\_{prior}, \\\\sigma\\_{prior}^{2}\\\\right). We assume the prior is specified on the relative scale.\n\nIn derivations below we use the marginal distribution of Δ^\\\\hat{\\\\Delta}, which we find using its moment generating function:\n\nE\\[exp⁡tΔ^\\]\\=EΔ\\[E\\[exp⁡tΔ^∣Δ\\]\\]\\=EΔ\\[exp⁡tΔ+t2σ^Δ2\\]\\=exp⁡t2σ^Δ2EΔ\\[exp⁡tΔ\\] \\=exp⁡t2σ^Δ2exp⁡tμ⋆+t2σ⋆2∼N(μ⋆,σ⋆2+σ^Δ2).\\\\begin{align\\*} E\\\\left\\[\\\\exp^{t\\\\hat{\\\\Delta}}\\\\right\\] &= E\\_{\\\\Delta}\\\\left\\[E\\\\left\\[\\\\exp^{t\\\\hat{\\\\Delta}}|\\\\Delta\\\\right\\]\\\\right\\] \\\\\\\\&= E\\_{\\\\Delta}\\\\left\\[\\\\exp^{t\\\\Delta + t^{2}\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right\\] \\\\\\\\&= \\\\exp^{ t^{2}\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}E\\_{\\\\Delta}\\\\left\\[\\\\exp^{t\\\\Delta}\\\\right\\]\\\\ \\\\\\\\&= \\\\exp^{ t^{2}\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\exp^{t\\\\mu^{\\\\star} + t^{2}\\\\sigma\\_{\\\\star}^{2}} \\\\\\\\&\\\\stackrel{}{\\\\sim}\\\\mathcal{N}\\\\left(\\\\mu^{\\\\star}, \\\\sigma\\_{\\\\star}^{2}+\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\right). \\\\end{align\\*}\n\nFor a 2-sided test the probability of rejection is\n\nP(∣Ω−1ωΩ−1/2∣\\>Z1−α/2)\\=P(∣(1σprior2+1σ^Δ2)−1/2(μpriorσprior2+Δ^σ^Δ2)∣\\>Z1−α/2)\\=P(∣(μpriorσprior2+Δ^σ^Δ2)∣\\>(1σprior2+1σ^Δ2)1/2Z1−α/2)\\=P((μpriorσprior2+Δ^σ^Δ2)\\>(1σprior2+1σ^Δ2)1/2Z1−α/2)+P((μpriorσprior2+Δ^σ^Δ2)<−(1σprior2+1σ^Δ2)1/2Z1−α/2)\\=P(Δ^\\>σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\])+P(Δ^<−σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2+μpriorσprior2\\])\\=P(Δ^−μ⋆σ^Δ2+σ⋆2\\>σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\]−μ⋆σ^Δ2+σ⋆2)+P(Δ^−μ⋆σ^Δ2+σ⋆2<−σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2+μpriorσprior2\\]−μ⋆σ^Δ2+σ⋆2)\\=1−Φ(σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\]−μ⋆σ^Δ2+σ⋆2)+Φ(−σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2+μpriorσprior2\\]−μ⋆σ^Δ2+σ⋆2).\\\\begin{align\\*} &P\\\\left(\\\\left|\\\\frac{\\\\Omega^{-1}\\\\omega}{\\\\Omega^{-1/2}}\\\\right| > Z\\_{1-\\\\alpha/2}\\\\right) \\\\\\\\&=P\\\\left(\\\\left|\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{-1/2} \\\\left(\\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}} + \\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)\\\\right|> Z\\_{1-\\\\alpha/2}\\\\right) \\\\\\\\&= P\\\\left(\\\\left|\\\\left(\\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}} + \\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)\\\\right|> \\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2}\\\\right) \\\\\\\\&=P\\\\left(\\\\left(\\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}} + \\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)> \\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2}\\\\right) \\\\\\\\&+ P\\\\left(\\\\left(\\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}} + \\\\frac{\\\\hat{\\\\Delta}}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)< -\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2}\\\\right) \\\\\\\\&= P\\\\left(\\\\hat{\\\\Delta}> \\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]\\\\right) \\\\\\\\&+ P\\\\left(\\\\hat{\\\\Delta}< -\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} + \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]\\\\right) \\\\\\\\&= P \\\\left( \\\\frac{\\\\hat{\\\\Delta}-\\\\mu\\_{\\\\star}}{\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}+\\\\sigma\\_{\\\\star}^{2}}}> \\\\frac{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\mu\\_{\\\\star}}{\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}+\\\\sigma^{2}\\_{\\\\star}}}\\\\right) \\\\\\\\&+ P\\\\left(\\\\frac{\\\\hat{\\\\Delta}-\\\\mu\\_{\\\\star}}{\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}+\\\\sigma\\_{\\\\star}^{2}}}< \\\\frac{-\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} + \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\mu\\_{\\\\star}}{\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}+\\\\sigma\\_{\\\\star}^{2}}}\\\\right) \\\\\\\\&= 1-\\\\Phi\\\\left(\\\\frac{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\mu\\_{\\\\star}}{\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}+\\\\sigma^{2}\\_{\\\\star}}}\\\\right) \\\\\\\\&+ \\\\Phi\\\\left(\\\\frac{-\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} + \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\mu\\_{\\\\star}}{\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}+\\\\sigma\\_{\\\\star}^{2}}}\\\\right). \\\\end{align\\*}\n\nIn practice GrowthBook assumes there is a true fixed effect size, i.e., the variance of the data generating process σ⋆2\\\\sigma\\_{\\\\star}^{2} equals 0, and μ⋆\\=Δ\\\\mu\\_{\\\\star} = \\\\Delta, so two-sided power is\n\nπ\\=1−Φ(σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\]−Δσ^Δ2)+Φ(−σ^Δ2\\[(1σprior2+1σ^Δ2)1/2Z1−α/2−μpriorσprior2\\]−Δσ^Δ2).\\\\begin{align} \\\\begin{split} \\\\pi &= 1-\\\\Phi\\\\left( \\\\frac{ \\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\Delta} {\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}} \\\\right) \\\\\\\\&+\\\\Phi\\\\left( \\\\frac{ -\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}\\\\left\\[\\\\left(\\\\frac{1}{\\\\sigma\\_{prior}^{2}} + \\\\frac{1}{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}\\\\right)^{1/2} Z\\_{1-\\\\alpha/2} - \\\\frac{\\\\mu\\_{prior}}{\\\\sigma\\_{prior}^{2}}\\\\right\\]-\\\\Delta} {\\\\sqrt{\\\\hat{\\\\sigma}\\_{\\\\Delta}^{2}}} \\\\right) . \\\\end{split} \\\\end{align}\n\nWe assume that σ⋆2\\=0\\\\sigma\\_{\\\\star}^{2}=0 for simplicity and because large values of σ⋆2\\\\sigma\\_{\\\\star}^{2} can result in negative MDEs (see [here](#bayesian-minimum-detectable-effect)). If the prior variance σprior2\\\\sigma\\_{prior}^{2} equals infinity then Equation 11 reduces to Equation 4.\n\n### Bayesian minimum detectable effect[​](#bayesian-minimum-detectable-effect \"Direct link to Bayesian minimum detectable effect\")\n\nMDEs are not well defined in the Bayesian literature. We provide MDEs in Bayesian power analysis for customers that are used to conceptualizing MDEs and want to be able to leverage prior information in their analysis.\n\nWe could define the MDE as the minimum value of μ⋆\\\\mu\\_{\\\\star} such that at least π\\\\pi power is achieved. This definition is Bayesian in that it permits uncertainty in the parameters in the data generating process. However, if σ⋆2\\\\sigma\\_{\\\\star}^{2} is large, then there are some combinations of parameters where the MDE can be negative. That is, negative values of μ⋆\\\\mu\\_{\\\\star} result in power being at least π\\\\pi. Usually the inferential focus is the true treatment effect for the experiment (Δ\\\\Delta), not the population mean from which Δ\\\\Delta is just one realization (μ⋆\\\\mu\\_{\\\\star}), so we set σ⋆2\\=0\\\\sigma\\_{\\\\star}^{2} = 0 and consequently, Δ\\=μ⋆\\\\Delta = \\\\mu\\_{\\\\star}. This is why in practice we frame our Bayesian MDE as, \\`\\`given our prior beliefs and the data generating process, what is the probability we can detect an effect of size Δ\\\\Delta?'', where Δ\\\\Delta is a fixed number.\n\nAnother subtlety is that for a fixed sample size, Equation 11 can be decreasing in effect size, illustrated by Figure 1.\n\nFigure 1\n\n![Metric Icon showing CUPED Disabled Reason](https://docs.growthbook.io/images/statistics/power-decreasing.png)\n\nFigure 1 shows the case where the group sample sizes are 1500, the data mean is 0.1, the data variance is 0.5, the specified prior mean μprior\\=0.1\\\\mu\\_{prior} = 0.1, the specified prior variance σprior2\\\\sigma\\_{prior}^{2} is 0.3, and the variance of the data generating process σ⋆2\\\\sigma\\_{\\\\star}^{2} is 0. Nominal 80% power occurs at 1.65, continues to increase in effect size until the effect size is about 3, and then begins decreasing. Power decreases in effect size because the variance in Equation 8 is quadratic in effect size, and in Equation 11 the term in front of Z1−α/2Z\\_{1-\\\\alpha/2} goes to infinity as Δ\\\\Delta gets large. The coefficient in front of Z1−α/2Z\\_{1-\\\\alpha/2} in Equation 4 is 1, so frequentist power is increasing in effect size in all cases. Monotonicity does hold for Bayesian power for absolute effects, where the variance is not affected by the effect size.\n\nBecause power is not monotonic in effect size, we perform a grid search across effect sizes ranging from 0 to 500%. The derivative of Equation 11 is bounded in absolute value by 2ϕ(0)<0.82 \\\\phi(0) < 0.8, where ϕ(.)\\\\phi(.) is the density of the standard normal distribution.\n\nLet the length of one grid cell equal ll. We evaluate power at the points {0,l,2l,...,5−l,5}.\\\\left\\\\{0, l, 2l, ..., 5 -l , 5\\\\right\\\\}. Suppose the power at the kthk^{\\\\text{th}} gridpoint is πk\\\\pi\\_{k}, k\\>0k>0. Because 1) the maximum slope from the midpoint to the endpoint of the cell is no greater than 2ϕ(0)2 \\\\phi(0); and 2) the maximum distance from where power is evaluated is l/2l/2, the maximum power in \\[(l−1)k,lk\\]\\\\left\\[(l-1)k, lk \\\\right\\] is no greater than max⁡(πk−1,πk)+ϕ(0)l\\\\max\\\\left(\\\\pi\\_{k-1}, \\\\pi\\_{k}\\\\right)+\\\\phi(0)l. Motivated by this fact, we describe our approach in Algorithm 1.\n\nIn words, Algorithm 1 evaluates power at Δ\\={0,0.001,0.002,...5}\\\\Delta=\\\\left\\\\{0, 0.001, 0.002, ... 5\\\\right\\\\}, until it finds the first element kk such that π(k)\\>\\=π−ϕ(0)l\\\\pi(k) >= \\\\pi - \\\\phi(0)l. If power exceeds this threshold, then we evaluate a finer grid across the range from \\[k−l,k\\]\\[k-l, k\\], where the grid cell length is l′<<ll' << l. We find the first element (if it exists) of this finer grid where power is at least π\\\\pi. We return this first element as the solution if it exists; otherwise we keep searching the coarse grid.\n\nAlgorithm 1\n\n1.  Define ll as the length between points at which power is evaluated (l=0.001 in production).\n2.  Define the grid of points between 0 and 5 as G\\={0,l,2l,...,5−l,5}.\\\\mathcal{G} = \\\\left\\\\{0, l, 2l, ..., 5 -l , 5\\\\right\\\\}.\n3.  Begin evaluating π(k)\\\\pi(k) for k∈Gk \\\\in \\\\mathcal{G}.\n4.  If π(k)<π−ϕ(0)l\\\\pi(k) < \\\\pi - \\\\phi(0)l for all kk, then the MDE does not exist. Otherwise:\n5.  Find the first k∈Gk \\\\in \\\\mathcal{G} such that π(k)\\>\\=π−ϕ(0)l\\\\pi(k) >= \\\\pi - \\\\phi(0)l. Define l′l' as a finer grid resolution (in production, l′\\=l/100l' = l / 100). Find the first element of the set {k−1,k−1+l′,k−1+2l′,...,k−l′,k}\\\\left\\\\{k -1, k-1+l', k-1+2l', ..., k-l', k \\\\right\\\\} such that power evaluated at that point is at least π\\\\pi. If no such point exists, return to the coarser grid search in Step 3.\n\nIf power exceeds π+ϕ(0)l′\\\\pi + \\\\phi(0)l' at any point in \\[0,5\\]\\[0, 5\\], then Algorithm 1 is guaranteed to detect it. In practice we use l\\=10−3l=10^{-3} and l′\\=10−5l'=10^{-5}.",
    "title": "Power Analysis Technical Details | GrowthBook Docs",
    "description": "Technical details of power analysis",
    "languageCode": "en"
  }
]